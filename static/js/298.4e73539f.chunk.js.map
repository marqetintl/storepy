{"version":3,"file":"static/js/298.4e73539f.chunk.js","mappings":"iUAgBMA,EAAoBC,EAAAA,MAAW,kBAAM,gCACrCC,EAAyBD,EAAAA,MAAW,kBAAM,yDAEjC,SAASE,IAAyB,IAAD,EAC9C,GAAyBC,EAAAA,EAAAA,KAAjBC,EAAR,EAAQA,IAAQC,GAAhB,YACA,GAAiBC,EAAAA,EAAAA,MAAVC,GAAP,gBAEAC,EAAAA,EAAAA,GAAe,CAAEC,SAAUJ,EAAKK,WAAYC,UAAWN,EAAKO,aAE5D,IAAMC,EAAI,IAAIC,EAAAA,GAASV,GAEvB,OAAKS,EAAEE,WAGL,UAAC,KAAD,YACE,SAAC,KAAD,CACEC,KAAK,aACLC,SACE,iBAAKC,UAAU,yBAAf,WACE,SAAC,QAAD,WACE,SAAC,KAAD,CAAiBC,MAAON,EAAEM,MAAOC,SAAS,WAG5C,gBAAKF,UAAU,YAAf,UACE,SAACjB,EAAD,CAAwBoB,KAAK,mCAMrC,SAAC,KAAD,CAAOL,KAAK,MAAMC,SAAS,SAAClB,EAAD,OAE3B,SAAC,KAAD,CACEuB,OAAK,EACLL,SACE,SAAC,UAAD,CACEM,MAAM,WACNF,KAAK,gBACLG,SACE,SAAC,UAAD,CAAYC,GAAG,OAAOC,cAAe,CAAC,qBAAsBR,UAAU,oBAAtE,yBAIFQ,cAAe,CAAC,sBARlB,SAUsB,IAAnBb,EAAEM,MAAMQ,QACP,iBAAKT,UAAU,2CAAf,WACE,cAAGA,UAAU,mBAAb,uDACA,gBAAKA,UAAU,OAAf,UACE,SAAC,UAAD,CAAYO,GAAG,OAAOC,cAAe,CAAC,qBAAsBR,UAAU,yBAAtE,qCAMJ,iCACE,SAAC,KAAD,CAAuBU,WAAU,UAAEf,EAAEgB,YAAJ,aAAE,EAAQD,aAE1Cf,EAAEM,MAAMW,KAAI,SAACC,GAAD,aACX,mBAAC,KAAD,CAAiBA,KAAMA,EAAYxB,OAAAA,EAAQyB,OAAM,UAAEnB,EAAEgB,YAAJ,aAAE,EAAQG,OAAUC,IAAKF,EAAKG,WAGjF,gBAAKhB,UAAU,GAAf,UACE,SAAC,MAAD,kBAAgBL,EAAEgB,MAAlB,IAAwBM,UAAWC,EAAAA,GAAAA,KAAYX,IAAE,iBApDxC","sources":["../../../../shopy/shopy-storejs/src/Product/IndexView.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Routes, Route, useSearchParams } from 'react-router-dom';\n\nimport './indexview.scss';\n\nimport Staff from '@miq/staffjs';\nimport { Response } from '@miq/utiljs';\nimport { Pagination, Viewports } from '@miq/componentjs';\n\nimport { TProduct } from '../types';\nimport { useCrudEmitter } from '../events';\n\nimport { ProductListFilterForm } from './forms';\nimport { useProductListRequest } from './utils';\nimport { ProductCardList, ProductListItem } from './components';\n\nconst ProductCreateView = React.lazy(() => import('./CreateView'));\nconst ProductStaffUpdateView = React.lazy(() => import('./UpdateView'));\n\nexport default function ProductStaffIndexView() {\n  const { res, ...rest } = useProductListRequest();\n  const [params] = useSearchParams();\n\n  useCrudEmitter({ onUpdate: rest.updateItem, onDestroy: rest.removeItem });\n\n  const r = new Response(res);\n\n  if (!r.isSuccess) return null;\n\n  return (\n    <Routes>\n      <Route\n        path=\":prodSlug/\"\n        element={\n          <div className=\"d-grid grid-xl-4 gap-1\">\n            <Viewports.XLUp>\n              <ProductCardList items={r.items} itempath=\"../\" />\n            </Viewports.XLUp>\n\n            <div className=\"span-xl-3\">\n              <ProductStaffUpdateView back=\"/staff/store/products/\" />\n            </div>\n          </div>\n        }\n      />\n\n      <Route path=\"new\" element={<ProductCreateView />} />\n\n      <Route\n        index\n        element={\n          <Staff.View\n            title=\"Products\"\n            back=\"/staff/store/\"\n            actions={\n              <Staff.Link to=\"new/\" requiredPerms={['store.add_product']} className=\"btn btn-primary-3\">\n                Add product\n              </Staff.Link>\n            }\n            requiredPerms={['store.view_product']}\n          >\n            {r.items.length === 0 ? (\n              <div className=\"text-center p-staff-list-empty py-3 my-3\">\n                <p className=\"fw-light text-md\">Add products to your shop to get started</p>\n                <div className=\"my-4\">\n                  <Staff.Link to=\"new/\" requiredPerms={['store.add_product']} className=\"btn btn-primary btn-md\">\n                    Add a new product\n                  </Staff.Link>\n                </div>\n              </div>\n            ) : (\n              <>\n                <ProductListFilterForm categories={r.data?.categories} />\n\n                {r.items.map((item: TProduct) => (\n                  <ProductListItem item={item} {...{ params, stages: r.data?.stages }} key={item.slug} />\n                ))}\n\n                <div className=\"\">\n                  <Pagination {...r.data} component={Staff.Link} to />\n                </div>\n              </>\n            )}\n          </Staff.View>\n        }\n      />\n    </Routes>\n  );\n}\n"],"names":["ProductCreateView","React","ProductStaffUpdateView","ProductStaffIndexView","useProductListRequest","res","rest","useSearchParams","params","useCrudEmitter","onUpdate","updateItem","onDestroy","removeItem","r","Response","isSuccess","path","element","className","items","itempath","back","index","title","actions","to","requiredPerms","length","categories","data","map","item","stages","key","slug","component","Staff"],"sourceRoot":""}