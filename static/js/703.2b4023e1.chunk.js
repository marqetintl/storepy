"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[703],{8177:function(e,r,n){n.d(r,{EQ:function(){return b},Mj:function(){return Z},Wx:function(){return N},cC:function(){return p},fG:function(){return g},fn:function(){return _},ld:function(){return j},w6:function(){return y}});var t=n(8519),i=n(8312),a=n(2411),s=n(2379),l=n(2145),c=n(4425),o=n(8136),u=["name","error"],d=["id","className","inputClassName"],m=["id","clearFocus","value","onChange","placeholder","mirror"],h=["children"],x=["name","error","nullValue"],f=["label","children"],v=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.forwardRef((function(n,s){var d=a.useContext(c.ZP)||(0,l.q9)("FormCtx"),m=n.name,h=n.error,x=(0,i.Z)(n,u);h=h||d.errors[m];var f=(0,l.UT)([r.className,n.className,h&&"is-invalid"]);return(0,o.jsx)(e,(0,t.Z)((0,t.Z)((0,t.Z)({value:d.values[m],onChange:function(e){d.handleChange(e)}},r.input),x),{},{name:m,className:f,ref:s}))}))},p=v("input",{className:"miq-form-input"}),j=v("textarea",{className:"miq-form-textarea"}),Z=a.forwardRef((function(e,r){var n=e.id,a=e.className,c=e.inputClassName,u=(0,i.Z)(e,d);return(0,o.jsxs)("div",{id:n,className:(0,l.UT)(["miq-search-input-wrapper d-flex align-items-center",a]),children:[(0,o.jsx)("div",{className:"icon-wrapper",children:(0,o.jsx)(s.PJ.HN,{className:"miq-search-icon"})}),(0,o.jsx)("input",(0,t.Z)((0,t.Z)({name:"q",placeholder:"Search ...",minLength:3,maxLength:99,className:(0,l.UT)(["miq-form-input miq-search-input",c])},u),{},{type:"search",ref:r}))]})})),b=v("input",{className:"miq-form-input",input:{minLength:7,maxLength:16,pattern:"[0-9]*",type:"tel",onKeyPress:function(e){return!/[0-9]/.test(e.key)&&e.preventDefault()}}}),g=v(a.forwardRef((function(e,r){var n=e.id,a=e.clearFocus,s=e.value,c=e.onChange,u=e.placeholder,d=void 0===u?"Start typing ...":u,h=e.mirror,x=(0,i.Z)(e,m),f=e.style;return(0,o.jsxs)("div",{id:n,className:(0,l.UT)(["miq-textareax",a&&"clear-focus"]),children:[h?(0,o.jsx)("span",{className:"miq-textareax-input-mirror",style:f,dangerouslySetInnerHTML:{__html:"".concat(h,"\n")}}):(0,o.jsx)("span",{className:"miq-textareax-input-mirror",style:f,children:"".concat(s,"\n")}),(0,o.jsx)("div",{className:"miq-textareax-input-wrapper",children:(0,o.jsx)("textarea",(0,t.Z)((0,t.Z)({},x),{},{value:s,onChange:c,placeholder:d,style:f,ref:r}))})]})}))),y=a.forwardRef((function(e,r){var n,s,u=e.children,d=(0,i.Z)(e,h),m=a.useContext(c.ZP)||(0,l.q9)("FormCtx"),f=d.name,v=d.error,p=d.nullValue,j=(0,i.Z)(d,x);return v=v||(null===m||void 0===m||null===(n=m.errors)||void 0===n?void 0:n[f]),(0,o.jsxs)("select",(0,t.Z)((0,t.Z)({value:null===m||void 0===m||null===(s=m.values)||void 0===s?void 0:s[f],onChange:m.handleChange},j),{},{name:f,className:(0,l.UT)(["miq-form-select",v&&"is-invalid",j.className]),ref:r,children:[(null===p||void 0===p?void 0:p.label)&&(0,o.jsx)(N,(0,t.Z)((0,t.Z)({},p),{},{value:(null===p||void 0===p?void 0:p.value)||""})),u]}))})),N=function(e){var r=e.label,n=e.children,a=(0,i.Z)(e,f);return(0,o.jsx)("option",(0,t.Z)((0,t.Z)({},a),{},{value:a.value,children:n||r}))},_=a.forwardRef((function(e,r){var n,i=a.useContext(c.ZP)||(0,l.q9)("FormCtx"),s=e.name,u=void 0===s?(0,l.q9)("Name prop"):s,d=e.error;return d=d||(null===i||void 0===i||null===(n=i.errors)||void 0===n?void 0:n[u]),(0,o.jsx)("input",(0,t.Z)((0,t.Z)({onChange:i.toggleCheck,checked:i.values[u]},e),{},{type:"checkbox",className:(0,l.UT)(["miq-form-checkbox",d&&"is-invalid",e.className]),ref:r}))}))},4425:function(e,r,n){n.d(r,{RV:function(){return o},cI:function(){return u}});var t=n(6714),i=n(8519),a=n(6009),s=n(2411),l=n(2145),c=(0,s.createContext)(null),o=c.Provider;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useState)((0,i.Z)({},e)),n=(0,a.Z)(r,2),c=n[0],o=n[1],u=(0,s.useState)({}),d=(0,a.Z)(u,2),m=d[0],h=d[1],x=(0,s.useMemo)((function(){var e=function(e,r){o((0,i.Z)((0,i.Z)({},c),{},(0,t.Z)({},e,r)))},r=function(r){var n=r.target,t=n.name,i=n.checked;return e(t,i)};return{values:c,setValue:e,setValues:o,handleChange:function(n){var a=n.target,s=a.name,l=a.type,c=a.value;return Object.keys(m).includes(s)&&h((0,i.Z)((0,i.Z)({},m),{},(0,t.Z)({},s,null))),"checkbox"===l?r(n):e(s,c)},toggleCheck:r,errors:m,setError:function(e,r){h((0,i.Z)((0,i.Z)({},m),{},(0,t.Z)({},e,r)))},setErrors:h,handleError:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&e.response){var n=e.response;if(400!==n.status)return l.TQ&&r&&console.error("Request error status: ".concat(n.status)),e;var a={},s=n.data;l.TQ&&r&&console.error("ERROR=>",s),Object.keys(s).forEach((function(e){var r=s[e];Array.isArray(r)&&r.length>0&&(r=r[0]),a=(0,i.Z)((0,i.Z)({},a),{},(0,t.Z)({},e,r.message||r))})),h((0,i.Z)({},a))}},hasErrors:function(){return""!==Object.keys(m).join()}}}),[c,m]);return x}r.ZP=c},5603:function(e,r,n){n.d(r,{F$:function(){return b},kq:function(){return m},bA:function(){return N},uV:function(){return y},lm:function(){return g},wd:function(){return Z},ZP:function(){return q},cI:function(){return S.cI}});var t=n(8519),i=n(8312),a=n(2411),s=n(2145),l=n(2379),c=n(8136),o=["children","value"],u=function(e){var r=e.children,n=e.value,a=(0,i.Z)(e,o),s=r||("string"===typeof n?(0,c.jsx)("label",(0,t.Z)((0,t.Z)({},a),{},{children:n})):n);return(0,c.jsx)("div",{className:"miq-form-label",children:s})},d=function(e){var r=e.error;return r?(0,c.jsx)("div",{className:"miq-form-error",children:r}):null},m=n(8177),h=["label","text","error"],x=["label","text","error"],f=["label","text","error"],v=["label","text","error"],p=["label","text","error"],j=["children","label","text","error","checkbox"],Z=function(e){var r=e.label,n=e.text,a=e.error,s=(0,i.Z)(e,h);return(0,c.jsx)(_,{label:r,text:n,error:a,children:(0,c.jsx)(m.cC,(0,t.Z)((0,t.Z)({},s),{},{name:"name",maxLength:99}))})},b=function(e){var r=e.label,n=e.text,a=e.error,s=(0,i.Z)(e,x);return(0,c.jsx)(_,{label:r,text:n,error:a,children:(0,c.jsx)(m.fG,(0,t.Z)((0,t.Z)({},s),{},{name:"description"}))})},g=function(e){var r=e.label,n=void 0===r?"Meta title":r,a=e.text,s=e.error,l=(0,i.Z)(e,f);return(0,c.jsx)(_,{label:n,text:a,error:s,children:(0,c.jsx)(m.cC,(0,t.Z)((0,t.Z)({required:!0,maxLength:99},l),{},{name:"meta_title"}))})},y=function(e){var r=e.label,n=void 0===r?"Meta slug":r,a=e.text,s=e.error,l=(0,i.Z)(e,v);return(0,c.jsx)(_,{label:n,text:a,error:s,children:(0,c.jsx)(m.cC,(0,t.Z)((0,t.Z)({required:!0,maxLength:99},l),{},{name:"meta_slug"}))})},N=function(e){var r=e.label,n=void 0===r?"Meta description":r,a=e.text,s=e.error,l=(0,i.Z)(e,p);return(0,c.jsx)(_,{label:n,text:a,error:s,children:(0,c.jsx)(m.fG,(0,t.Z)((0,t.Z)({},l),{},{name:"meta_description"}))})};function _(e){var r=e.children,n=e.label,t=e.text,a=e.error,l=e.checkbox,o=(0,i.Z)(e,j),m=n||t;return l?(0,c.jsxs)("div",{className:(0,s.UT)(["miq-form-field",o.className]),children:[(0,c.jsxs)("div",{className:"d-flex align-items-center",children:[(0,c.jsx)("div",{className:"me-1",children:r}),(0,c.jsx)(u,{value:n})]}),t&&(0,c.jsx)("div",{className:"miq-form-field-text",children:t}),(0,c.jsx)(d,{error:a})]}):(0,c.jsxs)("div",{className:(0,s.UT)(["miq-form-field",o.className]),children:[m&&(0,c.jsxs)("div",{className:"miq-form-field-header",children:[n&&(0,c.jsx)(u,{value:n}),t&&(0,c.jsx)("div",{className:"miq-form-field-text",children:t})]}),r,(0,c.jsx)(d,{error:a})]})}var S=n(4425),k=["children","context"],P=["children","value"],C=a.forwardRef((function(e,r){var n=e.children,a=e.context,l=(0,i.Z)(e,k);return(0,c.jsx)("form",(0,t.Z)((0,t.Z)({},l),{},{ref:r,className:(0,s.UT)(["miq-form",l.className]),children:(0,c.jsx)(S.RV,{value:a,children:n})}))}));C.Provider=S.RV,C.Error=d,C.Label=u,C.Field=_,C.Submit=function(e){var r=e.children,n=e.value,a=(0,i.Z)(e,P);return(0,c.jsx)(l.zx,(0,t.Z)((0,t.Z)({},a),{},{type:"submit",children:r||n}))},C.Text=m.cC,C.TextArea=m.ld,C.TextAreaX=m.fG,C.Phone=m.EQ,C.Checkbox=m.fn,C.Option=m.Wx,C.Select=m.w6;var q=C},2290:function(e,r,n){n.d(r,{Cz:function(){return g},K7:function(){return N},RC:function(){return y},Wl:function(){return b}});var t=n(8519),i=n(8312),a=n(2411),s=n(5603),l=n(2145),c=n(2379),o=n(138),u=n(8136),d=["children"],m=["label","multiple","accept"],h=["onUpload","onSuccess","onSuccessMulti","onError","onErrorMulti"],x=["instance","accept"],f=["field","onUpload","onSuccess","onError"],v=["children"],p=["instance","label"],j=["onSuccess","onError"],Z="image/*",b=a.forwardRef((function(e,r){var n=e.children,s=(0,i.Z)(e,d),l=a.useRef(null),x=(0,o.pB)(),f=s.label,v=s.multiple,p=s.accept,j=void 0===p?Z:p,b=(0,i.Z)(s,m),g=b.onUpload,y=b.onSuccess,N=b.onSuccessMulti,_=b.onError,S=b.onErrorMulti,k=(0,i.Z)(b,h);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.zx,(0,t.Z)((0,t.Z)({className:"miq-img-create-btn"},k),{},{onClick:function(){var e;return null===l||void 0===l||null===(e=l.current)||void 0===e?void 0:e.click()},ref:r,children:n||f||"Upload image".concat(v?"s":"")})),(0,u.jsx)(c.S2,{accept:j,multiple:v,onChange:v?function(e){if(g)return g(e);var r=e.target.files;if(r){var n=[],t=[];Array.from(r).splice(0,10).forEach((function(e,r){n.push(x.create(e).catch((function(e){return t.push(e)})))})),t&&S&&S(t),Promise.all(n).then((function(e){if(N)return N(e)}))}}:function(e){if(g)return g(e);var r=e.target.files;if(r){var n=Array.from(r)[0];return x.create(n).then((function(e){return null===y||void 0===y?void 0:y(e)})).catch((function(e){return null===_||void 0===_?void 0:_(e)}))}},ref:function(e){return l.current=e}})]})})),g=a.forwardRef((function(e,r){var n=a.useRef(null),s=e.instance,l=e.accept,o=void 0===l?Z:l,d=(0,i.Z)(e,x),m=d.field,h=void 0===m?"src":m,v=d.onUpload,p=d.onSuccess,j=d.onError,b=(0,i.Z)(d,f);if("picture"===h)return(0,u.jsx)("div",{className:"miq-img-update-btn",children:e.children});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.zx,(0,t.Z)((0,t.Z)({className:"miq-img-update-btn"},b),{},{onClick:function(){var e;return null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.click()},ref:r})),(0,u.jsx)(c.S2,{accept:o,onChange:function(e){if("picture"===h)return null;if(v)return v(e);var r=e.target.files;if(r){var n=Array.from(r)[0];return s.update(n,void 0,h).then((function(e){return null===p||void 0===p?void 0:p(e)})).catch((function(e){return null===j||void 0===j?void 0:j(e)}))}},ref:function(e){return n.current=e}})]})})),y=a.forwardRef((function(e,r){var n=e.children,a=(0,i.Z)(e,v),s=a.instance,o=a.label,d=(0,i.Z)(a,p),m=d.onSuccess,h=d.onError,x=(0,i.Z)(d,j);return(0,u.jsx)(c.zx,(0,t.Z)((0,t.Z)({},x),{},{onClick:function(){return s.destroy().then((function(e){return null===m||void 0===m?void 0:m(e)})).catch((function(e){return null===h||void 0===h?void 0:h(e)}))},className:(0,l.UT)(["miq-img-delete-btn",a.className]),ref:r,children:n||o||"Delete Image"}))})),N=a.forwardRef((function(e,r){return(0,u.jsxs)(s.ZP.Select,(0,t.Z)((0,t.Z)({name:"view"},e),{},{ref:r,children:[(0,u.jsx)(s.ZP.Option,{value:"src",label:"Desktop"}),(0,u.jsx)(s.ZP.Option,{value:"mobile",label:"Mobile"}),(0,u.jsx)(s.ZP.Option,{value:"thumb",label:"Thumbnail"}),(0,u.jsx)(s.ZP.Option,{value:"square",label:"Square"}),(0,u.jsx)(s.ZP.Option,{value:"picture",label:"Picture"})]}))}))},2782:function(e,r,n){n.d(r,{pB:function(){return j.pB},CD:function(){return $.Wl},RC:function(){return $.RC},Cz:function(){return $.Cz},K7:function(){return $.K7},eR:function(){return Y.eR},x5:function(){return Y.x5},ZP:function(){return re}});var t=n(8519),i=n(8312),a=n(2411),s=n(6520),l=n(9002),c=n(2145),o=n(2379),u=n(8136),d=["label","text"],m=a.lazy((function(){return n.e(515).then(n.bind(n,7515))})),h=a.lazy((function(){return n.e(26).then(n.bind(n,5026))})),x=a.lazy((function(){return n.e(362).then(n.bind(n,3362))}));function f(){return(0,u.jsxs)(s.Z5,{children:[(0,u.jsx)(s.AW,{path:"pages/",element:(0,u.jsx)(x,{})}),(0,u.jsx)(s.AW,{path:"general/",element:(0,u.jsx)(m,{})}),(0,u.jsx)(s.AW,{path:"index/",element:(0,u.jsx)(h,{})}),(0,u.jsx)(s.AW,{path:"/",element:(0,u.jsx)(re.View,{title:"Settings",back:"/staff/",requiredPerms:["core.view_sitesetting"],children:(0,u.jsxs)("div",{className:"d-grid grid-sm-3 grid-md-4",children:[(0,u.jsx)(v,{to:"general/",label:"General",text:"Site settings and branding"}),(0,u.jsx)(v,{to:"index/",label:"Index",text:"Homepage settings"}),(0,u.jsx)(v,{to:"pages/",label:"Pages",text:"Site pages settings"})]})})})]})}var v=function(e){var r=e.label,n=e.text,a=(0,i.Z)(e,d);return(0,u.jsxs)(re.Link,(0,t.Z)((0,t.Z)({},a),{},{className:"d-block",children:[(0,u.jsx)("span",{className:"text-md",children:r}),(0,u.jsx)("p",{className:"text-muted text-sm pb-3",children:n})]}))},p=n(5603),j=n(138);function Z(){return(0,u.jsx)(s.Z5,{children:(0,u.jsx)(s.AW,{path:"/",element:(0,u.jsx)(b,{})})})}var b=function(){var e=a.useContext(l.h2),r=e.user,n=e.updateUser,t=e.apps,i=r.employee,s={first_name:r.first_name,last_name:r.last_name,gender:r.gender};i&&(s.position=i.position);var c=(0,p.cI)(s);if(!r)return null;var o=(0,j.mO)(r);return(0,u.jsx)(re.View,{title:"Account",children:(0,u.jsxs)(p.ZP,{context:c,onSubmit:function(e){return e.preventDefault(),o.update(c.values).then((function(e){var r=e.data;return n(r)})).catch((function(e){return c.handleError(e)}))},children:[(0,u.jsxs)("div",{className:"d-grid grid-md-4 gap-2",children:[(0,u.jsxs)(re.Section,{title:"Profile information",text:"Update your profile information.",className:"span-md-3",footer:(0,u.jsx)(p.ZP.Submit,{value:"Save"}),children:[(0,u.jsx)(p.ZP.Field,{label:"First name",error:c.errors.first_name,className:"d-grid grid-md-5",children:(0,u.jsx)(p.ZP.Text,{required:!0,name:"first_name",placeholder:"First name",className:"span-md-3",minLength:2})}),(0,u.jsx)(p.ZP.Field,{label:"Last name",error:c.errors.last_name,className:"d-grid grid-md-5",children:(0,u.jsx)(p.ZP.Text,{required:!0,name:"last_name",placeholder:"Last name",className:"span-md-3",minLength:2})}),(0,u.jsx)(p.ZP.Field,{label:"Gender",className:"d-grid grid-md-5",children:(0,u.jsxs)(p.ZP.Select,{required:!0,name:"gender",nullValue:{label:"Select gender"},className:"span-md-3",children:[(0,u.jsx)("option",{value:"OTHER",children:"Other"}),(0,u.jsx)("option",{value:"MALE",children:"Male"}),(0,u.jsx)("option",{value:"FEMALE",children:"Female"})]})}),Object.keys(t).includes("miq_hrm")&&(0,u.jsx)(p.ZP.Field,{label:"Role",error:c.errors.position,className:"d-grid grid-md-5 mb-1",children:(0,u.jsx)(p.ZP.Text,{required:!0,name:"position",placeholder:"Role",className:"span-md-3",minLength:2})})]}),(0,u.jsx)(re.Section,{title:"Avatar",text:"Update your profile picture. Images must be .png, .jpg or .gif format.",className:"avatar-section"})]}),(0,u.jsx)(re.Section,{title:"Email",text:"Please contact support to change your email.",children:(0,u.jsx)("p",{className:"text-muted text-sm",children:r.email})}),(0,u.jsx)(re.Section,{title:"Password",text:"Please contact support to change your password. Password must be at least 6 characters long."})]})})},g=["className","fallback"],y=["links","sidebarCN","children","mainCN","mobileNavCN"],N=function(e){return(0,u.jsxs)("a",{href:"/staff/".concat((0,c.Xs)(e.href)),className:"miq-staff-nav-link",children:[null===e||void 0===e?void 0:e.icon,(0,u.jsx)("span",{className:"label",children:e.label})]})},_=function(e){var r=a.useContext(l.h2);if(!r)return null;var n=e.className,d=e.fallback,m=void 0===d?(0,u.jsx)(o.gb,{}):d,h=(0,i.Z)(e,g);if(!r.isLoaded)return m;var x=r.user,v=r.site;if(!x||!x.is_staff)return m;var p=h.links,j=h.sidebarCN,b=(h.children,h.mainCN),_=h.mobileNavCN,k=(0,i.Z)(h,y),P=p.filter((function(e){return e.href&&e})),C=P.filter((function(e){return e.mobile&&e})),q=p.filter((function(e){return e.element&&e}));return(0,u.jsxs)(o.IE,(0,t.Z)((0,t.Z)({},k),{},{className:(0,c.UT)([n,S]),children:[(0,u.jsxs)("nav",{className:(0,c.UT)(["".concat(S,"-sidebar"),j]),children:[(0,u.jsx)("header",{className:"".concat(S,"-sidebar-header"),children:(0,u.jsx)("div",{className:"text-md text-ellipsis p-1",children:v.name})}),(0,u.jsxs)("section",{className:"".concat(S,"-sidebar-body"),children:[P&&(0,u.jsx)("div",{className:"".concat(S,"-sidebar-body-content"),children:P.map((function(e,r){return(0,a.createElement)(N,(0,t.Z)((0,t.Z)({},e),{},{key:r}))}))}),(0,u.jsxs)("div",{className:"".concat(S,"-sidebar-body-footer"),children:[(0,u.jsx)(N,{href:"account/",label:x.first_name,icon:(0,u.jsx)(o.PJ.Fc,{})}),(0,u.jsx)(N,{href:"settings/",label:"Settings",icon:(0,u.jsx)(o.PJ.XV,{})})]})]})]}),(0,u.jsx)("div",{className:(0,c.UT)(["".concat(S,"-main"),b]),role:"main",children:(0,u.jsx)("div",{className:"miq-container-fluid",children:(0,u.jsxs)(s.Z5,{children:[q.map((function(e,r){return(0,u.jsx)(s.AW,{path:"".concat((0,c.Xs)(e.href),"/*"),element:e.element},r)})),(0,u.jsx)(s.AW,{path:"account/*",element:(0,u.jsx)(Z,{})}),(0,u.jsx)(s.AW,{path:"settings/*",element:(0,u.jsx)(f,{})})]})})}),C&&(0,u.jsx)("nav",{className:(0,c.UT)(["".concat(S,"-mobile-nav"),_]),children:C.map((function(e,r){return(0,a.createElement)(N,(0,t.Z)((0,t.Z)({},e),{},{key:r}))}))})]}))},S="miq-staff-layout",k=["requiredPerms","fallback"],P=Array.isArray;function C(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var s=n.requiredPerms,o=n.fallback,d=(0,i.Z)(n,k),m=a.useContext(l.h2),h=m.user,x=m.perms;return!h||!h.is_staff||s&&!q(x.perms,s)?o||r.fallback||null:(0,u.jsx)(e,(0,t.Z)((0,t.Z)({},d),{},{className:(0,c.UT)([r.className,null===d||void 0===d?void 0:d.className])}))}}var q=function(e,r){return!(!P(e)||!P(r))&&e.filter((function(e){return r.includes(e)})).length===r.length},w=C((function(e){return(0,u.jsx)(o.G7,(0,t.Z)((0,t.Z)({},e),{},{className:(0,c.UT)(["miq-staff-view",e.className]),mainCN:"miq-staff-view-main",footerCN:"miq-staff-view-footer"}))})),F=n(1408),T=C(F.OL,{className:"miq-staff-nav-link"}),E=C(F.rU,{className:"miq-staff-link"}),A=C(o.zx,{className:"miq-staff-btn"}),D=C(o.vz),O=["dt","showWeekDay","short"],z=["dt","endDate","renderDay"],U=["render"],I=["short"],L=function(e){var r=e.dt,n=void 0===r?new Date:r,s=e.showWeekDay,l=void 0===s||s,o=e.short,d=(0,i.Z)(e,O),m=n.getMonthWeeks();return(0,u.jsxs)("div",{className:"miq-month",children:[l&&(0,u.jsx)(M,{short:o}),(0,u.jsx)("div",{id:"Weeks",className:"miq-month-weeks",children:m.map((function(e){return(0,a.createElement)(W,(0,t.Z)((0,t.Z)({},d),{},{dt:e[0],showWeekDay:!1,key:(0,c.Vj)()}))}))})]})},W=function(e){var r=e.dt,n=void 0===r?new Date:r,s=e.endDate,l=e.renderDay,o=(0,i.Z)(e,z),d=n.getWeekDates();return s&&(d=d.filter((function(e){return e<=s}))),(0,u.jsx)("div",{className:"miq-week",id:"Week",children:(0,u.jsx)("div",{id:"Dates",className:"miq-week-dates d-grid grid-md-7",children:d.map((function(e){return(0,a.createElement)(R,(0,t.Z)((0,t.Z)({},o),{},{dt:e,render:l,key:(0,c.Vj)()}))}))})})},R=function(e){var r=e.render,n=(0,i.Z)(e,U);if(r)return r(n);var t=n.dt,a=n.short,s=n.showWeekDay,l=void 0===s||s;return(0,u.jsxs)("div",{className:(0,c.UT)(["miq-day",e.className]),children:[l&&(0,u.jsx)(V,{dt:t,short:a}),(0,u.jsx)(H,{dt:t})]})},V=function(e){var r=e.dt,n=e.short,t=G.find((function(e){return e.index===r.getDay()}));return(0,u.jsx)("div",{className:"miq-weekday",children:n?null===t||void 0===t?void 0:t.short:null===t||void 0===t?void 0:t.long})},M=function(e){var r=e.short;(0,i.Z)(e,I);return(0,u.jsx)("div",{className:"miq-weekdays d-grid grid-md-7",children:G.map((function(e){return(0,u.jsx)("div",{className:"miq-weekday",children:r?null===e||void 0===e?void 0:e.short:null===e||void 0===e?void 0:e.long},e.index)}))})},H=function(e){var r,n=e.dt,t=e.className;return(0,u.jsx)("div",{className:(0,c.UT)(["miq-day-date-num",n.isToday()&&"today",t]),children:null===n||void 0===n||null===(r=n.getDate)||void 0===r?void 0:r.call(n)})},G=[{short:"Sun",long:"Sunday"},{short:"Mon",long:"Monday"},{short:"Tue",long:"Tuesday"},{short:"Wed",long:"Wednesday"},{short:"Thu",long:"Thursday"},{short:"Fri",long:"Friday"},{short:"Sat",long:"Saturday"}].map((function(e,r){return(0,t.Z)((0,t.Z)({},e),{},{index:r})})),B=["onDateClick"];var J=function(e){var r=e.dt,n=e.activeDt,t=e.onClick,i=r.isToday(),a=r.isSameDay(n);return(0,u.jsx)("div",{className:(0,c.UT)(["miq-day miq-datepicker-day"]),children:(0,u.jsx)(o.zx,{onClick:function(){if(t)return t(r)},className:(0,c.UT)(["miq-datepicker-btn",i&&"today",a&&"active"]),children:(0,u.jsx)(H,{dt:r})})})},K=["children","dt"],Q=["children","dt"];function X(e){var r=(null===e||void 0===e?void 0:e.currentDate)||new Date;return Object.assign({},e,{currentDate:r})}X.DatePicker=function(e){var r=e.onDateClick,n=(0,i.Z)(e,B).dt;return(0,u.jsx)("div",{className:(0,c.UT)(["miq-datepicker",e.className]),children:(0,u.jsx)(L,(0,t.Z)((0,t.Z)({},e),{},{short:!0,dt:n,renderDay:function(e){return(0,u.jsx)(J,(0,t.Z)((0,t.Z)({},e),{},{onClick:r}))},endDate:n.getMonthLastDt()}))})},X.Week=W,X.WeekDay=V,X.WeekDays=M,X.Day=R,X.DateNum=H,X.YearNum=function(e){var r=e.dt;return(0,u.jsx)("div",{className:"miq-year-num",children:r.getFullYear()})},X.PrevWeekButton=function(e){var r=e.children,n=e.dt,a=(0,i.Z)(e,K);return(0,u.jsx)(o.zx,(0,t.Z)((0,t.Z)({},a),{},{onClick:function(){return null===a||void 0===a?void 0:a.onClick(n.subDays(7))},children:r}))},X.NextWeekButton=function(e){var r=e.children,n=e.dt,a=(0,i.Z)(e,Q);return(0,u.jsx)(o.zx,(0,t.Z)((0,t.Z)({},a),{},{onClick:function(){return null===a||void 0===a?void 0:a.onClick(n.addDays(7))},children:r}))};var Y=n(4636),$=n(2290),ee=function(e){return Object.assign({},e)};ee.Layout=_,ee.View=w,ee.Section=D,ee.Button=A,ee.Link=E,ee.NavLink=T,ee.Img=j.pB;var re=ee},138:function(e,r,n){n.d(r,{pB:function(){return v},mO:function(){return x}});var t=n(8519),i=n(2061);function a(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=(0,i.Z)(e)););return e}function s(){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,r,n){var t=a(e,r);if(t){var i=Object.getOwnPropertyDescriptor(t,r);return i.get?i.get.call(arguments.length<3?e:n):i.value}},s.apply(this,arguments)}var l=n(7411),c=n(1135),o=n(2518),u=n(2485),d=n(2379),m=n(4636),h=function(e){(0,o.Z)(n,e);var r=(0,u.Z)(n);function n(){return(0,c.Z)(this,n),r.apply(this,arguments)}return(0,l.Z)(n)}(m.x5),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.eR)(e,"account/",h)},f=function(e){(0,o.Z)(n,e);var r=(0,u.Z)(n);function n(){return(0,c.Z)(this,n),r.apply(this,arguments)}return(0,l.Z)(n,[{key:"createFromUrl",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s((0,i.Z)(n.prototype),"create",this).call(this,{src:e,alt_text:r})}},{key:"create",value:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.name.length>499)return Promise.reject("Filename too long");var l=new FormData;return l.append("src",e,e.name),r&&l.append("alt_text",r),s((0,i.Z)(n.prototype),"create",this).call(this,l,(0,t.Z)((0,t.Z)({},a),{},{headers:{"content-type":"multipart/form-data"}}))}},{key:"updateMobile",value:function(e){return this.update(e,void 0,"mobile")}},{key:"updateSquare",value:function(e){return this.update(e,void 0,"square")}},{key:"updateThumb",value:function(e){e.name;return this.update(e,void 0,"thumb")}},{key:"updateValues",value:function(e){return s((0,i.Z)(n.prototype),"update",this).call(this,e)}},{key:"update",value:function(e,r,t){if(e.name.length>499)return Promise.reject("Filename too long");var a=new FormData;switch(t||(t="src"),t){case"mobile":a.append("src_mobile",e,e.name);break;case"thumb":a.append("thumb",e,e.name);break;case"square":a.append("thumb_sq",e,e.name);break;default:a.append("src",e,e.name)}return r&&a.append("alt_text",r),s((0,i.Z)(n.prototype),"update",this).call(this,a,{headers:{"content-type":"multipart/form-data"}})}}]),n}(m.x5),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.eR)(e,"staffimages",f)};v.HorizontalGallery=d.Ei.HorizontalGallery,v.VerticalGallery=d.Ei.VerticalGallery,v.Mobile=d.Ei.Mobile,v.Thumb=d.Ei.Thumb,v.Square=d.Ei.Square,v.Picture=d.Ei.Picture,v.Image=d.Ei.Image},4636:function(e,r,n){n.d(r,{eR:function(){return x},x5:function(){return h}});var t=n(7411),i=n(1135),a=n(6690),s=n(2518),l=n(2485),c=n(1714),o=n.n(c),u=n(2145);o().defaults.xsrfCookieName="csrftoken",o().defaults.xsrfHeaderName="X-CSRFTOKEN",o().defaults.headers.post["Content-Type"]="application/json";var d="".concat(u.yK).concat("/api/v1/"),m=o().create({baseURL:d,timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}}),h=function(e){(0,s.Z)(n,e);var r=(0,l.Z)(n);function n(e,t){var s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return(0,i.Z)(this,n),(s=r.call(this,e,t,l)).data=e,Object.assign((0,a.Z)(s),e),s}return(0,t.Z)(n)}(u.Id);function x(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,t=new n(e,r);return t}},2703:function(e,r,n){n.r(r),n.d(r,{default:function(){return g}});var t,i=n(2411),a=n(2782),s=n(2379),l=n(6520),c=n(9002),o=n(4627),u=n(8136);!function(e){e.SHEIN="SHEIN",e.PLT="PLT",e.FNOVA="FNOVA"}(t||(t={}));var d=i.lazy((function(){return n.e(494).then(n.bind(n,8494))})),m=i.lazy((function(){return Promise.resolve().then(n.bind(n,7825))})),h=i.lazy((function(){return n.e(170).then(n.bind(n,2170))})),x=i.lazy((function(){return Promise.resolve().then(n.bind(n,4627))})),f=i.lazy((function(){return n.e(397).then(n.bind(n,7397))})),v=i.lazy((function(){return Promise.all([n.e(823),n.e(615)]).then(n.bind(n,3615))})),p=i.lazy((function(){return n.e(298).then(n.bind(n,7298))})),j=i.lazy((function(){return n.e(426).then(n.bind(n,1426))}));function Z(){return i.useContext(c.h2).shopy_settings?(0,u.jsxs)(l.Z5,{children:[(0,u.jsx)(l.AW,{path:"orders/*",element:(0,u.jsxs)(l.Z5,{children:[(0,u.jsx)(l.AW,{path:":ordSlug/:prodSlug/",element:(0,u.jsx)(h,{})}),(0,u.jsx)(l.AW,{path:":ordSlug/settings/",element:(0,u.jsx)(o.OrderSettingUpdateView,{})}),(0,u.jsx)(l.AW,{path:":ordSlug/",element:(0,u.jsx)(x,{})}),(0,u.jsx)(l.AW,{path:"/*",element:(0,u.jsx)(m,{})})]})}),(0,u.jsx)(l.AW,{path:"products/*",element:(0,u.jsx)(l.Z5,{children:(0,u.jsx)(l.AW,{path:"/*",element:(0,u.jsx)(p,{})})})}),(0,u.jsx)(l.AW,{path:"categories/*",element:(0,u.jsxs)(l.Z5,{children:[(0,u.jsx)(l.AW,{path:":catSlug/",element:(0,u.jsx)(v,{})}),(0,u.jsx)(l.AW,{index:!0,element:(0,u.jsx)(f,{})})]})}),(0,u.jsx)(l.AW,{path:"settings/",element:(0,u.jsx)(j,{})}),(0,u.jsx)(l.AW,{path:"/",element:(0,u.jsx)(d,{})})]}):null}var b=i.lazy((function(){return n.e(464).then(n.bind(n,7464))}));function g(){return(0,u.jsx)(a.ZP.Layout,{links:[{href:"store/",label:"Store",icon:(0,u.jsx)(s.PJ.k3,{}),element:(0,u.jsx)(Z,{}),mobile:!0},{href:"finance/",label:"Finance",icon:(0,u.jsx)(s.PJ._K,{}),element:(0,u.jsx)(b,{})}]})}},421:function(e,r,n){n.d(r,{A5:function(){return g},K1:function(){return N},n9:function(){return Z},sq:function(){return b},wP:function(){return y}});var t=n(6009),i=n(8519),a=n(9062),s=n(8312),l=n(2411),c=n(1408),o=n(2782),u=n(2145),d=n(2379),m=n(3992),h=n(6574),x=n(3793),f=n(8136),v=["productInstance","onSuccess","onError"],p=["item"],j=["data"],Z=function(e){var r=e.productInstance,n=e.onSuccess,t=e.onError,l=(0,s.Z)(e,v);return(0,f.jsx)(o.CD,(0,i.Z)((0,i.Z)({className:"btn-primary-3"},l),{},{multiple:!0,onSuccessMulti:function(e){var i=e.map((function(e){var r=e.data;return null===r||void 0===r?void 0:r.slug})).filter((function(e){var n;return!(null!==(n=r.images)&&void 0!==n&&n.includes(e))}));return r.update({images:[].concat((0,a.Z)(r.images),(0,a.Z)(i))}).then((function(e){return null===n||void 0===n?void 0:n(e)})).catch((function(e){return null===t||void 0===t?void 0:t(e)}))}}))},b=function(e){var r=e.instance,n=e.onSuccess,t=e.onError,i=e.label;return(0,f.jsxs)(d.pu,{renderHeader:function(){return(0,f.jsxs)("div",{children:["Supprimer '",r.name,"'"]})},renderFooter:function(e){var i=e.setOpen;return(0,f.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,f.jsx)(d.zx,{onClick:function(){return i(!1)},children:"Annuler"}),(0,f.jsx)(d.zx,{onClick:function(){return function(e){r.destroy().then((function(t){null===e||void 0===e||e(!1),null===n||void 0===n||n(t),m.u.destroy({slug:r.slug})})).catch((function(e){return null===t||void 0===t?void 0:t(e)}))}(i)},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,f.jsx)("div",{className:"p-3",children:"Are you sure you want to delete this"})},className:(0,u.UT)(["product-delete-button btn-danger-3",e.className]),children:[(0,f.jsx)(d.PJ.rF,{}),i&&(0,f.jsx)("span",{className:"label",children:i})]})},g=function(e){var r,n=e.item,a=(0,s.Z)(e,p),c=l.useState(!1),u=(0,t.Z)(c,2),m=u[0],v=u[1];if(null===n||void 0===n||!n.slug)return null;var j=a.params,Z=a.orderInstance,b=a.stages,g=void 0===b?[]:b,y=(0,x.Z)(n),N="".concat(y.slug,"/").concat("".concat(j)?"?".concat(j):""),_=y.supplier_item,S=y.stage,k=null===g||void 0===g?void 0:g.find((function(e){return e.value===S}));return(0,f.jsx)(d.vz,{border:!0,title:(0,f.jsxs)("div",{className:"d-flex align-itemscenter",onClick:function(){return v(!m)},children:[(0,f.jsx)("div",{style:{width:48},children:(0,f.jsx)(o.ZP.Img.Thumb,(0,i.Z)((0,i.Z)({src:"src"},y.cover_data),{},{className:"rounded"}))}),(0,f.jsxs)("div",{className:"ms-1 d-grid grid-md-3",children:[(0,f.jsxs)("div",{className:"span-md-2",children:[n.is_oos&&(0,f.jsx)("span",{className:"text-sm text-danger",children:"Out of stock"}),(0,f.jsxs)("div",{className:"text-ellipsis text-sm",children:[(0,f.jsx)("span",{className:"me-1 fw-bold",children:n.name_truncated}),(0,f.jsx)(h.TK,{show:n.is_published||!1})]}),(0,f.jsxs)("div",{className:"d-flex text-sm",children:[(0,f.jsx)(h._S,(0,i.Z)((0,i.Z)({},y.export()),{},{className:"d-flex flex-wrap"})),(0,f.jsx)("div",{className:"text-muted px-1",children:"|"}),(0,f.jsx)("div",{className:"text-muted",children:"".concat(_.cost," ").concat((null===Z||void 0===Z?void 0:Z.currency)||"USD")})]})]}),(0,f.jsxs)("div",{className:"text-sm",children:[(0,f.jsx)("div",{children:(0,f.jsxs)("span",{className:"",children:[(null===y||void 0===y||null===(r=y.category_data)||void 0===r?void 0:r.name)||"' - '",(0,f.jsx)("span",{className:"text-muted",children:" | ".concat(_.category)})]})}),(0,f.jsx)("span",{children:"Sizes: ".concat(y.size_count)}),k&&(0,f.jsx)("span",{className:"text-muted",children:" - ".concat(k.label)}),(0,f.jsx)("a",{className:"ms-1",href:_.url,target:"_blank",rel:"noopener noreferrer",children:"\u2197\ufe0f"})]})]})]}),actions:(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsx)(o.ZP.Link,{to:"./".concat(N),className:"btn btn-square btn-primary-3",children:(0,f.jsx)(d.PJ.ws,{})})}),className:"mb-1",children:m&&(0,f.jsx)("div",{className:""})})},y=function(e){var r,n=e.data,t=((0,s.Z)(e,j),(0,x.Z)(n));return(0,f.jsxs)("div",{className:"p-card-list-item p-1 mb-1",children:[(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("div",{className:"p-name text-ellipsis",children:t.name_truncated}),(0,f.jsx)("div",{className:"ms-1",children:(0,f.jsx)(h.TK,{show:t.is_published})})]}),(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(o.pB.Square,(0,i.Z)({},null===t||void 0===t?void 0:t.cover_data)),(0,f.jsxs)("div",{className:"p-info ps-1",children:[(0,f.jsx)(h._S,(0,i.Z)((0,i.Z)({},t.export()),{},{className:"d-flex flex-wrap"})),(0,f.jsx)("div",{className:"p-category",children:null===(r=t.category_data)||void 0===r?void 0:r.name})]})]})]})},N=function(e){var r=e.items,n=e.itempath,i=(0,c.lr)(),a=(0,t.Z)(i,1)[0];return(0,f.jsx)("div",{className:"p-card-list-items",children:r.map((function(e){var r="".concat(n).concat(e.slug,"/?").concat(a);return(0,f.jsx)(c.OL,{to:r,children:(0,f.jsx)(y,{data:e})},e.slug)}))})}},3085:function(e,r,n){n.d(r,{Eh:function(){return F},HG:function(){return E},Kl:function(){return T},iB:function(){return w},ir:function(){return A}});var t=n(6009),i=n(8519),a=n(8312),s=n(2411),l=n(5603),c=n(2145),o=n(3992),u=n(3793),d=n(1408),m=n(2379),h=n(7825),x=n(8136),f=["instance","categories","orderSlug"],v=["children"],p=["instance","fields","onSuccess","onError"],j=["label","text","error","categories"],Z=["label","text","error"],b=["label","text","error"],g=["label","text","error"],y=["label","text","error"],N=["label","text","error"],_=["label","text","error"],S=["label","text","error","required","stages"],k=["children"],P=["categories"],C=["categories"],q=["children"],w=function(e){var r=e.instance,n=e.categories,t=e.orderSlug,s=(0,a.Z)(e,f),c=(0,l.cI)({name:r.name||"",category:r.category||"",description:r.description||"",retail_price:(null===r||void 0===r?void 0:r.retail_price)||0,is_pre_sale:r.is_pre_sale||!1,is_pre_sale_text:r.is_pre_sale_text||""}),o=c.errors,u=e.fields,d=void 0===u?["name","category","description","retail_price","is_pre_sale","is_pre_sale_text"]:u;return(0,x.jsxs)(F,(0,i.Z)((0,i.Z)({},s),{},{context:c,instance:r,fields:d,children:[(0,x.jsx)(E.NameField,{error:o.name}),(0,x.jsx)(E.DescriptionField,{error:o.description}),(0,x.jsxs)("div",{className:"d-grid grid-md-3 gap-2",children:[n&&(0,x.jsx)(E.CategoryField,{categories:n,error:o.category}),(0,x.jsx)(E.RetailPriceField,{error:o.retail_price})]}),(0,x.jsx)(E.PresaleCheckboxField,{label:"En pr\xe9-vente",error:o.is_pre_sale}),c.values.is_pre_sale&&(0,x.jsx)(E.PresaleTextField,{label:"Pre-sale text",placeholder:"Explain ...",error:o.is_pre_sale_text}),(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,x.jsx)("div",{children:t&&(null===r||void 0===r?void 0:r.slug)&&(0,x.jsx)(m.zx,{onClick:function(){(0,h.SupplierOrder)({slug:t}).destroyItem(r.slug)},children:"Remove from order"})}),(0,x.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3 btn-md"})]})]}))};function F(e){var r=e.children,n=(0,a.Z)(e,v),t=n.instance,s=void 0===t?(0,c.q9)("StaffProduct instance"):t,l=n.fields,u=void 0===l?(0,c.q9)("fields instance"):l,d=n.onSuccess,m=n.onError,h=(0,a.Z)(n,p),f=h.context;return(0,x.jsx)(E,(0,i.Z)((0,i.Z)({},h),{},{onSubmit:function(e){var r;e.preventDefault(),null===n||void 0===n||null===(r=n.onWillSubmit)||void 0===r||r.call(n);var t={};return u.forEach((function(e){var r=f.values[e];null!=r&&("is_pre_sale_dt"!=e||r)&&(t[e]=r)})),s.update(t).then((function(e){var r=e.data;null===d||void 0===d||d(r),o.u.update(r)})).catch((function(e){return m?m(e):f.handleError(e)}))},children:r}))}var T=function(e){var r=(0,l.cI)({name:"",retail_price:"",description:""}),n=r.errors;return(0,x.jsxs)(E,{context:r,onSubmit:function(n){n.preventDefault(),(0,u.Z)().create(r.values).then((function(r){var n;return null===e||void 0===e||null===(n=e.onSuccess)||void 0===n?void 0:n.call(e,r)})).catch((function(e){return r.handleError(e)}))},children:[(0,x.jsx)(E.NameField,{label:"Nom du produit",error:n.name}),(0,x.jsx)(E.RetailPriceField,{required:!1,label:"Prix du produit",error:n.retail_price}),(0,x.jsx)(E.DescriptionField,{label:"Description du produit",error:n.description}),(0,x.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]})},E=function(e){return(0,x.jsx)(l.ZP,(0,i.Z)({},e))};E.NameField=function(e){return(0,x.jsx)(l.wd,(0,i.Z)({placeholder:"Entrez un titre clair et concis ..."},e))},E.DescriptionField=function(e){return(0,x.jsx)(l.F$,(0,i.Z)({placeholder:"D\xe9crivez les caract\xe9ristiques et les avantages ..."},e))},E.CategoryField=function(e){var r,n=e.label,t=e.text,c=e.error,o=e.categories,u=(0,a.Z)(e,j);return(0,x.jsx)(l.ZP.Field,{label:n,text:t,error:c,children:(0,x.jsx)(l.ZP.Select,(0,i.Z)((0,i.Z)({},u),{},{required:!0,name:"category",nullValue:{label:"S\xe9lectionnez une cat\xe9gorie ..."},children:null===o||void 0===o||null===(r=o.items)||void 0===r?void 0:r.map((function(e){return(0,s.createElement)(l.ZP.Option,(0,i.Z)((0,i.Z)({},e),{},{key:e.value}))}))}))})},E.SalePriceField=function(e){var r=e.label,n=e.text,t=e.error,s=(0,a.Z)(e,Z);return(0,x.jsx)(l.ZP.Field,{label:r,text:n,error:t,children:(0,x.jsx)(l.ZP.Text,(0,i.Z)((0,i.Z)({"aria-describedby":"sale_price_label",min:"0",step:"0.01",required:!0,placeholder:"Prix r\xe9duit"},s),{},{type:"number",name:"sale_price"}))})},E.OnSaleCheckboxField=function(e){var r=e.label,n=e.text,t=e.error,s=(0,a.Z)(e,b);return(0,x.jsx)(l.ZP.Field,{label:r,text:n,error:t,checkbox:!0,children:(0,x.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},s),{},{name:"is_on_sale"}))})},E.PresaleCheckboxField=function(e){var r=e.label,n=e.text,t=e.error,s=(0,a.Z)(e,g);return(0,x.jsx)(l.ZP.Field,{label:r,text:n,error:t,checkbox:!0,children:(0,x.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},s),{},{name:"is_pre_sale"}))})},E.OosCheckboxField=function(e){var r=e.label,n=void 0===r?"En rupture de stock":r,t=e.text,s=e.error,c=(0,a.Z)(e,y);return(0,x.jsx)(l.ZP.Field,{label:n,text:t,error:s,checkbox:!0,children:(0,x.jsx)(l.ZP.Checkbox,(0,i.Z)((0,i.Z)({},c),{},{name:"is_oos"}))})},E.PresaleTextField=function(e){var r=e.label,n=e.text,t=e.error,s=(0,a.Z)(e,N);return(0,x.jsx)(l.ZP.Field,{label:r,text:n,error:t,children:(0,x.jsx)(l.ZP.TextAreaX,(0,i.Z)((0,i.Z)({placeholder:""},s),{},{name:"is_pre_sale_text","aria-describedby":"is_pre_sale_text_label"}))})},E.RetailPriceField=function(e){var r=e.label,n=e.text,t=e.error,s=(0,a.Z)(e,_);return(0,x.jsx)(l.ZP.Field,{label:r,text:n,error:t,children:(0,x.jsx)(l.ZP.Text,(0,i.Z)((0,i.Z)({required:!0,placeholder:"Prix","aria-describedby":"retail_price_label",min:"0",step:"0.01"},s),{},{type:"number",name:"retail_price"}))})},E.StageSelectField=function(e){var r,n=e.label,t=e.text,c=e.error,o=e.required,u=void 0===o||o,d=e.stages,m=(0,a.Z)(e,S);return(0,x.jsx)(l.ZP.Field,{label:n,text:t,error:c,children:(0,x.jsx)(l.ZP.Select,(0,i.Z)((0,i.Z)({required:u,name:"stage",nullValue:{label:"Select stage"}},m),{},{children:null===d||void 0===d||null===(r=d.map)||void 0===r?void 0:r.call(d,(function(e){return(0,s.createElement)(l.ZP.Option,(0,i.Z)((0,i.Z)({},e),{},{key:e.value}))}))}))})};var A=function e(r){var n=r.children,c=(0,a.Z)(r,k),o=(0,d.lr)(),u=(0,t.Z)(o,2),m=u[0],h=u[1],f=s.useState(m.get("q")||""),v=(0,t.Z)(f,2),p=v[0],j=v[1],Z=c.categories,b=(0,a.Z)(c,P);return(0,x.jsx)("form",(0,i.Z)((0,i.Z)({},b),{},{action:".",method:"GET",onSubmit:function(e){e.preventDefault(),p?m.set("q",p):m.delete("q"),m.delete("page"),h(m)},children:n||(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"mb-2 d-flex",children:[(0,x.jsx)("input",{type:"text",name:"q",value:p,onChange:function(e){var r=e.target.value;j(r),!r&&m.get("q")&&m.delete("q")},className:"miq-form-input flex-1",placeholder:"Cherchez un produit par nom, categorie ou numero de serie ..."}),(0,x.jsx)(l.ZP.Submit,{value:"Search",className:"btn-primary-3 ms-1"})]}),Z&&(0,x.jsx)(e.Category,{params:m,setParams:h,categories:Z}),(0,x.jsx)(e.Published,{params:m,setParams:h,className:"mb-1"}),(0,x.jsx)(e.Sale,{params:m,setParams:h,className:"mb-1"}),(0,x.jsx)(e.PreSale,{params:m,setParams:h,className:"mb-1"})]})}))};A.Category=function(e){var r=e.categories,n=(0,a.Z)(e,C);return(0,x.jsx)(D,(0,i.Z)((0,i.Z)({emptyLabel:"Categorie ..."},n),{},{name:"cat",children:r.items.map((function(e){return(0,x.jsx)("option",{value:e.value,children:e.label},e.slug)}))}))},A.Published=function(e){return(0,x.jsxs)(D,(0,i.Z)((0,i.Z)({emptyLabel:"Tous les produits ..."},e),{},{name:"published",children:[(0,x.jsx)("option",{value:"include",children:"Produits publi\xe9s"}),(0,x.jsx)("option",{value:"exclude",children:"Produits non publi\xe9s"})]}))};var D=function(e){var r=e.children,n=(0,a.Z)(e,q),t=n.name,i=n.params,s=n.setParams,l=n.emptyLabel;return(0,x.jsxs)("select",{className:(0,c.UT)(["miq-select",n.className]),name:t,value:i.get(t)||"",onChange:function(e){var r=e.target.value;r?i.set(t,r):i.delete(t),i.delete("page"),s(i)},children:[l&&(0,x.jsx)("option",{value:"",children:l}),r]})};A.PreSale=function(e){return(0,x.jsx)(O,(0,i.Z)((0,i.Z)({},e),{},{name:"presale",label:"En pr\xe9-vente"}))},A.Sale=function(e){return(0,x.jsx)(O,(0,i.Z)((0,i.Z)({},e),{},{name:"sale",label:"En promo"}))};var O=function(e){var r=e.label,n=e.name,t=e.params,i=e.setParams,a=e.inputId;return(0,x.jsxs)("div",{className:(0,c.UT)(["miq-query-filter-toggle d-flex align-items-center",e.className]),children:[(0,x.jsx)("input",{type:"checkbox",className:"miq-checkbox me-1",id:a,onChange:function(e){var r=e.target.checked;r?t.set(n,"".concat(r)):t.delete(n),t.delete("page"),i(t)},checked:Boolean(t.get(n))||!1}),(0,x.jsx)("label",{htmlFor:a,children:r})]})}},9953:function(e,r,n){n.d(r,{Z:function(){return t.Z},_:function(){return i._}});var t=n(3793),i=n(5566)},3793:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(8519),i=n(1135),a=n(7411),s=n(2518),l=n(2485),c=n(2782),o=function(e){(0,s.Z)(n,e);var r=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),r.apply(this,arguments)}return(0,a.Z)(n,[{key:"publish",value:function(){return this.patch("".concat(this._path,"publish/"),{is_published:!0})}},{key:"unpublish",value:function(){return this.patch("".concat(this._path,"publish/"),{is_published:!1})}},{key:"postSize",value:function(e){return this.post("".concat(this._path,"size/new/"),e)}},{key:"patchSize",value:function(e,r){return this.patch("".concat(this._path,"size/").concat(e,"/"),r)}},{key:"deleteSize",value:function(e){return this.delete("".concat(this._path,"size/").concat(e,"/"))}},{key:"postAttribute",value:function(e){return this.post("".concat(this._path,"attribute/new/"),e)}},{key:"patchAttribute",value:function(e,r){return this.patch("".concat(this._path,"attribute/").concat(e,"/"),r)}},{key:"deleteAttribute",value:function(e){return this.delete("".concat(this._path,"attribute/").concat(e,"/"))}},{key:"swapCover",value:function(e){return this.patch("".concat(this._path,"swap-cover/"),{slug:e})}}]),n}(c.x5),u=function(e){var r=e.dt_published;return r&&(r=new Date(r)),(0,c.eR)((0,t.Z)((0,t.Z)({},e),{},{dt_published:r}),"products",o)}},5566:function(e,r,n){n.d(r,{_:function(){return l}});var t=n(6009),i=n(1408),a=n(2134),s=n(3793),l=function(e){var r=(0,i.lr)(),n=(0,t.Z)(r,1)[0],l=n.get("q"),c=n.get("cat"),o=n.get("page"),u=n.get("published"),d=n.get("presale"),m=n.get("sale"),h={page:o,cat:c,published:u,presale:d,sale:m,q:l};return e&&(h.supplier_order_slug=e),(0,a.QT)((function(){return(0,s.Z)({}).list({params:h})}),{refreshDeps:[l,o,c,u,d,m,e]})}},4627:function(e,r,n){n.r(r),n.d(r,{OrderSettingUpdateView:function(){return V},default:function(){return I}});var t=n(8519),i=n(6009),a=n(8312),s=n(2411),l=n(5603),c=n(2134),o=n(2782),u=n(2145),d=n(6520),m=n(3432),h=n(2379),x=n(3085),f=n(8136),v=["instance","fields"],p=["onSuccess","onError"],j=["label","text","error"],Z=["label","text","error"],b=["label","text","error"],g=["label","text","error"],y=["label","text","error","currencies"],N=["label","text","error","suppliers"],_=["children"],S=function(e){var r=e.instance,n=e.fields,i=(0,a.Z)(e,v),s=i.onSuccess,l=i.onError,c=(0,a.Z)(i,p),o=c.context;return(0,f.jsx)(k,(0,t.Z)((0,t.Z)({},c),{},{onSubmit:function(e){e.preventDefault();var t={};return n.forEach((function(e){var r=o.values[e];null!=r&&(t[e]=r)})),r.update(t).then((function(e){return null===s||void 0===s?void 0:s(e)})).catch((function(e){var r;return l?l(e):null===o||void 0===o||null===(r=o.handleError)||void 0===r?void 0:r.call(o,e)}))}}))},k=function(e){return(0,f.jsx)(l.ZP,(0,t.Z)({},e))};k.NameField=function(e){var r=e.label,n=void 0===r?"Name":r,i=e.text,s=void 0===i?"Write a name to help remember your order.":i,c=e.error,o=(0,a.Z)(e,j);return(0,f.jsx)(l.ZP.Field,{label:n,text:s,error:c,children:(0,f.jsx)(l.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Nom",maxLength:99},o),{},{name:"name"}))})},k.OrderIDField=function(e){var r=e.label,n=void 0===r?"Order ID":r,i=e.text,s=e.error,c=(0,a.Z)(e,Z);return(0,f.jsx)(l.ZP.Field,{label:n,text:i,error:s,children:(0,f.jsx)(l.ZP.Text,(0,t.Z)((0,t.Z)({placeholder:"Order ID",maxLength:99},c),{},{name:"order_id"}))})},k.IsPaidField=function(e){var r=e.label,n=void 0===r?"Pay\xe9":r,i=e.text,s=e.error,c=(0,a.Z)(e,b);return(0,f.jsx)(l.ZP.Field,{label:n,text:i,error:s,checkbox:!0,children:(0,f.jsx)(l.ZP.Checkbox,(0,t.Z)((0,t.Z)({},c),{},{name:"is_paid"}))})},k.TotalCostField=function(e){var r=e.label,n=void 0===r?"Co\xfbt total":r,i=e.text,s=e.error,c=(0,a.Z)(e,g);return(0,f.jsx)(l.ZP.Field,{label:n,text:i,error:s,children:(0,f.jsx)(l.ZP.Text,(0,t.Z)((0,t.Z)({min:"0",step:"0.01"},c),{},{required:!0,type:"number",name:"total_cost"}))})},k.CurrencyField=function(e){var r=e.label,n=e.text,i=void 0===n?"Select the supplier currency.":n,c=e.error,o=e.currencies,u=(0,a.Z)(e,y);return(0,f.jsx)(l.ZP.Field,{label:r,text:i,error:c,children:(0,f.jsx)(l.ZP.Select,(0,t.Z)((0,t.Z)({},u),{},{required:!0,name:"currency",nullValue:{label:"S\xe9lectionnez une monnaie ..."},children:null===o||void 0===o?void 0:o.map((function(e){return(0,s.createElement)(l.ZP.Option,(0,t.Z)((0,t.Z)({},e),{},{key:e.value}))}))}))})},k.SupplierField=function(e){var r=e.label,n=e.text,i=void 0===n?"Select the supplier.":n,c=e.error,o=e.suppliers,u=(0,a.Z)(e,N);return(0,f.jsx)(l.ZP.Field,{label:r,text:i,error:c,children:(0,f.jsx)(l.ZP.Select,(0,t.Z)((0,t.Z)({},u),{},{required:!0,name:"supplier",nullValue:{label:"S\xe9lectionnez le supplier ..."},children:null===o||void 0===o?void 0:o.map((function(e){return(0,s.createElement)(l.ZP.Option,(0,t.Z)((0,t.Z)({},e),{},{key:e.value}))}))}))})},k.StageSelectField=function(e){return(0,f.jsx)(x.HG.StageSelectField,(0,t.Z)({required:!1},e))};var P=function(e){e.children;var r,n=(0,a.Z)(e,_),c=n.orderInstance,o=n.onSuccess,u=n.onError,d=null===c||void 0===c||null===(r=c.supplier)||void 0===r?void 0:r.toLowerCase(),m=(0,l.cI)({supplier_name:d,url:""}),h=s.useState(!1),x=(0,i.Z)(h,2),v=x[0],p=x[1];return(0,f.jsxs)(l.ZP,{context:m,onSubmit:function(e){e.preventDefault();var r=m.values.url,n=function(e){return p(!1),m.setValue("url",""),null===o||void 0===o?void 0:o(e)},i=function(e){return m.setErrors((0,t.Z)((0,t.Z)({},m.errors),{},{url:"Something went wrong."})),p(!1),null===u||void 0===u?void 0:u(e)},a="Invalid Url: does not match supplier ".concat(c.supplier);switch(d){case"fnova":return r.includes("fashionnova")?(p(!0),c.postFnova(r).then(n).catch(i)):m.setErrors({url:a});case"plt":return r.includes("prettylittlething")?(p(!0),c.postPlt(r).then(n).catch(i)):m.setErrors({url:a});default:return r.includes(d)?(p(!0),c.postShein(r).then(n).catch(i)):m.setErrors({url:a})}},className:"supplier-product-add-form",children:[(0,f.jsx)(l.ZP.Field,{error:m.errors.url,children:(0,f.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center",children:[(0,f.jsx)(l.ZP.Text,{required:!0,autoFocus:!0,name:"url",type:"url",placeholder:"Add ".concat(d," product source url ..."),className:"me-1",disabled:v}),(0,f.jsx)("div",{className:"mt-1 mt-md-0",children:(0,f.jsx)(l.ZP.Submit,{value:"Add product",className:"btn btn-primary-3",disabled:v})})]})}),v&&(0,f.jsx)("div",{className:"my-3",children:"Getting product data. Please wait ..."})]})},C=n(9062),q=n(9953),w=n(421);function F(e){var r,n=e.orderInstance,a=e.refreshOrder,c=e.categories,u=e.stages,m=(0,d.UO)().ordSlug,v=(0,q._)(m),p=v.res,j=void 0===p?{data:{results:[]}}:p,Z=v.refresh,b=s.useState([]),g=(0,i.Z)(b,2),y=g[0],N=g[1],_=(0,l.cI)({category:""}),S=0!==y.length;return(0,f.jsx)(o.ZP.Section,{actions:S&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("span",{className:"p-1",onClick:function(){return N([])},style:{cursor:"pointer"},children:"[x]"})}),footer:(0,f.jsx)(h.tl,(0,t.Z)((0,t.Z)({},j.data),{},{component:o.ZP.NavLink,to:!0})),className:"supplier-p-list",children:null!==(r=j.data)&&void 0!==r&&r.results.length?(0,f.jsxs)(f.Fragment,{children:[S&&(0,f.jsxs)("div",{className:"bg-white p-1",style:{position:"sticky",top:0,zIndex:1e3},children:[(0,f.jsx)(l.ZP,{context:_,children:(0,f.jsx)("div",{className:"d-flex",children:c&&(0,f.jsx)(x.HG.CategoryField,{categories:c,error:_.errors.category})})}),(0,f.jsx)(h.zx,{className:"btn-primary",onClick:function(){var e=_.values.category;e&&n.updateCategories(e,y).then((function(e){Z(),_.setValue("category","")})).catch((function(e){}))},children:"Publier"})]}),j.data.results.map((function(e){return(0,s.createElement)(E,{orderInstance:n,categories:c,selected:y,setSelected:N,refreshOrder:a,stages:u,instance:(0,q.Z)(e),key:e.slug})}))]}):null})}var T=function(e){var r=e.instance,n=e.selected,t=e.setSelected;return(0,f.jsx)("input",{type:"checkbox",name:"selected",className:"me-2",checked:n.includes(r.slug),onChange:function(e){var i=e.target.checked;t(i?[].concat((0,C.Z)(n),[r.slug]):function(e){return e.filter((function(e){return e!==r.slug}))})}})},E=function(e){var r,n=s.useState(!1),a=(0,i.Z)(n,2),l=a[0],c=a[1],u=e.instance,d=e.categories,m=s.useState(!1),v=(0,i.Z)(m,2),p=v[0],j=v[1];if(l)return null;var Z=u.supplier_item,b=u.stage,g=e.orderInstance,y=e.stages,N=void 0===y?[]:y,_=null===N||void 0===N?void 0:N.find((function(e){return e.value===b}));return(0,f.jsx)(h.vz,{border:!0,title:(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)(T,(0,t.Z)({},e)),(0,f.jsx)("div",{style:{width:48,height:48},onClick:function(){return j(!p)},children:(0,f.jsx)(o.ZP.Img.Square,(0,t.Z)((0,t.Z)({slug:"slug",src:"src"},u.cover_data),{},{className:"rounded"}))}),(0,f.jsxs)("div",{className:"ms-1",children:[(0,f.jsx)("div",{className:"text-ellipsis",children:u.name}),(0,f.jsxs)("div",{className:"text-sm",children:[u.is_on_sale&&u.sale_price&&(0,f.jsxs)("span",{className:"",children:[u.sale_price," ","<-"," "]}),(0,f.jsx)("span",{className:"",children:u.retail_price}),(0,f.jsxs)("span",{className:"text-muted",children:[" | ",Z.cost," ",g.currency]}),(0,f.jsxs)("span",{className:"",children:[" - ",(null===(r=u.category_data)||void 0===r?void 0:r.name)||"' - '",(0,f.jsxs)("span",{className:"text-muted",children:[" | ",Z.category]})]}),_&&(0,f.jsxs)("span",{className:"text-muted",children:[" - ",_.label]}),(0,f.jsx)("a",{className:"btn ms-1",href:"",target:"_blank",rel:"noopener noreferrer",children:"\u2197\ufe0f"})]})]})]}),actions:(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(w.sq,{instance:u,onSuccess:function(){var r;c(!0),null===e||void 0===e||null===(r=e.refreshOrder)||void 0===r||r.call(e)},className:"me-2"}),(0,f.jsx)(o.ZP.Link,{to:"./".concat(u.slug,"/"),className:"btn btn-primary-3",children:(0,f.jsx)(h.PJ.ws,{})})]}),className:"suppier-p-list-item bg-white",children:p&&(0,f.jsxs)(h.j6,{className:"form-tab no-scroll-bar gap-2",children:[(0,f.jsx)(x.iB,{instance:u,categories:d,orderSlug:null===g||void 0===g?void 0:g.slug}),(0,f.jsxs)("div",{className:"",children:[(0,f.jsx)("div",{className:"mb-1",children:"".concat(Z.item_id?(0,f.jsxs)("span",{className:"",children:["Item ID: ",Z.item_id]}):"")}),(0,f.jsxs)("ul",{children:[Z.category&&(0,f.jsxs)("li",{className:"mb-1",children:[(0,f.jsx)("div",{className:"text-sm",children:"Supplier Category"}),(0,f.jsx)("div",{className:"text-muted",children:Z.category})]}),(0,f.jsxs)("li",{className:"mb-1",children:[(0,f.jsxs)("div",{className:"text-sm",children:["FOB Cost(",g.currency,")"]}),(0,f.jsx)("div",{className:"text-muted",children:Z.cost})]}),Z.url&&(0,f.jsx)("li",{className:"",children:(0,f.jsx)("a",{href:Z.url,target:"_blank",className:"text-underline",rel:"noopener noreferrer",children:"View supplier product page"})})]})]})]})})},A=n(9002),D=["category__name"],O=["children","tab","active"],z={name:"",order_id:"",stage:"",currency:"USD",supplier:"",is_paid:!1,total_cost:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return Object.keys(z).forEach((function(n){r[n]=e["".concat(n)]||z["".concat(n)]})),r};function I(){var e,r,n,t=(0,d.UO)().ordSlug,i=(0,l.cI)(U()),a=s.useContext(A.h2),x=a.suppliers,v=a.currencies,p=i.setValues,j=(0,c.QT)((function(){return(0,m.e)({slug:t}).retrieve()}),{refreshDeps:[t],onSuccess:function(e){return p(U(e.data))}}),Z=j.res,b=j.loading,g=j.setLoading,y=j.setRes,N=j.refresh,_=new u.HM(Z);if(!_.isSuccess)return null;var P=(0,m.e)(_.data);return P.supplier&&P.currency?(0,f.jsx)(o.ZP.View,{title:i.values.name,back:"/staff/store/orders/",actions:(0,f.jsx)(o.ZP.NavLink,{to:"settings/",children:(0,f.jsx)(h.PJ.XV,{})}),children:(0,f.jsxs)("div",{className:"d-flex flex-column flex-xl-row",children:[(0,f.jsx)("div",{className:"w-100",children:(0,f.jsx)(o.ZP.Section,{header:(0,f.jsx)(W,{instance:P,setLoading:g,setOrder:y,categories:null===_||void 0===_||null===(e=_.data)||void 0===e?void 0:e.categories}),children:b?(0,f.jsx)(h.gb,{icon:!0}):(0,f.jsx)(F,{orderInstance:P,categories:null===_||void 0===_||null===(r=_.data)||void 0===r?void 0:r.categories,stages:null===_||void 0===_||null===(n=_.data)||void 0===n?void 0:n.stages,refreshOrder:N})})}),(0,f.jsx)("div",{className:"min-w-35 ps-md-1",children:(0,f.jsx)(L,{loading:b,instance:P})})]})}):(0,f.jsx)(o.ZP.View,{title:"Modifier une commande",back:"/staff/store/orders/",children:(0,f.jsx)(o.ZP.Section,{className:"d-flex justify-content-center mt-4",children:(0,f.jsxs)(S,{context:i,instance:P,fields:["name","currency","supplier"],onSuccess:function(e){return y(e)},children:[(0,f.jsx)(k.NameField,{required:!0,label:"Nom",error:i.errors.currency}),(0,f.jsx)(k.SupplierField,{required:!0,label:"Supplier",suppliers:x,error:i.errors.supplier}),(0,f.jsx)(k.CurrencyField,{required:!0,label:"Supplier Currency",currencies:v,error:i.errors.currency}),(0,f.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]})})})}var L=function e(r){var n,t,i,s,l,c=r.loading,u=r.instance;return(0,f.jsxs)(o.ZP.Section,{border:!0,className:"bg-white mb-1",title:"Order Details".concat(!c&&" (".concat(null===(n=u.products)||void 0===n?void 0:n.length,")")),text:"Supplier: ".concat(u.supplier," | Currency: ").concat(u.currency),children:[(0,f.jsxs)("div",{className:"mb-2",children:["Categories",(0,f.jsx)("ul",{children:null===u||void 0===u||null===(t=u.by_categories)||void 0===t||null===(i=t.filter((function(e){return null===e||void 0===e?void 0:e.category__name})))||void 0===i?void 0:i.map((function(r){var n=r.category__name,t=(0,a.Z)(r,D);return(0,f.jsxs)(e.Li,{title:n,children:[": ",t.count]},n)}))})]}),(0,f.jsxs)("ul",{className:"mb-3",children:[(0,f.jsxs)(e.Li,{title:"Average cost: ",children:[u.avg_cost," ",u.currency]}),(0,f.jsx)(e.Li,{title:"Total cost: ",children:"".concat(u.total_cost||(null===u||void 0===u||null===(s=u.items_cost)||void 0===s?void 0:s.amountWithSymbol)," ").concat(u.currency)}),(0,f.jsx)(e.Li,{title:"Est. revenue: ",children:null===u||void 0===u||null===(l=u.items_revenue)||void 0===l?void 0:l.amount})]})]})};L.Li=function(e){var r=e.children,n=e.title;return(0,f.jsxs)("li",{children:[(0,f.jsx)("span",{className:"mr-2 text-muted",children:n}),r]})};var W=function(e){var r=e.instance,n=e.setLoading,t=e.setOrder,a=e.categories,l=s.useState("filter"),c=(0,i.Z)(l,2),u=c[0],d=c[1];return(0,f.jsx)(o.ZP.Section,{border:!0,title:(0,f.jsx)("div",{children:(0,f.jsx)(R,{tab:u,onClick:function(){return d("filter")},active:"filter"===u,children:(0,f.jsx)(h.PJ.oe,{})})}),actions:(0,f.jsx)(R,{tab:u,onClick:function(){return d("add")},active:"add"===u,children:(0,f.jsx)(h.PJ.v3,{})}),className:"bg-white mb-1",children:(0,f.jsx)("div",{className:"",style:{top:0,position:"sticky"},children:"add"===u?(0,f.jsx)(P,{orderInstance:r,onSuccess:function(e){n(),t(e)}}):(0,f.jsx)(x.ir,{categories:a})})})},R=function(e){var r=e.children,n=(e.tab,e.active),i=(0,a.Z)(e,O);return(0,f.jsx)(o.ZP.Button,(0,t.Z)((0,t.Z)({className:"btn-primary-3",style:{border:n?"1px solid var(--blue-600)":void 0}},i),{},{children:r}))},V=function(){var e=(0,d.UO)().ordSlug,r=(0,l.cI)(U()),n=r.setValues,t=(0,c.QT)((function(){return(0,m.e)({slug:e}).retrieve()}),{refreshDeps:[e],onSuccess:function(e){return n(U(e.data))}}),i=t.res,a=new u.HM(i);if(!a.isSuccess)return null;var s=(0,m.e)(a.data);return(0,f.jsx)(o.ZP.View,{title:"".concat(s.name," Order Update"),back:"/staff/store/orders/".concat(e,"/"),children:(0,f.jsx)(S,{instance:s,context:r,fields:["is_paid","order_id","total_cost","stage"],children:(0,f.jsxs)(h.vz,{border:!0,footer:(0,f.jsx)(l.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"}),children:[(0,f.jsx)(k.IsPaidField,{error:r.errors.is_paid,className:"my-2"}),r.values.is_paid&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(k.OrderIDField,{required:r.values.is_paid,error:r.errors.order_id}),(0,f.jsx)(k.TotalCostField,{required:r.values.is_paid,error:r.errors.total_cost})]}),(0,f.jsx)(k.StageSelectField,{stages:a.data.stages})]})})})}},7825:function(e,r,n){n.r(r),n.d(r,{SupplierOrder:function(){return d.e},default:function(){return x}});var t=n(8519),i=n(6009),a=(n(2411),n(1408)),s=n(6520),l=n(2782),c=n(2134),o=n(2145),u=n(2379),d=n(3432),m=n(8136),h=function(e){var r=e.instance,n=e.onSuccess,t=e.onError,i=e.label;return(0,m.jsxs)(u.pu,{renderHeader:function(){return(0,m.jsxs)("div",{children:["Supprimer '",r.name,"'"]})},renderFooter:function(e){var i=e.setOpen;return(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,m.jsx)(u.zx,{onClick:function(){return i(!1)},children:"Annuler"}),(0,m.jsx)(u.zx,{onClick:function(){return function(e){r.destroy().then((function(r){null===e||void 0===e||e(!1),null===n||void 0===n||n(r)})).catch((function(e){return null===t||void 0===t?void 0:t(e)}))}(i)},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,m.jsx)("div",{className:"p-3",children:"Are you sure you want to delete this"})},className:(0,o.UT)(["s-order-delete-button btn-danger-3",e.className]),children:[(0,m.jsx)(u.PJ.rF,{}),i&&(0,m.jsx)("span",{className:"label",children:i})]})};function x(){var e=(0,s.s0)(),r=(0,a.lr)(),n=(0,i.Z)(r,1)[0].get("page"),x=(0,c.QT)((function(){return(0,d.e)().list({params:{page:n}})}),{refreshDeps:[n]}),v=x.res,p=x.removeItem,j=new o.HM(v);return j.isSuccess?(0,m.jsx)(l.ZP.View,{title:"Supplier Orders",back:"/staff/store/",actions:(0,m.jsx)(l.ZP.Button,{onClick:function(){(0,d.e)().create({}).then((function(r){var n=r.data;return e("".concat(n.slug,"/"))})).catch((function(e){}))},className:"btn-primary-3",requiredPerms:["store.add_supplierorder"],title:"Add a new order",children:"Add order"}),requiredPerms:["store.view_supplierorder"],children:(0,m.jsx)(l.ZP.Section,{footer:(0,m.jsx)(u.tl,(0,t.Z)((0,t.Z)({},j.data),{},{component:l.ZP.Link,to:!0})),children:(0,m.jsx)(u.iA,{border:!0,items:j.items,header:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.iA.Th,{}),(0,m.jsx)(u.iA.Th,{children:"Items"}),(0,m.jsx)(u.iA.Th,{children:"Supplier"}),(0,m.jsx)(u.iA.Th,{children:"Total Cost"}),(0,m.jsx)(u.iA.Th,{children:"Est. Revenue"}),(0,m.jsx)(u.iA.Th,{})]}),renderItem:function(e){var r=e.name,n=void 0===r?"New order":r,i=e.slug,a=e.is_paid,s=e.items,c=e.items_revenue,x=e.supplier;return(0,m.jsxs)(u.iA.Tr,{children:[(0,m.jsxs)(u.iA.Td,{children:[(0,m.jsx)(l.ZP.Link,{to:"".concat(i,"/"),className:"",children:(0,m.jsx)("div",{className:(0,o.UT)(["fw-bold text-ellipsis",a&&"text-line-through"]),children:n})}),(0,m.jsx)("span",{className:"text-sm",children:e.avg_cost})]}),(0,m.jsx)(u.iA.Td,{children:null===s||void 0===s?void 0:s.length}),(0,m.jsx)(u.iA.Td,{children:x}),(0,m.jsx)(u.iA.Td,{children:(0,m.jsx)(f,(0,t.Z)({},e.total_cost_data))}),(0,m.jsx)(u.iA.Td,{children:(0,m.jsx)(f,(0,t.Z)({},c))}),(0,m.jsx)(u.iA.Td,{children:(0,m.jsx)(h,{instance:(0,d.e)(e),onSuccess:function(){return null===p||void 0===p?void 0:p({slug:i})}})})]},i)},className:"w-100"})})}):null}var f=function(e){var r=e.amountWithSymbol;return(0,m.jsx)("div",{className:"miq-price",children:r})}},3432:function(e,r,n){n.d(r,{e:function(){return d}});var t=n(8519),i=n(1135),a=n(7411),s=n(2518),l=n(2485),c=n(2782),o=1e4,u=function(e){(0,s.Z)(n,e);var r=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),r.apply(this,arguments)}return(0,a.Z)(n,[{key:"updateCategories",value:function(e,r){return this.post("".concat(this._path,"batch/"),{slugs:r,category:e},{timeout:o})}},{key:"postFnova",value:function(e){return this.post("".concat(this._path,"fnova/"),{url:e},{timeout:o})}},{key:"postPlt",value:function(e){return this.post("".concat(this._path,"plt/"),{url:e},{timeout:o})}},{key:"postShein",value:function(e){return this.post("".concat(this._path,"shein/"),{url:e},{timeout:o})}},{key:"destroyItem",value:function(e){return this.delete("".concat(this._path,"item/").concat(e,"/"),{timeout:o})}},{key:"updateItem",value:function(e,r){return this.post("".concat(this._path,"item/").concat(e,"/"),(0,t.Z)({},r),{timeout:o})}}]),n}(c.x5),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.eR)(e,"supplierorders",u)}},6574:function(e,r,n){n.d(r,{_S:function(){return f},H5:function(){return m},TK:function(){return v},Ko:function(){return h}});var t=n(8519),i=n(8312),a=(n(2411),n(2379)),s=n(2145),l=n(8136),c=["instance","onClick","onSuccess","onError"],o=["instance","onClick","onSuccess","onError"],u=["retail_price_data","is_on_sale","sale_price_data"],d=["show"],m=function(e){var r=e.instance,n=(e.onClick,e.onSuccess),s=e.onError,o=(0,i.Z)(e,c);return(0,l.jsx)(a.zx,(0,t.Z)((0,t.Z)({onClick:function(){return r.is_published?null:r.publish().then((function(e){return null===n||void 0===n?void 0:n(e)})).catch((function(e){return null===s||void 0===s?void 0:s(e)}))},className:"btn-primary btn-md"},o),{},{disabled:r.is_published}))},h=function(e){var r=e.instance,n=(e.onClick,e.onSuccess),s=e.onError,c=(0,i.Z)(e,o);return(0,l.jsx)(a.zx,(0,t.Z)((0,t.Z)({className:"btn-danger btn-md",onClick:function(){return r.is_published?r.unpublish().then((function(e){return null===n||void 0===n?void 0:n(e)})).catch((function(e){return null===s||void 0===s?void 0:s(e)})):null}},c),{},{disabled:!r.is_published}))},x=function(e){var r=e.amountWithSymbol,n=e.className,t=e.sale,i=e.lineThrough;return(0,l.jsx)("div",{className:(0,s.UT)(["miq-price-display",t&&"text-danger",i&&"text-line-through",n]),children:r})},f=function(e){var r=e.retail_price_data,n=e.is_on_sale,a=e.sale_price_data,c=(0,i.Z)(e,u);if(!r)return null;var o=n&&null!=(null===a||void 0===a?void 0:a.amountWithSymbol);return(0,l.jsxs)("div",{className:(0,s.UT)(["miq-product-price-display",c.className]),style:c.style,children:[o&&(0,l.jsx)(x,(0,t.Z)((0,t.Z)({sale:!0},a),{},{className:"miq-sale-price me-1"})),(0,l.jsx)(x,(0,t.Z)((0,t.Z)({},r),{},{lineThrough:o,className:"miq-retail-price"}))]})},v=function(e){var r=e.show,n=(0,i.Z)(e,d);return r?(0,l.jsx)(a.PJ.fU,(0,t.Z)((0,t.Z)({},n),{},{className:"published-icon"})):null};new a.SD},3992:function(e,r,n){n.d(r,{U:function(){return h},u:function(){return m}});var t=n(8312),i=n(1135),a=n(7411),s=n(2518),l=n(2485),c=n(2411),o=n(2578),u=["prefix"],d=function(e){(0,s.Z)(n,e);var r=(0,l.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];var c=s.prefix,o=void 0===c?"":c,d=(0,t.Z)(s,u);return(e=r.call(this,d)).prefix=void 0,e.prefix=o,e}return(0,a.Z)(n,[{key:"create",value:function(e){this.emit("".concat(this.prefix,"-create"),e)}},{key:"retrieve",value:function(e){this.emit("".concat(this.prefix,"-retrieve"),e)}},{key:"list",value:function(e){this.emit("".concat(this.prefix,"-list"),e)}},{key:"update",value:function(e){this.emit("".concat(this.prefix,"-update"),e)}},{key:"destroy",value:function(e){this.emit("".concat(this.prefix,"-destroy"),e)}}]),n}(n.n(o)()),m=new d;function h(e,r){c.useEffect((function(){m.on("-create",(function(n){var t;r&&!r(n)||null===(t=e.onCreate)||void 0===t||t.call(e,n)})),m.on("-update",(function(n){var t;r&&!r(n)||null===(t=e.onUpdate)||void 0===t||t.call(e,n)})),m.on("-destroy",(function(n){var t;r&&!r(n)||null===(t=e.onDestroy)||void 0===t||t.call(e,n)}))}),[])}}}]);
//# sourceMappingURL=703.2b4023e1.chunk.js.map