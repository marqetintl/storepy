"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[601],{421:function(e,r,t){t.d(r,{K1:function(){return j},n9:function(){return f},sq:function(){return Z},wP:function(){return b}});var n=t(6009),i=t(8519),l=t(9062),s=t(8312),a=t(1408),c=t(3576),o=t(2145),u=t(2379),d=t(3992),p=t(6574),h=t(3793),x=t(8136),m=["productInstance","onSuccess","onError"],v=["data"],f=function(e){var r=e.productInstance,t=e.onSuccess,n=e.onError,a=(0,s.Z)(e,m);return(0,x.jsx)(c.CD,(0,i.Z)((0,i.Z)({className:"btn-primary-3"},a),{},{multiple:!0,onSuccessMulti:function(e){var i=e.map((function(e){var r=e.data;return null===r||void 0===r?void 0:r.slug})).filter((function(e){var t;return!(null!==(t=r.images)&&void 0!==t&&t.includes(e))}));return r.update({images:[].concat((0,l.Z)(r.images),(0,l.Z)(i))}).then((function(e){return null===t||void 0===t?void 0:t(e)})).catch((function(e){return null===n||void 0===n?void 0:n(e)}))}}))},Z=function(e){var r=e.instance,t=e.onSuccess,n=e.onError,i=e.label;return(0,x.jsxs)(u.pu,{renderHeader:function(){return(0,x.jsxs)("div",{children:["Supprimer '",r.name,"'"]})},renderFooter:function(e){var i=e.setOpen;return(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,x.jsx)(u.zx,{onClick:function(){return i(!1)},children:"Annuler"}),(0,x.jsx)(u.zx,{onClick:function(){return function(e){r.destroy().then((function(n){null===e||void 0===e||e(!1),null===t||void 0===t||t(n),d.u.destroy({slug:r.slug})})).catch((function(e){return null===n||void 0===n?void 0:n(e)}))}(i)},className:"btn-danger",children:"Supprimer"})]})},render:function(){return(0,x.jsx)("div",{className:"p-3",children:"Are you sure you want to delete this"})},className:(0,o.UT)(["product-delete-button btn-danger-3",e.className]),children:[(0,x.jsx)(u.PJ.rF,{}),i&&(0,x.jsx)("span",{className:"label",children:i})]})},b=function(e){var r,t=e.data,n=((0,s.Z)(e,v),(0,h.Z)(t));return(0,x.jsxs)("div",{className:"p-card-list-item p-1 mb-1",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"p-name text-ellipsis",children:n.name_truncated}),(0,x.jsx)("div",{className:"ms-1",children:(0,x.jsx)(p.TK,{show:n.is_published})})]}),(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)(c.pB.Square,(0,i.Z)({},null===n||void 0===n?void 0:n.cover_data)),(0,x.jsxs)("div",{className:"p-info ps-1",children:[(0,x.jsx)(p._S,(0,i.Z)((0,i.Z)({},n.export()),{},{className:"d-flex flex-wrap"})),(0,x.jsx)("div",{className:"p-category",children:null===(r=n.category_data)||void 0===r?void 0:r.name})]})]})]})},j=function(e){var r=e.items,t=e.itempath,i=(0,a.lr)(),l=(0,n.Z)(i,1)[0];return(0,x.jsx)("div",{className:"p-card-list-items",children:r.map((function(e){var r="".concat(t).concat(e.slug,"/?").concat(l);return(0,x.jsx)(a.OL,{to:r,children:(0,x.jsx)(b,{data:e})},e.slug)}))})}},3085:function(e,r,t){t.d(r,{Eh:function(){return F},HG:function(){return C},Kl:function(){return w},iB:function(){return k},ir:function(){return E}});var n=t(6009),i=t(8519),l=t(8312),s=t(2411),a=t(3308),c=t(2145),o=t(3992),u=t(3793),d=t(1408),p=t(8136),h=["instance","categories"],x=["children"],m=["instance","fields","onSuccess","onError"],v=["label","text","error","categories"],f=["label","text","error"],Z=["label","text","error"],b=["label","text","error"],j=["label","text","error"],g=["label","text","error"],_=["label","text","error","stages"],y=["children"],S=["categories"],P=["categories"],N=["children"],k=function(e){var r=e.instance,t=e.categories,n=(0,l.Z)(e,h),s=(0,a.cI)({name:r.name||"",category:r.category||"",description:r.description||"",retail_price:(null===r||void 0===r?void 0:r.retail_price)||0,is_pre_sale:r.is_pre_sale||!1,is_pre_sale_text:r.is_pre_sale_text||""}),c=s.errors,o=e.fields,u=void 0===o?["name","category","description","retail_price","is_pre_sale","is_pre_sale_text"]:o;return(0,p.jsxs)(F,(0,i.Z)((0,i.Z)({},n),{},{context:s,instance:r,fields:u,children:[(0,p.jsx)(C.NameField,{error:c.name}),(0,p.jsx)(C.DescriptionField,{error:c.description}),(0,p.jsxs)("div",{className:"d-grid grid-md-3 gap-2",children:[t&&(0,p.jsx)(C.CategoryField,{categories:t,error:c.category}),(0,p.jsx)(C.RetailPriceField,{error:c.retail_price})]}),(0,p.jsx)(C.PresaleCheckboxField,{label:"En pr\xe9-vente",error:c.is_pre_sale}),s.values.is_pre_sale&&(0,p.jsx)(C.PresaleTextField,{label:"Pre-sale text",placeholder:"Explain ...",error:c.is_pre_sale_text}),(0,p.jsx)(a.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]}))};function F(e){var r=e.children,t=(0,l.Z)(e,x),n=t.instance,s=void 0===n?(0,c.q9)("StaffProduct instance"):n,a=t.fields,u=void 0===a?(0,c.q9)("fields instance"):a,d=t.onSuccess,h=t.onError,v=(0,l.Z)(t,m),f=v.context;return(0,p.jsx)(C,(0,i.Z)((0,i.Z)({},v),{},{onSubmit:function(e){var r;e.preventDefault(),null===t||void 0===t||null===(r=t.onWillSubmit)||void 0===r||r.call(t);var n={};return u.forEach((function(e){var r=f.values[e];null!=r&&("is_pre_sale_dt"!=e||r)&&(n[e]=r)})),s.update(n).then((function(e){var r=e.data;null===d||void 0===d||d(r),o.u.update(r)})).catch((function(e){return h?h(e):f.handleError(e)}))},children:r}))}var w=function(e){var r=(0,a.cI)({name:"",retail_price:"",description:""}),t=r.errors;return(0,p.jsxs)(C,{context:r,onSubmit:function(t){t.preventDefault(),(0,u.Z)().create(r.values).then((function(r){var t;return null===e||void 0===e||null===(t=e.onSuccess)||void 0===t?void 0:t.call(e,r)})).catch((function(e){return r.handleError(e)}))},children:[(0,p.jsx)(C.NameField,{label:"Nom du produit",error:t.name}),(0,p.jsx)(C.RetailPriceField,{required:!1,label:"Prix du produit",error:t.retail_price}),(0,p.jsx)(C.DescriptionField,{label:"Description du produit",error:t.description}),(0,p.jsx)(a.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]})},C=function(e){return(0,p.jsx)(a.ZP,(0,i.Z)({},e))};C.NameField=function(e){return(0,p.jsx)(a.wd,(0,i.Z)({placeholder:"Entrez un titre clair et concis ..."},e))},C.DescriptionField=function(e){return(0,p.jsx)(a.F$,(0,i.Z)({placeholder:"D\xe9crivez les caract\xe9ristiques et les avantages ..."},e))},C.CategoryField=function(e){var r,t=e.label,n=e.text,c=e.error,o=e.categories,u=(0,l.Z)(e,v);return(0,p.jsx)(a.ZP.Field,{label:t,text:n,error:c,children:(0,p.jsx)(a.ZP.Select,(0,i.Z)((0,i.Z)({},u),{},{required:!0,name:"category",nullValue:{label:"S\xe9lectionnez une cat\xe9gorie ..."},children:null===o||void 0===o||null===(r=o.items)||void 0===r?void 0:r.map((function(e){return(0,s.createElement)(a.ZP.Option,(0,i.Z)((0,i.Z)({},e),{},{key:e.value}))}))}))})},C.SalePriceField=function(e){var r=e.label,t=e.text,n=e.error,s=(0,l.Z)(e,f);return(0,p.jsx)(a.ZP.Field,{label:r,text:t,error:n,children:(0,p.jsx)(a.ZP.Text,(0,i.Z)((0,i.Z)({"aria-describedby":"sale_price_label",min:"0",step:"0.01",required:!0,placeholder:"Prix r\xe9duit"},s),{},{type:"number",name:"sale_price"}))})},C.OnSaleCheckboxField=function(e){var r=e.label,t=e.text,n=e.error,s=(0,l.Z)(e,Z);return(0,p.jsx)(a.ZP.Field,{label:r,text:t,error:n,checkbox:!0,children:(0,p.jsx)(a.ZP.Checkbox,(0,i.Z)((0,i.Z)({},s),{},{name:"is_on_sale"}))})},C.PresaleCheckboxField=function(e){var r=e.label,t=e.text,n=e.error,s=(0,l.Z)(e,b);return(0,p.jsx)(a.ZP.Field,{label:r,text:t,error:n,checkbox:!0,children:(0,p.jsx)(a.ZP.Checkbox,(0,i.Z)((0,i.Z)({},s),{},{name:"is_pre_sale"}))})},C.PresaleTextField=function(e){var r=e.label,t=e.text,n=e.error,s=(0,l.Z)(e,j);return(0,p.jsx)(a.ZP.Field,{label:r,text:t,error:n,children:(0,p.jsx)(a.ZP.TextAreaX,(0,i.Z)((0,i.Z)({placeholder:""},s),{},{name:"is_pre_sale_text","aria-describedby":"is_pre_sale_text_label"}))})},C.RetailPriceField=function(e){var r=e.label,t=e.text,n=e.error,s=(0,l.Z)(e,g);return(0,p.jsx)(a.ZP.Field,{label:r,text:t,error:n,children:(0,p.jsx)(a.ZP.Text,(0,i.Z)((0,i.Z)({required:!0,placeholder:"Prix","aria-describedby":"retail_price_label",min:"0",step:"0.01"},s),{},{type:"number",name:"retail_price"}))})},C.StageSelectField=function(e){var r,t=e.label,n=e.text,c=e.error,o=e.stages,u=(0,l.Z)(e,_);return(0,p.jsx)(a.ZP.Field,{label:t,text:n,error:c,children:(0,p.jsx)(a.ZP.Select,(0,i.Z)((0,i.Z)({required:!0,name:"stage",nullValue:{label:"Select stage"}},u),{},{children:null===o||void 0===o||null===(r=o.map)||void 0===r?void 0:r.call(o,(function(e){return(0,s.createElement)(a.ZP.Option,(0,i.Z)((0,i.Z)({},e),{},{key:e.value}))}))}))})};var E=function e(r){var t=r.children,s=(0,l.Z)(r,y),a=(0,d.lr)(),c=(0,n.Z)(a,2),o=c[0],u=c[1],h=s.categories,x=(0,l.Z)(s,S);return(0,p.jsx)("form",(0,i.Z)((0,i.Z)({},x),{},{action:".",method:"GET",onSubmit:function(e){return e.preventDefault()},children:t||(0,p.jsxs)(p.Fragment,{children:[h&&(0,p.jsx)(e.Category,{params:o,setParams:u,categories:h}),(0,p.jsx)(e.Published,{params:o,setParams:u}),(0,p.jsx)(e.Sale,{params:o,setParams:u}),(0,p.jsx)(e.PreSale,{params:o,setParams:u})]})}))};E.Category=function(e){var r=e.categories,t=(0,l.Z)(e,P);return(0,p.jsx)(q,(0,i.Z)((0,i.Z)({emptyLabel:"Categorie ..."},t),{},{name:"cat",children:r.items.map((function(e){return(0,p.jsx)("option",{value:e.value,children:e.label},e.slug)}))}))},E.Published=function(e){return(0,p.jsxs)(q,(0,i.Z)((0,i.Z)({emptyLabel:"Tous les produits ..."},e),{},{name:"published",children:[(0,p.jsx)("option",{value:"include",children:"Produits publi\xe9s"}),(0,p.jsx)("option",{value:"exclude",children:"Produits non publi\xe9s"})]}))};var q=function(e){var r=e.children,t=(0,l.Z)(e,N),n=t.name,i=t.params,s=t.setParams,a=t.emptyLabel;return(0,p.jsxs)("select",{className:"miq-select",name:n,value:i.get(n)||"",onChange:function(e){var r=e.target.value;r?i.set(n,r):i.delete(n),i.delete("page"),s(i)},children:[a&&(0,p.jsx)("option",{value:"",children:a}),r]})};E.PreSale=function(e){return(0,p.jsx)(I,(0,i.Z)((0,i.Z)({},e),{},{name:"presale",label:"En pr\xe9-vente"}))},E.Sale=function(e){return(0,p.jsx)(I,(0,i.Z)((0,i.Z)({},e),{},{name:"sale",label:"En promo"}))};var I=function(e){var r=e.label,t=e.name,n=e.params,i=e.setParams,l=e.inputId;return(0,p.jsxs)("div",{className:(0,c.UT)(["miq-query-filter-toggle d-flex align-items-center"]),children:[(0,p.jsx)("input",{type:"checkbox",className:"miq-checkbox me-1",id:l,onChange:function(e){var r=e.target.checked;r?n.set(t,"".concat(r)):n.delete(t),n.delete("page"),i(n)},checked:Boolean(n.get(t))||!1}),(0,p.jsx)("label",{htmlFor:l,children:r})]})}},9953:function(e,r,t){t.d(r,{Z:function(){return n.Z},_:function(){return i._}});var n=t(3793),i=t(5566)},3793:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(8519),i=t(1135),l=t(7411),s=t(2518),a=t(2485),c=t(3576),o=function(e){(0,s.Z)(t,e);var r=(0,a.Z)(t);function t(){return(0,i.Z)(this,t),r.apply(this,arguments)}return(0,l.Z)(t,[{key:"publish",value:function(){return this.patch("".concat(this._path,"publish/"),{is_published:!0})}},{key:"unpublish",value:function(){return this.patch("".concat(this._path,"publish/"),{is_published:!1})}},{key:"postSize",value:function(e){return this.post("".concat(this._path,"size/new/"),e)}},{key:"patchSize",value:function(e,r){return this.patch("".concat(this._path,"size/").concat(e,"/"),r)}},{key:"deleteSize",value:function(e){return this.delete("".concat(this._path,"size/").concat(e,"/"))}},{key:"postAttribute",value:function(e){return this.post("".concat(this._path,"attribute/new/"),e)}},{key:"patchAttribute",value:function(e,r){return this.patch("".concat(this._path,"attribute/").concat(e,"/"),r)}},{key:"deleteAttribute",value:function(e){return this.delete("".concat(this._path,"attribute/").concat(e,"/"))}},{key:"swapCover",value:function(e){return this.patch("".concat(this._path,"swap-cover/"),{slug:e})}}]),t}(c.x5),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.dt_published;return r&&(r=new Date(r)),(0,c.eR)((0,n.Z)((0,n.Z)({},e),{},{dt_published:r}),"products",o)}},5566:function(e,r,t){t.d(r,{_:function(){return a}});var n=t(6009),i=t(1408),l=t(2134),s=t(3793),a=function(e){var r=(0,i.lr)(),t=(0,n.Z)(r,1)[0],a=t.get("cat"),c=t.get("page"),o=t.get("published"),u=t.get("presale"),d=t.get("sale"),p={page:c,cat:a,published:o,presale:u,sale:d};return e&&(p.supplier_order_slug=e),(0,l.QT)((function(){return(0,s.Z)().list({params:p})}),{refreshDeps:[c,a,o,u,d,e]})}},4627:function(e,r,t){t.r(r),t.d(r,{default:function(){return U}});var n=t(2411),i=t(3308),l=t(2134),s=t(3576),a=t(2145),c=t(6520),o=t(3432),u=t(2379),d=t(6009),p=t(8519),h=t(8312),x=t(8136),m=["instance","fields"],v=["onSuccess","onError"],f=["label","text","error"],Z=["label","text","error"],b=["label","text","error"],j=["label","text","error"],g=["label","text","error","currencies"],_=["label","text","error","suppliers"],y=["children"],S=function(e){var r=e.instance,t=e.fields,n=(0,h.Z)(e,m),i=n.onSuccess,l=n.onError,s=(0,h.Z)(n,v),a=s.context;return(0,x.jsx)(P,(0,p.Z)((0,p.Z)({},s),{},{onSubmit:function(e){e.preventDefault();var n={};return t.forEach((function(e){var r=a.values[e];null!=r&&(n[e]=r)})),r.update(n).then((function(e){return null===i||void 0===i?void 0:i(e)})).catch((function(e){var r;return l?l(e):null===a||void 0===a||null===(r=a.handleError)||void 0===r?void 0:r.call(a,e)}))}}))},P=function(e){return(0,x.jsx)(i.ZP,(0,p.Z)({},e))};P.NameField=function(e){var r=e.label,t=void 0===r?"Name":r,n=e.text,l=void 0===n?"Write a name to help remember your order.":n,s=e.error,a=(0,h.Z)(e,f);return(0,x.jsx)(i.ZP.Field,{label:t,text:l,error:s,children:(0,x.jsx)(i.ZP.Text,(0,p.Z)((0,p.Z)({placeholder:"Nom",maxLength:99},a),{},{name:"name"}))})},P.OrderIDField=function(e){var r=e.label,t=void 0===r?"Order ID":r,n=e.text,l=e.error,s=(0,h.Z)(e,Z);return(0,x.jsx)(i.ZP.Field,{label:t,text:n,error:l,children:(0,x.jsx)(i.ZP.Text,(0,p.Z)((0,p.Z)({placeholder:"Order ID",maxLength:99},s),{},{name:"order_id"}))})},P.IsPaidField=function(e){var r=e.label,t=void 0===r?"Pay\xe9":r,n=e.text,l=e.error,s=(0,h.Z)(e,b);return(0,x.jsx)(i.ZP.Field,{label:t,text:n,error:l,checkbox:!0,children:(0,x.jsx)(i.ZP.Checkbox,(0,p.Z)((0,p.Z)({},s),{},{name:"is_paid"}))})},P.TotalCostField=function(e){var r=e.label,t=void 0===r?"Co\xfbt total":r,n=e.text,l=e.error,s=(0,h.Z)(e,j);return(0,x.jsx)(i.ZP.Field,{label:t,text:n,error:l,children:(0,x.jsx)(i.ZP.Text,(0,p.Z)((0,p.Z)({min:"0",step:"0.01"},s),{},{required:!0,type:"number",name:"total_cost"}))})},P.CurrencyField=function(e){var r=e.label,t=e.text,l=void 0===t?"Select the supplier currency.":t,s=e.error,a=e.currencies,c=(0,h.Z)(e,g);return(0,x.jsx)(i.ZP.Field,{label:r,text:l,error:s,children:(0,x.jsx)(i.ZP.Select,(0,p.Z)((0,p.Z)({},c),{},{required:!0,name:"currency",nullValue:{label:"S\xe9lectionnez une monnaie ..."},children:null===a||void 0===a?void 0:a.map((function(e){return(0,n.createElement)(i.ZP.Option,(0,p.Z)((0,p.Z)({},e),{},{key:e.value}))}))}))})},P.SupplierField=function(e){var r=e.label,t=e.text,l=void 0===t?"Select the supplier.":t,s=e.error,a=e.suppliers,c=(0,h.Z)(e,_);return(0,x.jsx)(i.ZP.Field,{label:r,text:l,error:s,children:(0,x.jsx)(i.ZP.Select,(0,p.Z)((0,p.Z)({},c),{},{required:!0,name:"supplier",nullValue:{label:"S\xe9lectionnez le supplier ..."},children:null===a||void 0===a?void 0:a.map((function(e){return(0,n.createElement)(i.ZP.Option,(0,p.Z)((0,p.Z)({},e),{},{key:e.value}))}))}))})};var N=function(e){e.children;var r,t=(0,h.Z)(e,y),l=t.orderInstance,s=t.onSuccess,a=t.onError,c=null===l||void 0===l||null===(r=l.supplier)||void 0===r?void 0:r.toLowerCase(),o=(0,i.cI)({supplier_name:c,url:k}),u=n.useState(!1),m=(0,d.Z)(u,2),v=m[0],f=m[1];return(0,x.jsxs)(i.ZP,{context:o,onSubmit:function(e){e.preventDefault();var r=o.values.url,t=function(e){return f(!1),o.setValue("url",""),null===s||void 0===s?void 0:s(e)},n=function(e){return o.setErrors((0,p.Z)((0,p.Z)({},o.errors),{},{url:"Something went wrong."})),f(!1),null===a||void 0===a?void 0:a(e)},i="Invalid Url: does not match supplier ".concat(l.supplier);switch(c){case"fnova":return r.includes("fashionnova")?(f(!0),l.postFnova(r).then(t).catch(n)):o.setErrors({url:i});case"plt":return r.includes("prettylittlething")?(f(!0),l.postPlt(r).then(t).catch(n)):o.setErrors({url:i});default:return r.includes(c)?(f(!0),l.postShein(r).then(t).catch(n)):o.setErrors({url:i})}},className:"supplier-product-add-form",children:[(0,x.jsx)(i.ZP.Field,{error:o.errors.url,children:(0,x.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center",children:[(0,x.jsx)(i.ZP.Text,{required:!0,name:"url",type:"url",placeholder:"Add ".concat(c," product source url ..."),className:"me-1",disabled:v}),(0,x.jsx)("div",{className:"mt-1 mt-md-0",children:(0,x.jsx)(i.ZP.Submit,{value:"Add product",className:"btn btn-primary-3",disabled:v})})]})}),v&&(0,x.jsx)("div",{className:"my-3",children:"Getting product data. Please wait ..."})]})},k="https://www.fashionnova.com/products/jessa-denim-mini-dress-white",F=t(9062),w=t(9953),C=t(3085),E=t(421);function q(e){var r,t=e.orderInstance,i=e.refreshOrder,l=e.categories,a=(0,c.UO)().ordSlug,o=(0,w._)(a).res,h=void 0===o?{data:{results:[]}}:o,m=n.useState([]),v=(0,d.Z)(m,2),f=v[0],Z=v[1];return(0,x.jsx)(s.ZP.Section,{header:(0,x.jsx)(C.ir,{categories:l}),footer:(0,x.jsx)(u.tl,(0,p.Z)((0,p.Z)({},h.data),{},{component:s.ZP.NavLink,to:!0})),className:"supplier-p-list",children:null!==(r=h.data)&&void 0!==r&&r.results.length?(0,x.jsxs)(x.Fragment,{children:[0!==f.length&&(0,x.jsx)("div",{className:"bg-white",style:{position:"sticky",top:0,zIndex:1e3},children:(0,x.jsx)(u.zx,{children:"Group together"})}),h.data.results.map((function(e){return(0,n.createElement)(I,{orderInstance:t,categories:l,selected:f,setSelected:Z,refreshOrder:i,instance:(0,w.Z)(e),key:e.slug})}))]}):null})}var I=function(e){var r=n.useState(!1),t=(0,d.Z)(r,2),i=t[0],l=t[1],a=e.instance,c=e.categories;if(i)return null;var o=a.supplier_item,h=e.orderInstance;return(0,x.jsx)(u.vz,{border:!0,title:(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)(T,(0,p.Z)({},e)),(0,x.jsx)("div",{style:{width:48,height:48},children:(0,x.jsx)(s.ZP.Img.Square,(0,p.Z)((0,p.Z)({slug:"slug",src:"src"},a.cover_data),{},{className:"rounded"}))})]}),actions:(0,x.jsxs)("div",{className:"d-flex",children:[(0,x.jsx)(E.sq,{instance:a,onSuccess:function(){var r;l(!0),null===e||void 0===e||null===(r=e.refreshOrder)||void 0===r||r.call(e)},className:"me-2"}),(0,x.jsx)(s.ZP.Link,{to:"./".concat(a.slug,"/"),className:"btn btn-primary-3",children:(0,x.jsx)(u.PJ.ws,{})})]}),className:"suppier-p-list-item bg-white",children:(0,x.jsxs)(u.j6,{className:"form-tab no-scroll-bar gap-2",children:[(0,x.jsx)(C.iB,{instance:a,categories:c}),(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("div",{className:"mb-1",children:"".concat(o.item_id?(0,x.jsxs)("span",{className:"",children:["Item ID: ",o.item_id]}):"")}),(0,x.jsxs)("ul",{children:[o.category&&(0,x.jsxs)("li",{className:"mb-1",children:[(0,x.jsx)("div",{className:"text-sm",children:"Supplier Category"}),(0,x.jsx)("div",{className:"text-muted",children:o.category})]}),(0,x.jsxs)("li",{className:"mb-1",children:[(0,x.jsxs)("div",{className:"text-sm",children:["FOB Cost(",h.currency,")"]}),(0,x.jsx)("div",{className:"text-muted",children:o.cost})]}),o.url&&(0,x.jsx)("li",{className:"",children:(0,x.jsx)("a",{href:o.url,target:"_blank",className:"text-underline",rel:"noopener noreferrer",children:"View supplier product page"})})]})]})]})})},T=function(e){var r=e.instance,t=e.selected,n=e.setSelected;return(0,x.jsx)("input",{type:"checkbox",name:"selected",className:"me-2",onChange:function(e){var i=e.target.checked;n(i?[].concat((0,F.Z)(t),[r.slug]):function(e){return e.filter((function(e){return e!==r.slug}))})}})},D=t(9002),O={name:"",order_id:"",items_stage:"",currency:"USD",supplier:"",is_paid:!1,total_cost:""},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return Object.keys(O).forEach((function(t){r[t]=e["".concat(t)]||O["".concat(t)]})),r};function U(){var e,r,t=(0,c.UO)().ordSlug,d=(0,i.cI)(z()),p=n.useContext(D.h2),h=p.suppliers,m=p.currencies,v=d.setValues,f=(0,l.QT)((function(){return(0,o.e)({slug:t}).retrieve()}),{refreshDeps:[t],onSuccess:function(e){return v(z(e.data))}}),Z=f.res,b=f.loading,j=f.setLoading,g=f.setRes,_=f.refresh,y=new a.HM(Z);if(!y.isSuccess)return null;var k=(0,o.e)(y.data);return k.supplier&&k.currency?(0,x.jsx)(s.ZP.View,{title:d.values.name,back:"/staff/store/orders/",children:(0,x.jsxs)("div",{className:"d-flex flex-column flex-xl-row",children:[(0,x.jsx)("div",{className:"min-w-35",children:(0,x.jsx)(s.ZP.Section,{border:!0,className:"bg-white mb-1",title:"Order Details".concat(!b&&" (".concat(null===(e=k.products)||void 0===e?void 0:e.length,")")),text:"Supplier: ".concat(k.supplier," | Currency: ").concat(k.currency),children:(0,x.jsxs)("div",{className:"d-grid grid-md-5 gap-2",children:[(0,x.jsx)("div",{className:"span-md-3",children:(0,x.jsx)(S,{instance:k,context:d,fields:["is_paid","order_id","total_cost"],onSuccess:function(e){return g(e)},children:(0,x.jsxs)(u.vz,{border:!0,footer:(0,x.jsx)(i.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"}),children:[(0,x.jsx)(P.IsPaidField,{error:d.errors.is_paid}),d.values.is_paid&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(P.OrderIDField,{required:d.values.is_paid,error:d.errors.order_id}),(0,x.jsx)(P.TotalCostField,{required:d.values.is_paid,error:d.errors.total_cost})]})]})})}),(0,x.jsx)("div",{className:"span-md-2",children:(0,x.jsxs)("ul",{className:"mb-3",children:[(0,x.jsxs)("li",{children:["Total cost: ",k.items_cost.amountWithSymbol]}),(0,x.jsxs)("li",{children:["Est. revenue: ",k.items_revenue.amountWithSymbol]})]})})]})})}),(0,x.jsx)("div",{className:"miq-container-1024 ms-xl-1",children:(0,x.jsx)(s.ZP.Section,{header:(0,x.jsx)("div",{className:"miq-container-md center bg-white",children:(0,x.jsx)(N,{orderInstance:k,onSuccess:function(e){j(),g(e)}})}),children:b?(0,x.jsx)(u.gb,{icon:!0}):(0,x.jsx)(q,{orderInstance:k,categories:null===y||void 0===y||null===(r=y.data)||void 0===r?void 0:r.categories,refreshOrder:_})})})]})}):(0,x.jsx)(s.ZP.View,{title:"Modifier une commande",back:"/staff/store/orders/",children:(0,x.jsx)(s.ZP.Section,{className:"d-flex justify-content-center mt-4",children:(0,x.jsxs)(S,{context:d,instance:k,fields:["name","currency","supplier"],onSuccess:function(e){return g(e)},children:[(0,x.jsx)(P.NameField,{required:!0,label:"Nom",error:d.errors.currency}),(0,x.jsx)(P.SupplierField,{required:!0,label:"Supplier",suppliers:h,error:d.errors.supplier}),(0,x.jsx)(P.CurrencyField,{required:!0,label:"Supplier Currency",currencies:m,error:d.errors.currency}),(0,x.jsx)(i.ZP.Submit,{value:"Sauvegarder",className:"btn-primary-3"})]})})})}},3432:function(e,r,t){t.d(r,{e:function(){return u}});var n=t(1135),i=t(7411),l=t(2518),s=t(2485),a=t(3576),c=1e4,o=function(e){(0,l.Z)(t,e);var r=(0,s.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,i.Z)(t,[{key:"postFnova",value:function(e){return this.post("".concat(this._path,"fnova/"),{url:e},{timeout:c})}},{key:"postPlt",value:function(e){return this.post("".concat(this._path,"plt/"),{url:e},{timeout:c})}},{key:"postShein",value:function(e){return this.post("".concat(this._path,"shein/"),{url:e},{timeout:c})}}]),t}(a.x5),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.eR)(e,"supplierorders",o)}},6574:function(e,r,t){t.d(r,{nk:function(){return x},_S:function(){return m},H5:function(){return p},TK:function(){return v},Ko:function(){return h}});var n=t(8519),i=t(8312),l=(t(2411),t(2379)),s=t(2145),a=t(8136),c=["instance","onClick","onSuccess","onError"],o=["instance","onClick","onSuccess","onError"],u=["retail_price_data","is_on_sale","sale_price_data"],d=["show"],p=function(e){var r=e.instance,t=(e.onClick,e.onSuccess),s=e.onError,o=(0,i.Z)(e,c);return(0,a.jsx)(l.zx,(0,n.Z)((0,n.Z)({onClick:function(){return r.is_published?null:r.publish().then((function(e){return null===t||void 0===t?void 0:t(e)})).catch((function(e){return null===s||void 0===s?void 0:s(e)}))},className:"btn-primary btn-md"},o),{},{disabled:r.is_published}))},h=function(e){var r=e.instance,t=(e.onClick,e.onSuccess),s=e.onError,c=(0,i.Z)(e,o);return(0,a.jsx)(l.zx,(0,n.Z)((0,n.Z)({className:"btn-danger btn-md",onClick:function(){return r.is_published?r.unpublish().then((function(e){return null===t||void 0===t?void 0:t(e)})).catch((function(e){return null===s||void 0===s?void 0:s(e)})):null}},c),{},{disabled:!r.is_published}))},x=function(e){var r=e.amountWithSymbol,t=e.className,n=e.sale,i=e.lineThrough;return(0,a.jsx)("div",{className:(0,s.UT)(["miq-price-display",n&&"text-danger",i&&"text-line-through",t]),children:r})},m=function(e){var r=e.retail_price_data,t=e.is_on_sale,l=e.sale_price_data,c=(0,i.Z)(e,u);if(!r)return null;var o=t&&null!=(null===l||void 0===l?void 0:l.amountWithSymbol);return(0,a.jsxs)("div",{className:(0,s.UT)(["miq-product-price-display",c.className]),style:c.style,children:[o&&(0,a.jsx)(x,(0,n.Z)((0,n.Z)({sale:!0},l),{},{className:"miq-sale-price me-1"})),(0,a.jsx)(x,(0,n.Z)((0,n.Z)({},r),{},{lineThrough:o,className:"miq-retail-price"}))]})},v=function(e){var r=e.show,t=(0,i.Z)(e,d);return r?(0,a.jsx)(l.PJ.fU,(0,n.Z)((0,n.Z)({},t),{},{className:"published-icon"})):null};new l.SD},3992:function(e,r,t){t.d(r,{U:function(){return h},u:function(){return p}});var n=t(8312),i=t(1135),l=t(7411),s=t(2518),a=t(2485),c=t(2411),o=t(2578),u=["prefix"],d=function(e){(0,s.Z)(t,e);var r=(0,a.Z)(t);function t(){var e;(0,i.Z)(this,t);for(var l=arguments.length,s=new Array(l),a=0;a<l;a++)s[a]=arguments[a];var c=s.prefix,o=void 0===c?"":c,d=(0,n.Z)(s,u);return(e=r.call(this,d)).prefix=void 0,e.prefix=o,e}return(0,l.Z)(t,[{key:"create",value:function(e){this.emit("".concat(this.prefix,"-create"),e)}},{key:"retrieve",value:function(e){this.emit("".concat(this.prefix,"-retrieve"),e)}},{key:"list",value:function(e){this.emit("".concat(this.prefix,"-list"),e)}},{key:"update",value:function(e){this.emit("".concat(this.prefix,"-update"),e)}},{key:"destroy",value:function(e){this.emit("".concat(this.prefix,"-destroy"),e)}}]),t}(t.n(o)()),p=new d;function h(e,r){c.useEffect((function(){p.on("-create",(function(t){var n;r&&!r(t)||null===(n=e.onCreate)||void 0===n||n.call(e,t)})),p.on("-update",(function(t){var n;r&&!r(t)||null===(n=e.onUpdate)||void 0===n||n.call(e,t)})),p.on("-destroy",(function(t){var n;r&&!r(t)||null===(n=e.onDestroy)||void 0===n||n.call(e,t)}))}),[])}}}]);
//# sourceMappingURL=601.4d6ebaa7.chunk.js.map