"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[631],{7631:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(9062),s=n(8519),a=(n(2411),n(1408)),i=n(6520),c=n(2134),l=n(3576),u=n(3308),o=n(2145),d=n(2782),m=n(8136);function x(){var e=(0,c.QT)((function(){return(0,d.Y)().list()})),t=e.res,n=e.setRes,u=new o.HM(t);return u.isSuccess?(0,m.jsx)(l.ZP.View,{title:"Captions",actions:(0,m.jsx)(a.rU,{to:"new/",className:"btn btn-primary-3",children:"Add caption"}),children:(0,m.jsxs)("div",{className:"d-grid grid-md-11",children:[(0,m.jsx)("div",{className:"span-md-5",children:u.items.map((function(e){var t=(0,d.Y)(e);return(0,m.jsx)(a.rU,{to:"".concat(e.slug,"/"),children:(0,m.jsxs)("div",{className:"mb-3",children:[t.text,(0,m.jsx)("div",{className:"text-sm text-muted",children:t.template})]})},e.slug)}))}),(0,m.jsx)("div",{className:"span-md-6",children:(0,m.jsxs)(i.Z5,{children:[(0,m.jsx)(i.AW,{path:"new/",element:(0,m.jsx)(l.ZP.View,{title:"Add a new caption",children:(0,m.jsx)(f,{onSuccess:function(e){n((0,s.Z)((0,s.Z)({},t),{},{data:(0,s.Z)((0,s.Z)({},t.data),{},{results:[e.data].concat((0,r.Z)(t.data.results))})}))}})})}),(0,m.jsx)(i.AW,{path:":capSlug/",element:(0,m.jsx)(v,{})})]})})]})}):null}var v=function(e){var t=(0,i.UO)().capSlug,n=(0,u.cI)({text:"",template:""}),r=(0,c.QT)((function(){return(0,d.Y)({slug:t}).retrieve()}),{refreshDeps:[t],onSuccess:function(e){return n.setValues({text:e.data.text,template:e.data.template})}}),s=r.res,a=new o.HM(s);if(!a.isSuccess)return null;var l=(0,d.Y)(a.data),x=l.text,v=l.template;return(0,m.jsxs)(u.ZP,{context:n,onSubmit:function(t){t.preventDefault();var r=e.onSuccess,s=e.onError;l.patch(n.values,{text:x,template:v}).then((function(e){return null===r||void 0===r?void 0:r(e)})).catch((function(e){return null===s||void 0===s?void 0:s(e)}))},children:[(0,m.jsx)(p,{form:n}),(0,m.jsx)(h,{form:n}),(0,m.jsx)(u.ZP.Submit,{value:"Update caption",className:"btn-primary-3 btn-md"})]})},f=function(e){var t=e.onSuccess,n=e.onError,r=(0,u.cI)({text:"",template:""});return(0,m.jsxs)(u.ZP,{context:r,onSubmit:function(e){e.preventDefault(),(0,d.Y)().retrieve(r.values).then((function(e){return null===t||void 0===t?void 0:t(e)})).catch((function(e){return null===n||void 0===n?void 0:n(e)}))},children:[(0,m.jsx)(p,{form:r}),(0,m.jsx)(h,{form:r}),(0,m.jsx)(u.ZP.Submit,{value:"Save caption",className:"btn-primary-3 btn-md"})]})},p=function(e){var t=e.form,n=e.label,r=void 0===n?"Text":n;return(0,m.jsx)(u.ZP.Field,{label:r,text:"Enter the text verbatim.",error:t.errors.text,children:(0,m.jsx)(u.ZP.TextAreaX,{required:!0,name:"text"})})},h=function(e){var t,n=e.form,r=e.label,s=void 0===r?"Template":r;return(0,m.jsx)(u.ZP.Field,{label:s,error:null===n||void 0===n||null===(t=n.errors)||void 0===t?void 0:t.template,children:(0,m.jsx)(u.ZP.TextAreaX,{name:"template"})})}},2782:function(e,t,n){n.d(t,{A:function(){return a},Y:function(){return s}});var r=n(3576),s=function(e){return(0,r.eR)(e,"social-post-texts")},a=function(e){return(0,r.eR)(e,"social-hashtags")}}}]);
//# sourceMappingURL=631.d2a8cea8.chunk.js.map