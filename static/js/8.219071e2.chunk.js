(this["webpackJsonp@store/clientjs"]=this["webpackJsonp@store/clientjs"]||[]).push([[8],{341:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var n=c(17),a=c(29),s=c(23),r=c(21),i=new(function(e){Object(s.a)(c,e);var t=Object(r.a)(c);function c(){return Object(n.a)(this,c),t.apply(this,arguments)}return Object(a.a)(c,[{key:"publish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{})}},{key:"unpublish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{unpublish:!0})}},{key:"postAttribute",value:function(e,t){return this.postPath("".concat(this.path).concat(e,"/attribute/new/"),t)}},{key:"patchAttribute",value:function(e,t,c,n){return this.patchPath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"),c,n)}},{key:"deleteAttribute",value:function(e,t){return this.deletePath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"))}},{key:"patchPage",value:function(e,t,c){return this.patchPath("".concat(this.path).concat(e,"/page/"),t,c)}},{key:"swapCover",value:function(e,t){return this.patchPath("".concat(this.path).concat(e,"/swap-cover/"),{slug:t})}}]),c}(c(3).f))("products/")},358:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return x}));var n=c(1),a=c(18),s=c(22),r=c(8),i=c(2),l=c(24),u=c(10),o=(c(359),c(13)),d=c(9),h=c(3),b=c(5),j=c(341),p=c(0),O=Object(i.lazy)((function(){return Promise.all([c.e(0),c.e(25)]).then(c.bind(null,363))})),m=Object(i.lazy)((function(){return c.e(0).then(c.bind(null,353))})),f=function(e){var t,c,u,O=Object(i.useState)({count:0}),m=Object(r.a)(O,2),f=m[0],x=m[1],v=Object(i.useState)("pending"),g=Object(r.a)(v,2),k=g[0],N=g[1],P=Object(i.useState)(!0),w=Object(r.a)(P,2),_=w[0],y=w[1],S=Object(i.useContext)(o.a).perms,C=e.location.search;Object(i.useEffect)((function(){var e=new URLSearchParams(C);Object(s.a)(e.values()).filter((function(e){return e})).length||(e=null),j.a.list(e).then((function(e){x(e),N("success")})).catch((function(e){N("failed")}))}),[C]);var A=Object(d.l)(S.perms,["shop.add_product"]);if("pending"===k)return Object(p.jsx)(b.p,{});if("failed"===k)return Object(p.jsx)("div",{children:"Something went wrong. Please reload the page!"});var T=new URLSearchParams(C);function q(){var t=new URL(window.location.href);e.history.push("".concat(t.pathname,"?").concat(T))}return Object(p.jsxs)(d.g,{title:"Products (".concat(f.count,")"),back:e.back,actions:Object(p.jsx)(d.d,{label:"Add product",to:"".concat(Object(h.g)(e.match.url),"new/"),disabled:!A,className:"btn-primary"}),children:[Object(p.jsx)(d.g.Section,{actions:Object(p.jsx)(b.b,{onClick:function(){return y(!_)},children:"Filter"}),children:_&&Object(p.jsxs)("form",{action:".",method:"GET",children:[Object(p.jsxs)("div",{className:"d-flex p-2",children:[Object(p.jsx)("input",(t={type:"checkbox",className:"miq-checkbox",id:"published"},Object(a.a)(t,"className","me-2"),Object(a.a)(t,"onChange",(function(e){e.target.checked?T.set("status","published"):T.delete("status"),q()})),Object(a.a)(t,"checked",Boolean(T.get("status"))||!1),t)),Object(p.jsx)("label",{htmlFor:"published",children:"Published"})]}),Object(p.jsxs)("select",{className:"miq-select ms-1",value:T.get("cat")||"all",onChange:function(e){var t=e.target.value;t&&"all"!==t?T.set("cat",t):T.delete("cat"),q()},children:[Object(p.jsx)("option",{value:"all",children:"All categories"}),null===f||void 0===f||null===(c=f.categories)||void 0===c||null===(u=c.items)||void 0===u?void 0:u.map((function(e){return Object(p.jsx)("option",{value:e.value,children:e.label},e.slug)}))]})]})}),(null===f||void 0===f?void 0:f.results)&&Object(p.jsx)(d.g.Section,{className:"product-table mb-3",children:Object(p.jsx)(b.n,{className:"w-100",items:f.results,headers:["","","Add to carts","Price (CFA)","Status"],renderItem:function(t){var c;return Object(p.jsxs)(b.t.Tr,{className:"border-bottom",children:[Object(p.jsx)(b.t.Td,{className:"",children:Object(p.jsx)(b.j,Object(n.a)(Object(n.a)({},t.cover_data),{},{className:"rounded"}))}),Object(p.jsxs)(b.t.Td,{className:"",children:[Object(p.jsx)(l.b,{to:"".concat(Object(h.g)(e.match.url)).concat(t.slug,"/"),children:Object(p.jsx)("div",{className:"fw-bold",title:t.name,children:t.name})}),Object(p.jsxs)("div",{className:"text-muted text-sm",children:[t.category_data&&Object(p.jsx)("span",{className:"me-1",children:t.category_data.name}),t.is_pre_sale&&Object(p.jsx)("span",{className:"me-1",children:"Pre sale"})]})]}),Object(p.jsx)(b.t.Td,{className:"d-none d-md-table-cell text-sm text-center",children:t.add_to_cart_count}),Object(p.jsx)(b.t.Td,{className:"text-center",children:t.is_on_sale?Object(p.jsx)("span",{className:"text-danger",children:t.sale_price}):Object(p.jsx)("span",{className:"",children:t.retail_price})}),Object(p.jsx)(b.t.Td,{className:"d-none d-md-table-cell text-sm text-center",children:Object(p.jsx)(d.i,{is_published:null===t||void 0===t||null===(c=t.page)||void 0===c?void 0:c.is_published,pill:!0})})]},t.slug)},pagination:{count:f.count,next:f.next,previous:f.previous,onPreviousClick:function(){if(f&&f.previous)return N("pending"),j.a.get(f.previous).then((function(e){return x(e),N("succcess")})).catch((function(e){return N("failed")}))},onNextClick:function(){if(f&&f.next)return N("pending"),j.a.get(f.next).then((function(e){return x(e),N("succcess")})).catch((function(e){return N("failed")}))}}})})]})};function x(e){var t=e.match,c=t.path,a=t.url;return Object(p.jsxs)(u.c,{children:[Object(p.jsx)(d.e,{path:"".concat(c,"new/"),render:function(e){return Object(p.jsx)(O,Object(n.a)({back:Object(h.g)(a)},e))},requiredPerms:["shop.add_product"]}),Object(p.jsx)(d.e,{path:"".concat(c,":prodSlug/"),render:function(e){return Object(p.jsx)(m,Object(n.a)({back:Object(h.g)(a)},e))},requiredPerms:["shop.change_product"]}),Object(p.jsx)(d.e,{requiredPerms:["shop.view_product"],render:function(t){return Object(p.jsx)(f,Object(n.a)(Object(n.a)({},t),{},{back:e.back}))}})]})}},359:function(e,t,c){}}]);
//# sourceMappingURL=8.219071e2.chunk.js.map