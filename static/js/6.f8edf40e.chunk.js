(this["webpackJsonp@store/client"]=this["webpackJsonp@store/client"]||[]).push([[6],{104:function(e,t,c){"use strict";c.d(t,"a",(function(){return j})),c.d(t,"b",(function(){return d})),c.d(t,"c",(function(){return b}));var n=c(1),r=c(23),a=c(36),i=c(28),s=c(27),u=c(7),l=c.n(u),o=c(3),j={data:l.a.shape({slug:l.a.string}).isRequired,context:l.a.shape({isEdit:l.a.bool}).isRequired},d=new(function(e){Object(i.a)(c,e);var t=Object(s.a)(c);function c(e){return Object(r.a)(this,c),t.call(this,e)}return Object(a.a)(c,[{key:"archive",value:function(e){return this.get("".concat(this.path).concat(e,"/archive/"))}}]),c}(o.d))("sections/"),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{results:[]},t=arguments.length>1?arguments[1]:void 0,c=t.type,r=t.payload,a=void 0===r?{}:r,i=a.results;switch(c){case"SET_SECTIONS":return Object(n.a)({},a);case"APPEND_SECTION":return i=addOrUpdateArrayObject(e.results,a,"slug",!0),Object(n.a)(Object(n.a)({},e),{},{results:i});case"PREPEND_SECTION":case"UPDATE_SECTION":return i=addOrUpdateArrayObject(e.results,a),Object(n.a)(Object(n.a)({},e),{},{results:i});case"REMOVE_SECTION":return i=e.results.filter((function(e){return e.slug!==a.slug})),Object(n.a)(Object(n.a)({},e),{},{results:i});default:return Object(n.a)({},e)}}},105:function(e,t,c){"use strict";c.d(t,"a",(function(){return f})),c.d(t,"b",(function(){return h})),c.d(t,"d",(function(){return v})),c.d(t,"c",(function(){return x}));var n=c(4),r=c(1),a=c(5),i=c(3),s=c(104),u=c(107),l=c(16),o=c(0),j=["imgSlug","section"],d=["onCreate","onUpdate"],b=["isUpdated"],O=["form","children"],f=function(e){console.log(e);var t=e.context,c=void 0===t?Object(i.j)("section context"):t,n=e.data,s=void 0===n?Object(i.j)("section data"):n;return Object(o.jsx)(a.c,Object(r.a)(Object(r.a)({},e),{},{Icon:a.e.Trash,className:"section-btn btn-danger",title:"Delete",onClick:function(){return c.remove(s.slug)}}))},h=function(e){var t=e.context,c=void 0===t?Object(i.j)("section context"):t,n=c.isEdit;return Object(o.jsx)(a.c,{Icon:n?a.e.Eye:a.e.PencilSquare,className:"section-btn",title:n?"Preview Mode":"Edit Mode",onClick:function(){return c.setEdit(!n)}})},v=function(e){var t=e.imgSlug,c=e.section,l=void 0===c?Object(i.j)("Section data"):c,O=Object(n.a)(e,j);if(!l.slug)return null;var f=l.type,h=O.onCreate,v=O.onUpdate,x=Object(n.a)(O,d),g=function(e){e.isUpdated;var c=Object(n.a)(e,b),a=c.slug,i=l.images;i.includes(a)||i.push(a);var o=Object(u.a)(Object(r.a)(Object(r.a)({},l),{},{image:c,images:i}));return s.b.patch(l.slug,{type:f,images:i,html:o},{type:f,images:l.images,html:l.html}).then((function(e){if(e.isUpdated){if(t&&v)return v(e);h&&h(e)}}))};return Object(o.jsx)(a.i,Object(r.a)(Object(r.a)({},x),{},{onCreate:g,onUpdate:g,slug:t}))},x=function(e){var t=e.form,c=void 0===t?Object(i.j)("form"):t,r=e.children;Object(n.a)(e,O);return Object(o.jsx)(l.a,{value:c,children:r})};x.TitleInput=function(e){return Object(o.jsx)(l.b.TextInput,Object(r.a)(Object(r.a)({placeholder:"Write title..."},e),{},{name:"title"}))},x.TextInput=function(e){return Object(o.jsx)(l.b.TextInput,Object(r.a)(Object(r.a)({placeholder:"Write text..."},e),{},{name:"text"}))}},106:function(e,t,c){"use strict";c.d(t,"a",(function(){return a})),c.d(t,"c",(function(){return i})),c.d(t,"b",(function(){return s}));var n=c(3),r=c(0),a=function(e){var t=e.children,c=e.id,a=e.className;return Object(r.jsx)("div",{id:c,className:Object(n.f)(["section-body",a]),children:t})},i=function(e){var t=e.children,c=e.Icon,a=e.id,i=e.className;return Object(r.jsxs)("div",{id:a,className:Object(n.f)(["section-header",i]),children:[c&&Object(r.jsx)("div",{className:"",children:Object(r.jsx)(c,{className:"icon"})}),t]})},s=function(e){var t=e.children,c=e.id,a=e.className;return Object(r.jsx)("div",{id:c,className:Object(n.f)(["section-footer",a]),children:t})}},107:function(e,t,c){"use strict";c.d(t,"a",(function(){return d}));var n=c(1),r=c(114),a=c.n(r),i=c(115),s=c.n(i),u=c(3),l=c(5),o=c(0);s.a.setOptions({renderer:new s.a.Renderer,highlight:function(e,t){var n=c(116),r=n.getLanguage(t)?t:"plaintext";return n.highlight(e,{language:r}).value},pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});var j=function(e){return a.a.renderToStaticMarkup(e)};function d(e){var t=e.type;switch(void 0===t?Object(u.j)("section type"):t){case"MD":return s()(e.text);case"JUMB":return j(Object(o.jsx)(l.k,Object(n.a)({},e)));case"CLOSE":return j(Object(o.jsx)(b,Object(n.a)({},e)));default:return"<div>".concat(e.text,"</div>")}}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,c=e.text,n=e.image;return Object(o.jsx)("div",{className:"close-template",style:{backgroundImage:n?"url(".concat(n.src,")"):null},children:Object(o.jsx)("div",{className:"close-template-inner",children:Object(o.jsxs)("div",{className:"text-center p-3",children:[t&&Object(o.jsx)("h1",{className:"close-template-title mb-1",children:t}),c&&Object(o.jsx)("h3",{className:"close-template-text",children:c})]})})})}},108:function(e,t,c){},109:function(e,t,c){},110:function(e,t,c){},112:function(e,t,c){"use strict";c.d(t,"d",(function(){return C})),c.d(t,"a",(function(){return w})),c.d(t,"c",(function(){return v})),c.d(t,"b",(function(){return y})),c.d(t,"e",(function(){return N}));var n=c(11),r=c(4),a=c(2),i=c(3),s=(c(108),c(1)),u=c(5),l=c(105),o=c(106),j=(c(109),c(0)),d=function(e){return Object(j.jsx)("div",{className:"",children:"TxtSectionEdit"})},b=function(e){return e.context.isEdit?Object(j.jsx)(d,Object(s.a)({},e)):Object(j.jsx)("div",{className:"",children:"Prev"})},O=Object(a.forwardRef)((function(e,t){return Object(j.jsxs)("div",{id:e.id,ref:t,className:Object(i.f)([e.className]),children:[Object(j.jsx)(o.c,{Icon:u.e.TextareaT}),Object(j.jsx)(o.a,{children:Object(j.jsx)(b,Object(s.a)({},e))}),Object(j.jsx)(o.b,{children:Object(j.jsxs)("div",{className:"actions",children:[Object(j.jsx)(l.a,Object(s.a)(Object(s.a)({},e),{},{label:"Delete"})),Object(j.jsx)(l.b,{context:e.context})]})})]})}));i.b&&(O.displayName="TextSection");var f=O,h=(c(110),Object(a.createContext)());function v(e){var t=e.data,r=void 0===t?Object(i.j)("section data props"):t,u=r.slug,l=r.type,o=Object(a.useRef)(),d=Object(a.useState)(e.isEdit||!1),b=Object(n.a)(d,2),O=b[0],v=b[1],x=Object(a.useMemo)((function(){return{isEdit:O,setEdit:v}}),[O]);if(!u)return null;var g=function(e){switch(e){case"MD":return Object(a.lazy)((function(){return c.e(7).then(c.bind(null,350))}));case"IMG":return Object(a.lazy)((function(){return c.e(9).then(c.bind(null,351))}));case"JUMB":return Object(a.lazy)((function(){return c.e(10).then(c.bind(null,352))}));case"CLOSE":return Object(a.lazy)((function(){return c.e(8).then(c.bind(null,353))}));default:return f}}(l);return Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading ..."}),children:Object(j.jsx)(h.Provider,{value:x,children:Object(j.jsx)(g,Object(s.a)(Object(s.a)({},e),{},{context:x,ref:o,className:Object(i.f)(["section",O&&"active"])}))})})}var x=c(104),g=c(23),p=c(28),m=c(27),N=new(function(e){Object(p.a)(c,e);var t=Object(m.a)(c);function c(e){return Object(g.a)(this,c),t.call(this,e)}return c}(i.d))("index/"),S=(new(function(e){Object(p.a)(c,e);var t=Object(m.a)(c);function c(e){return Object(g.a)(this,c),t.call(this,e)}return c}(i.d))("pages/"),["children"]),E=["pageSlug","sourceType"],y=function(e){var t=e.children;Object(r.a)(e,S);return Object(j.jsx)("div",{className:"miq-page-editor",children:t})};y.Sections=function(e){var t=e.pageSlug,c=void 0===t?Object(i.j)("page slug"):t,u=e.sourceType,l=void 0===u?Object(i.j)("page type(page/index)"):u,o=(Object(r.a)(e,E),Object(a.useState)({results:[]})),d=Object(n.a)(o,2),b=d[0],O=d[1];Object(a.useEffect)((function(){c&&x.b.list({source:c,source_type:l}).then((function(e){O(e)}))}),[c,l]);var f=function(e){console.log(e),O(Object(s.a)(Object(s.a)({},b),{},{results:b.results.map((function(t){return t.slug===e.slug?e:t}))}))};return Object(j.jsx)("div",{className:"miq-page-editor-sections",children:b.results.map((function(e){return Object(j.jsx)(v,{data:e,onDataChange:f},e.slug)}))})};var T=["sourceSlug","children"],I=["sourceSlug","request"];function C(e){var t=e.sourceSlug,c=(void 0===t&&Object(i.j)("source slug"),e.children);Object(r.a)(e,T);return Object(j.jsx)("div",{className:"",children:c})}var w=function(e){var t=e.sourceSlug,c=void 0===t?Object(i.j)("source slug"):t,s=e.request,u=void 0===s?Object(i.j)("request"):s,l=(Object(r.a)(e,I),Object(a.useReducer)(x.c,{results:[]})),o=Object(n.a)(l,2),d=o[0],b=o[1];return Object(a.useEffect)((function(){c&&x.b.list(u,{source:c}).then((function(e){b({type:"SET_SECTIONS",payload:e})}))}),[c,u]),Object(j.jsx)("div",{className:"editor-panel",children:Object(j.jsxs)("div",{className:"editor-content",children:[Object(j.jsx)("div",{className:"editor-label"}),Object(j.jsx)("div",{className:"editor-sections",children:d.results.map((function(e){return Object(j.jsx)(v,{data:e},e.slug)}))}),Object(j.jsx)("div",{className:"editor-actions"})]})})}},347:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return u}));var n=c(11),r=c(2),a=c(35),i=c(112),s=c(0);function u(e){var t=Object(r.useState)({}),c=Object(n.a)(t,2),u=c[0],l=c[1];return Object(r.useEffect)((function(){i.e.detail("current").then((function(e){return l(e)})).catch((function(e){}))}),[]),u&&u.slug?Object(s.jsx)(a.a,{title:"Site HomePage Settings",children:Object(s.jsx)(i.b,{slug:u.slug,children:Object(s.jsx)(i.b.Sections,{pageSlug:u.slug,sourceType:"index"})})}):null}}}]);
//# sourceMappingURL=6.f8edf40e.chunk.js.map