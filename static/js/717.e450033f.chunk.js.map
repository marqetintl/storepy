{"version":3,"file":"static/js/717.e450033f.chunk.js","mappings":"0RAeMA,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,EAAAA,MAAAA,KAAAA,WAGH,OAHGA,EAAAA,EAAAA,GAAAA,EAAAA,CAAAA,CAAAA,IAAAA,eAAAA,MACJ,SAAaC,GAAc,IAAD,EACxB,OAAOC,KAAKC,OAAO,CAAEC,QAAO,kBAAD,QAAC,EAAMF,KAAKG,YAAZ,aAAO,EAAWD,QAAWH,SACzD,EAHGD,CAA2BM,EAAAA,IAM3BC,EAAc,eAACF,EAAD,uDAAa,GAAb,OAClBG,EAAAA,EAAAA,IAAgDH,EAAM,iBAAkBL,IAE3D,SAASS,IACtB,IAEA,EAFYC,EAAAA,WAAiBC,EAAAA,GAGrBC,GADR,EAAQC,SAAR,EAAkBC,OAAlB,EAA0BC,KAA1B,EAAgCC,gBAChBC,EAAAA,EAAAA,KAAW,kBAAMV,EAAY,CAAEW,KAAM,YAAaC,cAA1DP,KACAP,EAAcO,EAAdP,KACFe,GAAOC,EAAAA,EAAAA,IAAyB,IAEtC,IAAKhB,EAAM,OAAO,KAElBiB,QAAQC,IAAR,OAAYX,QAAZ,IAAYA,OAAZ,EAAYA,EAAKP,MAEjB,IAAMmB,EAAWjB,EAAYF,GAE7B,OACE,UAAC,UAAD,CAAYoB,cAAe,CAAC,4BAA5B,WACE,SAAC,KAAD,CAAMC,QAASN,KAEf,SAACO,EAAD,CAAsBvB,OAAM,OAAEC,QAAF,IAAEA,OAAF,EAAEA,EAAMD,OAAQoB,SAAUA,OAK5D,IAAMG,EAAuB,SAAC,GAMvB,IALLvB,EAKI,EALJA,OACAoB,EAII,EAJJA,SAKMJ,GAAOC,EAAAA,EAAAA,IAAQ,CACnBO,uBAA6B,OAANxB,QAAM,IAANA,OAAA,EAAAA,EAAQwB,yBAAyB,EACxDC,uBAA6B,OAANzB,QAAM,IAANA,OAAA,EAAAA,EAAQyB,yBAAyB,EACxDC,eAAqB,OAAN1B,QAAM,IAANA,OAAA,EAAAA,EAAQ0B,iBAAiB,IAK1C,OAFAR,QAAQC,IAAInB,IAGV,UAAC,KAAD,CACEsB,QAASN,EACTW,SAAU,SAACC,GACTA,EAAEC,iBACFT,EACGU,aAAad,EAAKnB,QAClBkC,MAAK,SAACC,OACNC,OAAM,SAACL,QAPd,WAUE,iBAAKM,UAAU,SAAf,WACE,SAAC,cAAD,CAAeC,KAAK,wBAAwBD,UAAU,UACtD,SAAC,WAAD,CAAYE,MAAM,0CAGpB,iBAAKF,UAAU,SAAf,WACE,SAAC,cAAD,CAAeC,KAAK,wBAAwBD,UAAU,UACtD,SAAC,WAAD,CAAYE,MAAM,sDAGpB,iBAAKF,UAAU,SAAf,WACE,SAAC,cAAD,CAAeC,KAAK,gBAAgBD,UAAU,UAC9C,SAAC,WAAD,CAAYE,MAAM,4BAEpB,SAAC,YAAD,CAAaA,MAAM","sources":["../../../../packages/shopy-storejs/src/Setting.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport Form, { TextChoicesType, useForm } from '@miq/formjs';\nimport { useRequest } from '@miq/hookjs';\nimport Staff, { StaffModel, StaffService } from '@miq/staffjs';\nimport { SharedDataCtx } from '@miq/contextjs';\n\ntype ShopSettingConfigType = { show_active_suppliers: boolean; show_product_supplier: boolean; has_suppliers: boolean };\n\nexport type ShopSettingType = {\n  slug?: string;\n  currencies: TextChoicesType;\n  config: ShopSettingConfigType;\n};\n\nclass ShopSettingService extends StaffService<ShopSettingType> {\n  updateConfig(values: any) {\n    return this.update({ config: { ...this.data?.config, ...values } });\n  }\n}\n\nconst ShopSetting = (data: any = {}) =>\n  StaffModel<ShopSettingType, ShopSettingService>(data, 'shopy-settings', ShopSettingService);\n\nexport default function ShopSettingUpdateView() {\n  const ctx = React.useContext(SharedDataCtx);\n\n  const { products, orders, cats, shopy_settings } = ctx as any;\n  const { res } = useRequest(() => ShopSetting({ slug: 'current' }).retrieve());\n  const { data }: any = res;\n  const form = useForm<ShopSettingType>({});\n\n  if (!data) return null;\n\n  console.log(res?.data);\n\n  const instance = ShopSetting(data);\n\n  return (\n    <Staff.View requiredPerms={['store.change_shopsetting']}>\n      <Form context={form}></Form>\n\n      <ShopConfigUpdateForm config={data?.config} instance={instance} />\n    </Staff.View>\n  );\n}\n\nconst ShopConfigUpdateForm = ({\n  config,\n  instance,\n}: {\n  config: ShopSettingConfigType;\n  instance: ReturnType<typeof ShopSetting>;\n}) => {\n  const form = useForm({\n    show_active_suppliers: config?.show_active_suppliers || false,\n    show_product_supplier: config?.show_product_supplier || false,\n    has_suppliers: config?.has_suppliers || false,\n  });\n\n  console.log(config);\n\n  return (\n    <Form\n      context={form}\n      onSubmit={(e) => {\n        e.preventDefault();\n        instance\n          .updateConfig(form.values)\n          .then((r: any) => {})\n          .catch((e: any) => {});\n      }}\n    >\n      <div className=\"d-flex\">\n        <Form.Checkbox name=\"show_active_suppliers\" className=\"me-1\" />\n        <Form.Label value=\"Show active suppliers on homepage\" />\n      </div>\n\n      <div className=\"d-flex\">\n        <Form.Checkbox name=\"show_product_supplier\" className=\"me-1\" />\n        <Form.Label value=\"Show supplier on product detail page (if any)\" />\n      </div>\n\n      <div className=\"d-flex\">\n        <Form.Checkbox name=\"has_suppliers\" className=\"me-1\" />\n        <Form.Label value=\"Store has suppliers\" />\n      </div>\n      <Form.Submit value=\"Save\" />\n    </Form>\n  );\n};\n"],"names":["ShopSettingService","values","this","update","config","data","StaffService","ShopSetting","StaffModel","ShopSettingUpdateView","React","SharedDataCtx","res","products","orders","cats","shopy_settings","useRequest","slug","retrieve","form","useForm","console","log","instance","requiredPerms","context","ShopConfigUpdateForm","show_active_suppliers","show_product_supplier","has_suppliers","onSubmit","e","preventDefault","updateConfig","then","r","catch","className","name","value"],"sourceRoot":""}