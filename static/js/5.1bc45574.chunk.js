(this["webpackJsonp@store/client"]=this["webpackJsonp@store/client"]||[]).push([[5],{104:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return d}));var c=n(1),a=n(23),i=n(36),s=n(28),r=n(27),u=n(7),l=n.n(u),o=n(3),j={data:l.a.shape({slug:l.a.string}).isRequired,context:l.a.shape({isEdit:l.a.bool}).isRequired},b=new(function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"archive",value:function(e){return this.get("".concat(this.path).concat(e,"/archive/"))}}]),n}(o.d))("sections/"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{results:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,i=void 0===a?{}:a,s=i.results;switch(n){case"SET_SECTIONS":return Object(c.a)({},i);case"APPEND_SECTION":return s=addOrUpdateArrayObject(e.results,i,"slug",!0),Object(c.a)(Object(c.a)({},e),{},{results:s});case"PREPEND_SECTION":case"UPDATE_SECTION":return s=addOrUpdateArrayObject(e.results,i),Object(c.a)(Object(c.a)({},e),{},{results:s});case"REMOVE_SECTION":return s=e.results.filter((function(e){return e.slug!==i.slug})),Object(c.a)(Object(c.a)({},e),{},{results:s});default:return Object(c.a)({},e)}}},105:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return x}));var c=n(4),a=n(1),i=n(5),s=n(3),r=n(104),u=n(107),l=n(16),o=n(0),j=["imgSlug","section"],b=["onCreate","onUpdate"],d=["isUpdated"],O=["form","children"],f=function(e){console.log(e);var t=e.context,n=void 0===t?Object(s.j)("section context"):t,c=e.data,r=void 0===c?Object(s.j)("section data"):c;return Object(o.jsx)(i.c,Object(a.a)(Object(a.a)({},e),{},{Icon:i.e.Trash,className:"section-btn btn-danger",title:"Delete",onClick:function(){return n.remove(r.slug)}}))},h=function(e){var t=e.context,n=void 0===t?Object(s.j)("section context"):t,c=n.isEdit;return Object(o.jsx)(i.c,{Icon:c?i.e.Eye:i.e.PencilSquare,className:"section-btn",title:c?"Preview Mode":"Edit Mode",onClick:function(){return n.setEdit(!c)}})},v=function(e){var t=e.imgSlug,n=e.section,l=void 0===n?Object(s.j)("Section data"):n,O=Object(c.a)(e,j);if(!l.slug)return null;var f=l.type,h=O.onCreate,v=O.onUpdate,x=Object(c.a)(O,b),m=function(e){e.isUpdated;var n=Object(c.a)(e,d),i=n.slug,s=l.images;s.includes(i)||s.push(i);var o=Object(u.a)(Object(a.a)(Object(a.a)({},l),{},{image:n,images:s}));return r.b.patch(l.slug,{type:f,images:s,html:o},{type:f,images:l.images,html:l.html}).then((function(e){if(e.isUpdated){if(t&&v)return v(e);h&&h(e)}}))};return Object(o.jsx)(i.i,Object(a.a)(Object(a.a)({},x),{},{onCreate:m,onUpdate:m,slug:t}))},x=function(e){var t=e.form,n=void 0===t?Object(s.j)("form"):t,a=e.children;Object(c.a)(e,O);return Object(o.jsx)(l.a,{value:n,children:a})};x.TitleInput=function(e){return Object(o.jsx)(l.b.TextInput,Object(a.a)(Object(a.a)({placeholder:"Write title..."},e),{},{name:"title"}))},x.TextInput=function(e){return Object(o.jsx)(l.b.TextInput,Object(a.a)(Object(a.a)({placeholder:"Write text..."},e),{},{name:"text"}))}},106:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return r}));var c=n(3),a=n(0),i=function(e){var t=e.children,n=e.id,i=e.className;return Object(a.jsx)("div",{id:n,className:Object(c.f)(["section-body",i]),children:t})},s=function(e){var t=e.children,n=e.Icon,i=e.id,s=e.className;return Object(a.jsxs)("div",{id:i,className:Object(c.f)(["section-header",s]),children:[n&&Object(a.jsx)("div",{className:"",children:Object(a.jsx)(n,{className:"icon"})}),t]})},r=function(e){var t=e.children,n=e.id,i=e.className;return Object(a.jsx)("div",{id:n,className:Object(c.f)(["section-footer",i]),children:t})}},107:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c=n(1),a=n(114),i=n.n(a),s=n(115),r=n.n(s),u=n(3),l=n(5),o=n(0);r.a.setOptions({renderer:new r.a.Renderer,highlight:function(e,t){var c=n(116),a=c.getLanguage(t)?t:"plaintext";return c.highlight(e,{language:a}).value},pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});var j=function(e){return i.a.renderToStaticMarkup(e)};function b(e){var t=e.type;switch(void 0===t?Object(u.j)("section type"):t){case"MD":return r()(e.text);case"JUMB":return j(Object(o.jsx)(l.k,Object(c.a)({},e)));case"CLOSE":return j(Object(o.jsx)(d,Object(c.a)({},e)));default:return"<div>".concat(e.text,"</div>")}}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.text,c=e.image;return Object(o.jsx)("div",{className:"close-template",style:{backgroundImage:c?"url(".concat(c.src,")"):null},children:Object(o.jsx)("div",{className:"close-template-inner",children:Object(o.jsxs)("div",{className:"text-center p-3",children:[t&&Object(o.jsx)("h1",{className:"close-template-title mb-1",children:t}),n&&Object(o.jsx)("h3",{className:"close-template-text",children:n})]})})})}},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){"use strict";n.d(t,"d",(function(){return I})),n.d(t,"a",(function(){return k})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return E})),n.d(t,"e",(function(){return S}));var c=n(11),a=n(4),i=n(2),s=n(3),r=(n(108),n(1)),u=n(5),l=n(105),o=n(106),j=(n(109),n(0)),b=function(e){return Object(j.jsx)("div",{className:"",children:"TxtSectionEdit"})},d=function(e){return e.context.isEdit?Object(j.jsx)(b,Object(r.a)({},e)):Object(j.jsx)("div",{className:"",children:"Prev"})},O=Object(i.forwardRef)((function(e,t){return Object(j.jsxs)("div",{id:e.id,ref:t,className:Object(s.f)([e.className]),children:[Object(j.jsx)(o.c,{Icon:u.e.TextareaT}),Object(j.jsx)(o.a,{children:Object(j.jsx)(d,Object(r.a)({},e))}),Object(j.jsx)(o.b,{children:Object(j.jsxs)("div",{className:"actions",children:[Object(j.jsx)(l.a,Object(r.a)(Object(r.a)({},e),{},{label:"Delete"})),Object(j.jsx)(l.b,{context:e.context})]})})]})}));s.b&&(O.displayName="TextSection");var f=O,h=(n(110),Object(i.createContext)());function v(e){var t=e.data,a=void 0===t?Object(s.j)("section data props"):t,u=a.slug,l=a.type,o=Object(i.useRef)(),b=Object(i.useState)(e.isEdit||!1),d=Object(c.a)(b,2),O=d[0],v=d[1],x=Object(i.useMemo)((function(){return{isEdit:O,setEdit:v}}),[O]);if(!u)return null;var m=function(e){switch(e){case"MD":return Object(i.lazy)((function(){return n.e(7).then(n.bind(null,350))}));case"IMG":return Object(i.lazy)((function(){return n.e(9).then(n.bind(null,351))}));case"JUMB":return Object(i.lazy)((function(){return n.e(10).then(n.bind(null,352))}));case"CLOSE":return Object(i.lazy)((function(){return n.e(8).then(n.bind(null,353))}));default:return f}}(l);return Object(j.jsx)(i.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading ..."}),children:Object(j.jsx)(h.Provider,{value:x,children:Object(j.jsx)(m,Object(r.a)(Object(r.a)({},e),{},{context:x,ref:o,className:Object(s.f)(["section",O&&"active"])}))})})}var x=n(104),m=n(23),g=n(28),p=n(27),S=new(function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return n}(s.d))("index/"),N=(new(function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return n}(s.d))("pages/"),["children"]),y=["pageSlug","sourceType"],E=function(e){var t=e.children;Object(a.a)(e,N);return Object(j.jsx)("div",{className:"miq-page-editor",children:t})};E.Sections=function(e){var t=e.pageSlug,n=void 0===t?Object(s.j)("page slug"):t,u=e.sourceType,l=void 0===u?Object(s.j)("page type(page/index)"):u,o=(Object(a.a)(e,y),Object(i.useState)({results:[]})),b=Object(c.a)(o,2),d=b[0],O=b[1];Object(i.useEffect)((function(){n&&x.b.list({source:n,source_type:l}).then((function(e){O(e)}))}),[n,l]);var f=function(e){console.log(e),O(Object(r.a)(Object(r.a)({},d),{},{results:d.results.map((function(t){return t.slug===e.slug?e:t}))}))};return Object(j.jsx)("div",{className:"miq-page-editor-sections",children:d.results.map((function(e){return Object(j.jsx)(v,{data:e,onDataChange:f},e.slug)}))})};var _=["sourceSlug","children"],T=["sourceSlug","request"];function I(e){var t=e.sourceSlug,n=(void 0===t&&Object(s.j)("source slug"),e.children);Object(a.a)(e,_);return Object(j.jsx)("div",{className:"",children:n})}var k=function(e){var t=e.sourceSlug,n=void 0===t?Object(s.j)("source slug"):t,r=e.request,u=void 0===r?Object(s.j)("request"):r,l=(Object(a.a)(e,T),Object(i.useReducer)(x.c,{results:[]})),o=Object(c.a)(l,2),b=o[0],d=o[1];return Object(i.useEffect)((function(){n&&x.b.list(u,{source:n}).then((function(e){d({type:"SET_SECTIONS",payload:e})}))}),[n,u]),Object(j.jsx)("div",{className:"editor-panel",children:Object(j.jsxs)("div",{className:"editor-content",children:[Object(j.jsx)("div",{className:"editor-label"}),Object(j.jsx)("div",{className:"editor-sections",children:b.results.map((function(e){return Object(j.jsx)(v,{data:e},e.slug)}))}),Object(j.jsx)("div",{className:"editor-actions"})]})})}},354:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var c=n(11),a=n(1),i=n(4),s=n(2),r=n(12),u=n(16),l=n(5),o=n(35),j=n(23),b=n(36),d=n(28),O=n(27),f=new(function(e){Object(d.a)(n,e);var t=Object(O.a)(n);function n(e){return Object(j.a)(this,n),t.call(this,e)}return Object(b.a)(n,[{key:"patchSite",value:function(e,t,n){return this.patchPath("".concat(this.path).concat(e,"/site/"),t,n)}}]),n}(n(3).d))("settings/"),h=n(112),v=n(0),x=["setting"],m=["isUpdated"];function g(e){var t=e.setting,n=void 0===t?{}:t,c=Object(i.a)(e,x),s=Object(u.c)({is_live:n.is_live||!1});if(!n.slug)return null;var r=n&&n.is_live?"This site is open to the public":"This site is close to the public.";return Object(v.jsxs)(o.a.Section,{title:"Site Status",text:"Lock you site",children:[Object(v.jsxs)(u.b,{context:s,onSubmit:function(e){return e.preventDefault(),f.patch(n.slug,{is_live:s.values.is_live},{is_live:n.is_live}).then((function(e){var t=e.isUpdated,n=Object(i.a)(e,m);t&&c.setSetting(n)})).catch((function(e){return s.handleError(e)}))},children:[Object(v.jsx)(u.b.CheckboxInput,{name:"is_live",checked:s.values.is_live,label:r}),Object(v.jsx)("div",{className:"",children:Object(v.jsx)(u.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]}),Object(v.jsx)(h.c,{data:n.close_template,onDataChange:function(e){return c.setSetting(Object(a.a)(Object(a.a)({},n),{},{close_template:e}))}})]})}var p=["setting"],S=["isUpdated"],N=["isUpdated"],y=function(e){var t=e.setting,n=void 0===t?{}:t,c=Object(i.a)(e,p),s=Object(u.c)({contact_email:n.contact_email||"",ga_tracking:n.ga_tracking||"",fb_pixel:n.fb_pixel||""});return Object(v.jsxs)(u.b,{context:s,onSubmit:function(e){e.preventDefault();var t={};return Object.keys(s.values).forEach((function(e){t[e]=n[e]})),f.patch(n.slug,s.values,t).then((function(e){var t=e.isUpdated,n=Object(i.a)(e,S);t&&c.setSetting(n)})).catch((function(e){return s.handleError(e)}))},children:[Object(v.jsx)(o.a.Section,{title:"Logo",text:"",children:Object(v.jsx)(l.i,{slug:n&&n.logo_data?n.logo_data.slug:null,onCreate:function(e){return f.patch(n.slug,{logo:e.slug}).then((function(e){return c.setSetting(e)})).catch((function(e){}))},className:"site-logo-upload-button",children:Object(v.jsx)(l.f,Object(a.a)(Object(a.a)({},n.logo_data),{},{className:"site-logo"}))})}),Object(v.jsx)(o.a.Section,{title:"Contact",text:"What's the best way to contact you?",children:Object(v.jsx)(u.b.TextInput,{name:"contact_email",type:"email",error:s.errors.contact_email,placeholder:"Write your contact email ..."})}),Object(v.jsx)(o.a.Section,{title:"Social",text:"Display Your social media accounts."}),Object(v.jsxs)(o.a.Section,{title:"Analytics",text:"Set up third-party analytics.",children:[Object(v.jsx)(u.b.Field,{label:"Google Analytics Tracking Number",children:Object(v.jsx)(u.b.TextInput,{name:"ga_tracking"})}),Object(v.jsx)(u.b.Field,{label:"Facebook Pixel",children:Object(v.jsx)(u.b.TextInput,{name:"fb_pixel"})}),Object(v.jsx)("div",{className:"",children:Object(v.jsx)(u.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})]})};function E(e){var t=Object(s.useContext)(r.a),n=Object(s.useState)({}),a=Object(c.a)(n,2),l=a[0],j=a[1],b=t.site.settings;Object(s.useEffect)((function(){f.detail(b).then((function(e){e.slug&&j(e)})).catch((function(e){}))}),[b]);var d=t.site,O=Object(u.c)({name:d.name,domain:d.domain});if(!l.slug)return null;return Object(v.jsxs)(o.a,{title:"Site General Settings",children:[Object(v.jsx)(u.b,{context:O,onSubmit:function(e){e.preventDefault();var n=d.settings;if(n)return f.patchSite(n,{name:O.values.name,domain:O.values.domain},{name:d.name,domain:d.domain}).then((function(e){var n=e.isUpdated,c=Object(i.a)(e,N);n&&t.updateSite(c.site)})).catch((function(e){return O.handleError(e)}))},children:Object(v.jsxs)(o.a.Section,{title:"Site Details",children:[Object(v.jsxs)("div",{className:"mb-1",children:[Object(v.jsx)(u.b.Label,{value:"Site name"}),Object(v.jsx)(u.b.TextInput,{required:!0,name:"name",disabled:!Boolean(d.settings)})]}),Object(v.jsxs)("div",{className:"mb-1",children:[Object(v.jsx)(u.b.Label,{value:"Site domain"}),Object(v.jsx)(u.b.TextInput,{required:!0,name:"domain",disabled:!Boolean(d.settings)})]}),Object(v.jsx)("div",{className:"",children:Object(v.jsx)(u.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})}),Object(v.jsx)(g,{ctx:t,setting:l,setSetting:j}),Object(v.jsx)(y,{ctx:t,setting:l,setSetting:j})]})}}}]);
//# sourceMappingURL=5.1bc45574.chunk.js.map