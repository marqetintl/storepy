(this["webpackJsonp@store/clientjs"]=this["webpackJsonp@store/clientjs"]||[]).push([[9],{342:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));var n=c(17),a=c(29),s=c(23),r=c(22),i=new(function(e){Object(s.a)(c,e);var t=Object(r.a)(c);function c(){return Object(n.a)(this,c),t.apply(this,arguments)}return Object(a.a)(c,[{key:"publish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{})}},{key:"unpublish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{unpublish:!0})}},{key:"postAttribute",value:function(e,t){return this.postPath("".concat(this.path).concat(e,"/attribute/new/"),t)}},{key:"patchAttribute",value:function(e,t,c,n){return this.patchPath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"),c,n)}},{key:"deleteAttribute",value:function(e,t){return this.deletePath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"))}},{key:"patchPage",value:function(e,t,c){return this.patchPath("".concat(this.path).concat(e,"/page/"),t,c)}},{key:"swapCover",value:function(e,t){return this.patchPath("".concat(this.path).concat(e,"/swap-cover/"),{slug:t})}}]),c}(c(3).f))("products/")},361:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return v}));var n=c(1),a=c(18),s=c(21),r=c(8),i=c(2),u=c(24),l=c(10),o=(c(362),c(13)),d=c(9),b=c(3),h=c(5),j=c(342),p=c(0),O=Object(i.lazy)((function(){return Promise.all([c.e(0),c.e(26)]).then(c.bind(null,366))})),f=Object(i.lazy)((function(){return c.e(4).then(c.bind(null,369))})),m=Object(i.lazy)((function(){return c.e(0).then(c.bind(null,356))})),x=function(e){var t,c,l,O=Object(i.useState)({count:0}),f=Object(r.a)(O,2),m=f[0],x=f[1],v=Object(i.useState)("pending"),g=Object(r.a)(v,2),k=g[0],P=g[1],N=Object(i.useState)(!0),w=Object(r.a)(N,2),_=w[0],y=w[1],S=Object(i.useContext)(o.a).perms,q=e.location.search;Object(i.useEffect)((function(){var e=new URLSearchParams(q);Object(s.a)(e.values()).filter((function(e){return e})).length||(e=null),j.a.list(e).then((function(e){x(e),P("success")})).catch((function(e){P("failed")}))}),[q]);var C=Object(d.l)(S.perms,["shop.add_product"]);if("pending"===k)return Object(p.jsx)(h.q,{});if("failed"===k)return Object(p.jsx)("div",{children:"Something went wrong. Please reload the page!"});var A=new URLSearchParams(q);function T(){var t=new URL(window.location.href);e.history.push("".concat(t.pathname,"?").concat(A))}return Object(p.jsxs)(d.g,{title:"Products (".concat(m.count,")"),back:e.back,actions:Object(p.jsx)(d.d,{label:"Add product",to:"".concat(Object(b.g)(e.match.url),"new/"),disabled:!C,className:"btn-primary"}),children:[Object(p.jsx)(d.g.Section,{actions:Object(p.jsx)(h.b,{onClick:function(){return y(!_)},children:"Filter"}),children:_&&Object(p.jsxs)("form",{action:".",method:"GET",children:[Object(p.jsxs)("div",{className:"d-flex p-2",children:[Object(p.jsx)("input",(t={type:"checkbox",className:"miq-checkbox",id:"published"},Object(a.a)(t,"className","me-2"),Object(a.a)(t,"onChange",(function(e){e.target.checked?A.set("status","published"):A.delete("status"),T()})),Object(a.a)(t,"checked",Boolean(A.get("status"))||!1),t)),Object(p.jsx)("label",{htmlFor:"published",children:"Published"})]}),Object(p.jsxs)("select",{className:"miq-select ms-1",value:A.get("cat")||"all",onChange:function(e){var t=e.target.value;t&&"all"!==t?A.set("cat",t):A.delete("cat"),T()},children:[Object(p.jsx)("option",{value:"all",children:"All categories"}),null===m||void 0===m||null===(c=m.categories)||void 0===c||null===(l=c.items)||void 0===l?void 0:l.map((function(e){return Object(p.jsx)("option",{value:e.value,children:e.label},e.slug)}))]})]})}),(null===m||void 0===m?void 0:m.results)&&Object(p.jsx)(d.g.Section,{className:"product-table mb-3",children:Object(p.jsx)(h.o,{className:"w-100",items:m.results,headers:["","","Add to carts","Price (CFA)","Status"],renderItem:function(t){var c;return Object(p.jsxs)(h.u.Tr,{className:"border-bottom",children:[Object(p.jsx)(h.u.Td,{className:"",children:Object(p.jsx)(h.k,Object(n.a)(Object(n.a)({},t.cover_data),{},{className:"rounded"}))}),Object(p.jsxs)(h.u.Td,{className:"",children:[Object(p.jsx)(u.b,{to:"".concat(Object(b.g)(e.match.url)).concat(t.slug,"/"),children:Object(p.jsx)("div",{className:"fw-bold",title:t.name,children:t.name})}),Object(p.jsxs)("div",{className:"text-muted text-sm",children:[t.category_data&&Object(p.jsx)("span",{className:"me-1",children:t.category_data.name}),t.is_pre_sale&&Object(p.jsx)("span",{className:"me-1",children:"Pre sale"})]})]}),Object(p.jsx)(h.u.Td,{className:"d-none d-md-table-cell text-sm text-center",children:t.add_to_cart_count}),Object(p.jsx)(h.u.Td,{className:"text-center",children:t.is_on_sale?Object(p.jsx)("span",{className:"text-danger",children:t.sale_price}):Object(p.jsx)("span",{className:"",children:t.retail_price})}),Object(p.jsx)(h.u.Td,{className:"d-none d-md-table-cell text-sm text-center",children:Object(p.jsx)(d.i,{is_published:null===t||void 0===t||null===(c=t.page)||void 0===c?void 0:c.is_published,pill:!0})})]},t.slug)},pagination:{count:m.count,next:m.next,previous:m.previous,onPreviousClick:function(){if(m&&m.previous)return P("pending"),j.a.get(m.previous).then((function(e){return x(e),P("succcess")})).catch((function(e){return P("failed")}))},onNextClick:function(){if(m&&m.next)return P("pending"),j.a.get(m.next).then((function(e){return x(e),P("succcess")})).catch((function(e){return P("failed")}))}}})})]})};function v(e){var t=e.match,c=t.path,a=t.url;return Object(p.jsxs)(l.c,{children:[Object(p.jsx)(d.e,{path:"".concat(c,"new/"),render:function(e){return Object(p.jsx)(O,Object(n.a)({back:Object(b.g)(a)},e))},requiredPerms:["shop.add_product"]}),Object(p.jsx)(d.e,{path:"".concat(c,"old/:prodSlug/"),render:function(e){return Object(p.jsx)(m,Object(n.a)({back:Object(b.g)(a)},e))},requiredPerms:["shop.change_product"]}),Object(p.jsx)(d.e,{requiredPerms:["shop.view_product"],render:function(t){return Object(p.jsx)(g,Object(n.a)(Object(n.a)({},t),{},{back:e.back}))}})]})}var g=function(e){var t=e.match,c=t.path,a=t.url,s=Object(i.useState)({loading:!0,data:null,error:null}),u=Object(r.a)(s,2),o=u[0],h=u[1],O=e.location.search,m=new URLSearchParams(O).get("cat")||"all";return Object(i.useEffect)((function(){console.log("requst list"),j.a.list(m).then((function(e){h({loading:!1,data:e,error:null})})).catch((function(e){h({loading:!1,data:null,error:e})}))}),[m]),Object(p.jsxs)(l.c,{children:[Object(p.jsx)(d.e,{path:"".concat(c,":prodSlug/"),render:function(e){return Object(p.jsx)(f,Object(n.a)(Object(n.a)({back:Object(b.g)(a)},e),{},{QState:o,setQState:h}))},requiredPerms:["shop.change_product"]}),Object(p.jsx)(d.e,{requiredPerms:["shop.view_product"],render:function(t){return Object(p.jsx)(x,Object(n.a)(Object(n.a)({},t),{},{back:e.back}))}})]})}},362:function(e,t,c){}}]);
//# sourceMappingURL=9.f9f9673a.chunk.js.map