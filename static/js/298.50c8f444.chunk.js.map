{"version":3,"file":"static/js/298.50c8f444.chunk.js","mappings":"iUAgBMA,EAAoBC,EAAAA,MAAW,kBAAM,gCACrCC,EAAyBD,EAAAA,MAAW,kBAAM,yDAE1CE,EAAc,SAAC,GAAD,IAAGC,EAAH,EAAGA,EAAH,OAClB,iBAAKC,UAAU,yBAAf,WACE,SAAC,QAAD,WACE,gBAAKA,UAAU,GAAf,UACE,iBAAKC,MAAO,CAAEC,OAAQ,OAAQC,UAAW,OAAQC,SAAU,SAA3D,WACE,gBAAKJ,UAAU,YAAf,UACE,SAAC,KAAD,CAAiBK,MAAON,EAAEM,MAAOC,SAAS,WAG5C,gBAAKN,UAAU,OAAOC,MAAO,CAAEG,SAAU,SAAUG,OAAQ,GAA3D,UACE,SAAC,MAAD,kBAAgBR,EAAES,MAAlB,IAAwBC,UAAWC,EAAAA,GAAAA,KAAYC,IAAE,EAACX,UAAU,gBAMpE,gBAAKA,UAAU,YAAf,UACE,SAACH,EAAD,CAAwBe,KAAK,iCAK7BC,EAAa,SAAC,GAA6D,IAAD,EAA1Dd,EAA0D,EAA1DA,EAAGe,EAAuD,EAAvDA,OACvB,OACE,SAAC,UAAD,CACEC,MAAM,WACNH,KAAK,gBACLI,SACE,SAAC,UAAD,CAAYL,GAAG,OAAOM,cAAe,CAAC,qBAAsBjB,UAAU,oBAAtE,yBAIFiB,cAAe,CAAC,sBARlB,SAUsB,IAAnBlB,EAAEM,MAAMa,QACP,iBAAKlB,UAAU,2CAAf,WACE,cAAGA,UAAU,mBAAb,uDACA,gBAAKA,UAAU,OAAf,UACE,SAAC,UAAD,CAAYW,GAAG,OAAOM,cAAe,CAAC,qBAAsBjB,UAAU,yBAAtE,qCAMJ,iCACE,SAAC,KAAD,CAAuBmB,WAAU,UAAEpB,EAAES,YAAJ,aAAE,EAAQW,aAE1CpB,EAAEM,MAAMe,KAAI,SAACC,GAAD,aACX,mBAAC,KAAD,CAAiBA,KAAMA,EAAYP,OAAAA,EAAQQ,OAAM,UAAEvB,EAAES,YAAJ,aAAE,EAAQc,OAAUC,IAAKF,EAAKG,WAGjF,gBAAKxB,UAAU,GAAf,UACE,SAAC,MAAD,kBAAgBD,EAAES,MAAlB,IAAwBC,UAAWC,EAAAA,GAAAA,KAAYC,IAAE,aAQ9C,SAASc,IACtB,OAAyBC,EAAAA,EAAAA,KAAjBC,EAAR,EAAQA,IAAQC,GAAhB,YACA,GAAiBC,EAAAA,EAAAA,MAAVf,GAAP,gBAEAgB,EAAAA,EAAAA,GAAe,CAAEC,SAAUH,EAAKI,WAAYC,UAAWL,EAAKM,aAE5D,IAAMnC,EAAI,IAAIoC,EAAAA,GAASR,GACvB,OAAK5B,EAAEqC,WAGL,UAAC,KAAD,YACE,SAAC,KAAD,CAAOC,KAAK,aAAaC,SAAS,SAACxC,EAAD,CAAmBC,EAAAA,EAAGe,OAAAA,OACxD,SAAC,KAAD,CAAOuB,KAAK,MAAMC,SAAS,SAAC3C,EAAD,OAC3B,SAAC,KAAD,CAAO4C,OAAK,EAACD,SAAS,SAACzB,EAAD,CAAkBd,EAAAA,EAAGe,OAAAA,SANtB","sources":["../../../../shopy/shopy-storejs/src/Product/IndexView.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Routes, Route, useSearchParams } from 'react-router-dom';\n\nimport './indexview.scss';\n\nimport Staff from '@miq/staffjs';\nimport { Response } from '@miq/utiljs';\nimport { Pagination, Viewports } from '@miq/componentjs';\n\nimport { TProduct } from '../types';\nimport { useCrudEmitter } from '../events';\n\nimport { ProductListFilterForm } from './forms';\nimport { useProductListRequest } from './utils';\nimport { ProductCardList, ProductListItem } from './components';\n\nconst ProductCreateView = React.lazy(() => import('./CreateView'));\nconst ProductStaffUpdateView = React.lazy(() => import('./UpdateView'));\n\nconst UpdateRoute = ({ r }: { r: Response; params?: URLSearchParams }) => (\n  <div className=\"d-grid grid-xl-4 gap-1\">\n    <Viewports.XLUp>\n      <div className=\"\">\n        <div style={{ height: '100%', overflowY: 'auto', position: 'fixed' }}>\n          <div className=\"mb-1 mt-2\">\n            <ProductCardList items={r.items} itempath=\"../\" />\n          </div>\n\n          <div className=\"pb-3\" style={{ position: 'sticky', bottom: 0 }}>\n            <Pagination {...r.data} component={Staff.Link} to className=\"\" />\n          </div>\n        </div>\n      </div>\n    </Viewports.XLUp>\n\n    <div className=\"span-xl-3\">\n      <ProductStaffUpdateView back=\"/staff/store/products/\" />\n    </div>\n  </div>\n);\n\nconst IndexRoute = ({ r, params }: { r: Response; params: URLSearchParams }) => {\n  return (\n    <Staff.View\n      title=\"Products\"\n      back=\"/staff/store/\"\n      actions={\n        <Staff.Link to=\"new/\" requiredPerms={['store.add_product']} className=\"btn btn-primary-3\">\n          Add product\n        </Staff.Link>\n      }\n      requiredPerms={['store.view_product']}\n    >\n      {r.items.length === 0 ? (\n        <div className=\"text-center p-staff-list-empty py-3 my-3\">\n          <p className=\"fw-light text-md\">Add products to your shop to get started</p>\n          <div className=\"my-4\">\n            <Staff.Link to=\"new/\" requiredPerms={['store.add_product']} className=\"btn btn-primary btn-md\">\n              Add a new product\n            </Staff.Link>\n          </div>\n        </div>\n      ) : (\n        <>\n          <ProductListFilterForm categories={r.data?.categories} />\n\n          {r.items.map((item: TProduct) => (\n            <ProductListItem item={item} {...{ params, stages: r.data?.stages }} key={item.slug} />\n          ))}\n\n          <div className=\"\">\n            <Pagination {...r.data} component={Staff.Link} to />\n          </div>\n        </>\n      )}\n    </Staff.View>\n  );\n};\n\nexport default function ProductStaffIndexView() {\n  const { res, ...rest } = useProductListRequest();\n  const [params] = useSearchParams();\n\n  useCrudEmitter({ onUpdate: rest.updateItem, onDestroy: rest.removeItem });\n\n  const r = new Response(res);\n  if (!r.isSuccess) return null;\n\n  return (\n    <Routes>\n      <Route path=\":prodSlug/\" element={<UpdateRoute {...{ r, params }} />} />\n      <Route path=\"new\" element={<ProductCreateView />} />\n      <Route index element={<IndexRoute {...{ r, params }} />} />\n    </Routes>\n  );\n}\n"],"names":["ProductCreateView","React","ProductStaffUpdateView","UpdateRoute","r","className","style","height","overflowY","position","items","itempath","bottom","data","component","Staff","to","back","IndexRoute","params","title","actions","requiredPerms","length","categories","map","item","stages","key","slug","ProductStaffIndexView","useProductListRequest","res","rest","useSearchParams","useCrudEmitter","onUpdate","updateItem","onDestroy","removeItem","Response","isSuccess","path","element","index"],"sourceRoot":""}