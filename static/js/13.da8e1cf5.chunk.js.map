{"version":3,"sources":["shop/public/components.jsx","shop/public/ProductView.jsx"],"names":["ProductPriceDisplay","product","retail_price","is_on_sale","className","sale_price","amountWithSymbol","CategoryLinks","props","ctx","useContext","SharedDataCtx","isLoaded","categories","map","cat","href","url","title","name","showCover","cover","src_mobile","thumb_sq","name_truncated","slug","SearchForm","search","location","push","useRef","debounce","history","query","URLSearchParams","action","required","initialValue","get","onChange","e","value","target","length","delete","set","current","path","URL","window","pathname","placeholder","minLength","maxLength","BreadCrumbs","breadcrumbs","role","item","label","PreSaleForm","form","useForm","number","email","ig","useState","isOpen","setOpen","labelFirst","onClick","Icon","Icons","Telephone","context","method","Label","TextInput","isValid","setErrors","errors","error","type","Submit","ContactNavLink","ProductPublicView","useEffect","id","images","mobileOnly","style","position","top","is_pre_sale","description","whiteSpace","has_attributes","attributes","attr"],"mappings":"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","file":"static/js/13.da8e1cf5.chunk.js","sourcesContent":["import ReactDOM from \"react-dom\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\n\nimport { SharedDataCtx } from \"@miq/contexts\";\n// import Form, { useForm } from \"@miq/form\";\nimport { Img, Picture, SearchTextInput } from \"@miq/components\";\nimport { IS_DEV, debounce } from \"@miq/utils\";\n\nexport const ProductPriceDisplay = ({ product }) => {\n  if (!product || !product.retail_price) return null;\n\n  if (product.is_on_sale) {\n    return (\n      <div className=\"product-price-display d-flex align-items-center\">\n        <div className=\"text-danger fw-bold me-2\">{product.sale_price.amountWithSymbol}</div>\n        <div className=\"text-line-through\">{product.retail_price.amountWithSymbol}</div>\n      </div>\n    );\n  }\n  return (\n    <div className=\"product-price-display d-flex align-items-center\">\n      <div className=\"fw-bold\">{product.retail_price.amountWithSymbol}</div>\n    </div>\n  );\n};\n\nexport const CategoryLinks = (props) => {\n  const ctx = useContext(SharedDataCtx);\n\n  if (!ctx.isLoaded || !ctx.categories) return null;\n\n  // console.log(ctx.categories);\n\n  return (\n    <div className=\"category-links pb-2\">\n      {ctx.categories?.map((cat) => {\n        return (\n          <div className=\"item w-25 w-md-15\" key={cat.slug}>\n            <a href={cat.url} className=\"\" title={cat.name}>\n              {props.showCover && cat?.cover && (\n                <Picture {...cat.cover} src_mobile={cat?.cover?.thumb_sq || cat?.cover?.src_mobile} />\n              )}\n              <div className=\"info\">{cat.name_truncated}</div>\n            </a>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport function SearchForm(props) {\n  const { search } = props.location;\n\n  const push = useRef(debounce((url) => props?.history?.push(url), 300));\n\n  const query = new URLSearchParams(search);\n  const handleSearch = ({ e }) => {\n    const { value } = e.target;\n\n    if (!value || value.length < 3) {\n      query.delete(\"q\");\n    } else {\n      query.set(\"q\", e.target.value);\n    }\n\n    if (!push.current) return;\n\n    const path = new URL(window.location.href);\n    push.current(`${path.pathname}?${query}`);\n  };\n\n  return (\n    <form action=\"/shop/\" className=\"product-search-form\">\n      <SearchTextInput\n        required\n        initialValue={query.get(\"q\")}\n        onChange={handleSearch}\n        className=\"search-input\"\n        placeholder={\"Cherchez un produit ...\"}\n        minLength={3}\n        maxLength={99}\n      />\n    </form>\n  );\n}\n\nexport const BreadCrumbs = (props) => {\n  const { isLoaded, breadcrumbs } = useContext(SharedDataCtx);\n\n  if (!isLoaded || !breadcrumbs) {\n    return null;\n  }\n\n  return (\n    <section className=\"miq-breadcrumbs\" role={\"navigation\"} aria-label=\"breadcrumbs\">\n      {breadcrumbs.map((item) => {\n        return (\n          <a href={item.path} className=\"item\" key={item.label} title={item.title} aria-label={item.title}>\n            {item.label}\n          </a>\n        );\n      })}\n    </section>\n  );\n};\n\n//\n// NOT USED\nexport const ProductDetailImages = ({ product, ...props }) => {\n  const { images = [], cover } = product;\n  const [active, setActive] = useState(cover);\n\n  const [root, setRoot] = useState(null);\n\n  useEffect(() => {\n    if (IS_DEV) return;\n\n    const el = document.getElementById(\"product-detail-images\");\n    if (el) setRoot(el);\n  }, [setRoot]);\n\n  if (!product) return null;\n\n  const render = (\n    <div className=\"product-images d-flex flex-column-reverse flex-sm-row\">\n      <div className=\"thumbnails d-flex flex-row flex-sm-column me-1\">\n        <Img src={cover.thumb} className=\"mb-1\" onClick={() => setActive(cover)} />\n\n        {images.map((img) => (\n          <Img src={img.thumb} onClick={() => setActive(img)} className=\"mb-1\" key={img.src} />\n        ))}\n      </div>\n\n      <div className=\"\">\n        <Img src={active.src} />\n      </div>\n    </div>\n  );\n\n  return IS_DEV ? render : root ? ReactDOM.createPortal(render, root) : null;\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { SharedDataCtx } from \"@miq/contexts\";\nimport Form, { useForm } from \"@miq/form\";\nimport { IconButton, Icons, ImgsHorizontalGallery } from \"@miq/components\";\n\nimport { ProductPriceDisplay, BreadCrumbs } from \"./components\";\n\nconst PreSaleForm = (props) => {\n  const form = useForm({ name: \"\", number: \"\", email: \"\", ig: \"\" });\n  const [isOpen, setOpen] = useState(false);\n\n  return (\n    <div className=\"\">\n      <p className=\"mb-3\">\n        Voulez-vous être contacté dès que ce produit est disponible?\n        <br />\n        (dans environ 2 mois).\n      </p>\n\n      {!isOpen && (\n        <div className=\"d-flex justify-content-center mb-3\">\n          <IconButton\n            labelFirst\n            label=\"Contactez-moi\"\n            onClick={() => setOpen(true)}\n            Icon={Icons.Telephone}\n            className=\"fw-bold btn-primary-3\"\n          />\n        </div>\n      )}\n\n      {isOpen && (\n        <div className=\"mb-3\">\n          <Form context={form} method=\"POST\">\n            <div className=\"mb-1\">\n              <Form.Label value=\"Nom et prénom\" />\n              <Form.TextInput required name=\"name\" minLength={3} />\n            </div>\n            <div className=\"mb-1\">\n              <Form.Label value=\"Numéro de téléphone/whatsapp\" />\n              <Form.TextInput\n                required\n                name=\"number\"\n                isValid={({ value }) => {\n                  if (!value) {\n                    form.setErrors({ ...form.errors, number: \"Empty value\" });\n                    return false;\n                  }\n                  // console.log(\"valid\", value);\n                  return true;\n                }}\n                error={form.errors.number}\n                minLength={8}\n              />\n            </div>\n            <div className=\"mb-1\">\n              <Form.Label value=\"Adresse email (facultatif)\" />\n              <Form.TextInput name=\"email\" type=\"email\" minLength={4} />\n            </div>\n            <div className=\"mb-2\">\n              <Form.Label value=\"Instagram (facultatif)\" />\n              <Form.TextInput name=\"ig\" minLength={4} placeholder={`feminity`} />\n            </div>\n\n            <div className=\"mb-3\">\n              <Form.Submit value=\"Contactez-moi\" className=\"btn btn-primary w-100\" />\n            </div>\n          </Form>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst ContactNavLink = (props) => {\n  return (\n    <div className=\"my-3\">\n      <a href=\"/\" target=\"_blank\" className=\"btn btn-primary\">\n        Contactez nous\n      </a>\n    </div>\n  );\n};\n\nexport default function ProductPublicView(props) {\n  const { product } = useContext(SharedDataCtx);\n\n  useEffect(() => {\n    // navigator.geolocation.getCurrentPosition(\n    //   (pos) => {\n    //     console.log(pos);\n    //   },\n    //   (err) => console.warn(\"permission was rejected\", err)\n    // );\n  }, []);\n\n  if (!product) return null;\n\n  return (\n    <div className=\"product-view\" id=\"ProductView\">\n      <div className=\"my-3 px-2\">\n        <BreadCrumbs />\n      </div>\n\n      <div className=\"d-flex flex-column flex-md-row justify-content-center\">\n        <div className=\"w-100 w-md-65\">\n          <div className=\"\">\n            <ImgsHorizontalGallery images={[product.cover, ...product?.images]} mobileOnly />\n          </div>\n        </div>\n        <div className=\"w-100 w-md-35 p-1\">\n          <div style={{ position: \"sticky\", top: 0 }}>\n            <h1 className=\"text-md fw-lighter\">{product.name}</h1>\n            <ProductPriceDisplay product={product} />\n\n            {product?.is_pre_sale ? <PreSaleForm product={product} /> : <ContactNavLink />}\n\n            {product.description && (\n              <div className=\"product-info-meta mb-3\" style={{ whiteSpace: \"pre-wrap\" }}>\n                {product.description}\n              </div>\n            )}\n\n            <ul className=\"mb-3\">\n              {product?.has_attributes && <li className=\"fw-bold mb-1\">Détails</li>}\n              {product?.attributes && (\n                <li className=\"mb-2\">\n                  <ul className=\"\">\n                    {product?.attributes?.map((attr) => {\n                      return (\n                        <li key={attr.name}>\n                          <span>{attr.name} : </span>\n                          <span>{attr.value}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                </li>\n              )}\n\n              <li className=\"fw-bold\">Livraison</li>\n              <li className=\"mb-2\">\n                <p className=\"mb-2\">\n                  Livraison standard gratuite sur Cotonou pour les commandes de 50000 CFA et plus.\n                  <br />\n                  Le délai de traitement de la livraison standard pour cet article est estimé à 1 à 5 jours ouvrables.\n                </p>\n                <a href=\".\" className=\"text-underline\">\n                  Consultez notre page Livraison\n                </a>\n              </li>\n            </ul>\n\n            {/* <div className=\"mb-3\">\n              <div className=\"text-md\">Porter avec</div>\n            </div> */}\n          </div>\n        </div>\n      </div>\n\n      {/* <div className=\"p-2\">\n        <p className=\"text-md\">Voir les styles semblables</p>\n      </div> */}\n    </div>\n  );\n}\n"],"sourceRoot":""}