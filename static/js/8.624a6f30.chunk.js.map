{"version":3,"sources":["../../../../packages/miq-sharedjs/src/editor/src/Section/CloseTemplateSection/index.jsx"],"names":["CloseSectionPreview","props","handleUpload","sectionData","isUpdated","onDataChange","context","setEdit","className","section","data","imgSlug","image","slug","onCreate","onUpdate","CloseTemplateSection","forwardRef","ref","form","useForm","title","text","type","handleSave","name","value","html","render","sectionServices","patch","then","id","getClassName","TextInput","placeholder","onSave","maxLength","TextArea","IS_DEV","displayName"],"mappings":"8QAkBMA,EAAsB,SAACC,GAC3B,IAAMC,EAAe,SAACC,GAChBA,EAAYC,YACdH,EAAMI,aAAaF,GACnBF,EAAMK,QAAQC,SAAQ,KAI1B,OACE,qBAAKC,UAAU,GAAf,SACE,cAAC,IAAD,CACEC,QAASR,EAAMS,KACfC,QAASV,EAAMS,KAAKE,MAAQX,EAAMS,KAAKE,MAAMC,KAAO,KACpDC,SAAUZ,EACVa,SAAUb,EAJZ,SAME,cAAC,IAAD,eAASD,EAAMS,KAAKE,aAMtBI,EAAuBC,sBAAW,SAAChB,EAAOiB,GAC9C,MAAsBjB,EAAdS,YAAR,MAAe,GAAf,EACMS,EAAOC,YAAQ,CAAEC,MAAOX,EAAKW,OAAS,GAAIC,KAAMZ,EAAKY,MAAQ,KAC3DT,EAAeH,EAAfG,KAAMU,EAASb,EAATa,KAERC,EAAa,SAAC,GAAqB,IAAD,EAAlBC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,MAC1B,GAAKb,EAAL,CAEA,IAAMc,EAAOC,YAAO,2BAAKlB,GAAN,gBAAYa,QAAOE,EAAOC,KAE7C,OAAOG,IAAgBC,MAAMjB,GAAtB,GAA8BU,QAA9B,cAAqCE,EAAOC,GAA5C,qBAAmDC,GAAnD,IAA2DI,MAAK,YAA4B,IAAzB3B,EAAwB,EAAxBA,UAAwB,iBAC5FA,GAEFH,EAAMK,QAAQC,SAAQ,QAK5B,OACE,cAAC,IAAD,CAAcmB,MAAOP,EAArB,SACE,sBAAKa,GAAI/B,EAAM+B,GAAUd,MAAOV,UAAWyB,YAAa,CAAChC,EAAMO,YAA/D,UACE,qBAAKA,UAAU,YAAf,qCAGA,eAAC,IAAD,WACE,qBAAKA,UAAU,OAAf,SACE,cAAC,IAAK0B,UAAN,CAAgBT,KAAK,QAAQU,YAAY,kBAAkBC,OAAQZ,EAAYa,UAAW,OAG5F,qBAAK7B,UAAU,OAAf,SACE,cAAC,IAAK8B,SAAN,CAAeb,KAAK,OAAOU,YAAY,iBAAiBC,OAAQZ,EAAYa,UAAW,OAGzF,cAACrC,EAAD,eAAyBC,eASpBe,YAMXuB,MACFvB,EAAqBwB,YAAc","file":"static/js/8.624a6f30.chunk.js","sourcesContent":["// import PropTypes from 'prop-types';\n\nimport { getClassName, IS_DEV } from '@miq/utils';\nimport { forwardRef } from 'react';\nimport { Icons, Img } from '@miq/components';\nimport Form, { FormProvider, useForm } from '@miq/form';\nimport { SectionBody } from '../section-ui';\n\nimport render from '../section-renderers';\nimport { sectionRequiredProps, sectionServices } from '../utils';\n\nimport './close-section.scss';\nimport { SectionImgUploadButton } from '../section-components';\n\n/**\n * CLOSE TEMPLATE SECTION\n */\n\nconst CloseSectionPreview = (props) => {\n  const handleUpload = (sectionData) => {\n    if (sectionData.isUpdated) {\n      props.onDataChange(sectionData);\n      props.context.setEdit(false);\n    }\n  };\n\n  return (\n    <div className=\"\">\n      <SectionImgUploadButton\n        section={props.data}\n        imgSlug={props.data.image ? props.data.image.slug : null}\n        onCreate={handleUpload}\n        onUpdate={handleUpload}\n      >\n        <Img {...props.data.image} />\n      </SectionImgUploadButton>\n    </div>\n  );\n};\n\nconst CloseTemplateSection = forwardRef((props, ref) => {\n  const { data = {} } = props;\n  const form = useForm({ title: data.title || '', text: data.text || '' });\n  const { slug, type } = data;\n\n  const handleSave = ({ name, value }) => {\n    if (!slug) return;\n\n    const html = render({ ...data, type, [name]: value });\n\n    return sectionServices.patch(slug, { type, [name]: value, html }).then(({ isUpdated, ...res }) => {\n      if (isUpdated) {\n        // props.onDataChange(res);\n        props.context.setEdit(false);\n      }\n    });\n  };\n\n  return (\n    <FormProvider value={form}>\n      <div id={props.id} {...{ ref }} className={getClassName([props.className])}>\n        <div className=\"text-bold\">Customize your landing.</div>\n        {/* <SectionHeader Icon={Icons.TextareaT} /> */}\n\n        <SectionBody>\n          <div className=\"mb-1\">\n            <Form.TextInput name=\"title\" placeholder=\"Write title ...\" onSave={handleSave} maxLength={50} />\n          </div>\n\n          <div className=\"mb-1\">\n            <Form.TextArea name=\"text\" placeholder=\"Write text ...\" onSave={handleSave} maxLength={99} />\n          </div>\n\n          <CloseSectionPreview {...props} />\n        </SectionBody>\n\n        {/* <SectionFooter className=\"border-0\"></SectionFooter> */}\n      </div>\n    </FormProvider>\n  );\n});\n\nexport default CloseTemplateSection;\n\nCloseTemplateSection.propTypes = {\n  ...sectionRequiredProps,\n};\n\nif (IS_DEV) {\n  CloseTemplateSection.displayName = 'CloseTemplateSection';\n}\n"],"sourceRoot":""}