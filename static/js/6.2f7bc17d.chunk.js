(this["webpackJsonp@store/client"]=this["webpackJsonp@store/client"]||[]).push([[6],{341:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var c=a(17),s=a(28),r=a(22),l=a(20),i=new(function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"publish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{})}},{key:"unpublish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{unpublish:!0})}},{key:"postAttribute",value:function(e,t){return this.postPath("".concat(this.path).concat(e,"/attribute/new/"),t)}},{key:"patchAttribute",value:function(e,t,a,c){return this.patchPath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"),a,c)}},{key:"deleteAttribute",value:function(e,t){return this.deletePath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"))}},{key:"patchPage",value:function(e,t,a){return this.patchPath("".concat(this.path).concat(e,"/page/"),t,a)}}]),a}(a(3).f))("products/")},343:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a(4),s=a(0),r=["product"],l=function(e){var t=e.product;Object(c.a)(e,r);return t?Object(s.jsx)("div",{className:"product-supplier-data",children:Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Supplier"}),Object(s.jsx)("span",{className:"",children:t.supplier_name})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Item id"}),Object(s.jsx)("span",{className:"",children:t.supplier_item_id})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Category"}),Object(s.jsx)("span",{className:"",children:t.supplier_item_category})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Item cost"}),Object(s.jsxs)("span",{className:"",children:[t.supplier_item_cost," (",t.supplier_item_cost_currency,")"]})]}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:t.supplier_item_url,className:"text-underline",target:"_blank",rel:"noopener noreferrer",children:"View supplier page"})})]})}):null}},344:function(e,t,a){"use strict";a.d(t,"b",(function(){return j})),a.d(t,"a",(function(){return m}));var c=a(21),s=a(4),r=a(2),l=a(6),i=a(9),n=a(5),o=a(341),u=a(0),d=["product"],b=["image"],j=function(e){var t=e.product,a=Object(s.a)(e,d);return t&&t.slug?Object(u.jsx)(n.k,{multiple:!0,className:"btn-primary-3",onCreate:function(e){return e=e.filter((function(e){return e&&e.slug})),o.a.patch(t.slug,{images:[].concat(Object(c.a)(t.images),Object(c.a)(e.map((function(e){return e.slug}))))}).then((function(e){a.onCreateSuccess&&a.onCreateSuccess(e)})).catch((function(e){a.onCreateError&&a.onCreateError(e)}))}}):null},m=function(e){var t=e.image,a=Object(s.a)(e,b),c=Object(l.c)({alt_text:(null===t||void 0===t?void 0:t.alt_text)||""}),n=null===t||void 0===t?void 0:t.slug,o=null===t||void 0===t?void 0:t.alt_text,d=c.setValues;return Object(r.useEffect)((function(){d({alt_text:o})}),[n,d,o]),t&&t.slug?Object(u.jsx)(l.a,{value:c,className:a.className,children:Object(u.jsx)(i.h,{required:!0,image:t,onSuccess:a.onSuccess,onError:a.onError,placeholder:"Add an alternative text ..."})}):null}},345:function(e,t,a){"use strict";a.d(t,"b",(function(){return S})),a.d(t,"a",(function(){return E}));var c=a(1),s=a(4),r=a(2),l=a(9),i=a(6),n=a(341),o=a(344),u=a(0),d=["form","product"],b=["showLabel","label"],j=["placeholder"],m=["showLabel","label"],p=["categories"],v=["showLabel","label"],O=["showLabel","label"],h=["showLabel","label"],x=["showLabel","label"],_=["showLabel","label"],g=["stages","name"],f=["children","context","fields","prodSlug"],N=["onSuccess","onError"];function S(e){var t,a,b,j,m,p,v,O=e.form,h=e.product,x=Object(s.a)(e,d),_=x.setProduct,g=x.toast,f=x.categories,N=null===h||void 0===h?void 0:h.slug;Object(r.useEffect)((function(){}),[N]);return Object(u.jsx)(E,{context:O,onSubmit:function(e){e.preventDefault();var t={retail_price:O.values.retail_price,is_on_sale:O.values.is_on_sale,is_pre_sale:O.values.is_pre_sale};return O.values.category&&(t.category=O.values.category),O.values.is_on_sale&&(t.sale_price=O.values.sale_price),O.values.is_pre_sale&&(t.is_pre_sale_text=O.values.is_pre_sale_text),n.a.patch(h.slug,t).then((function(e){null===_||void 0===_||_(Object(c.a)(Object(c.a)({},h),e)),null===g||void 0===g||g.success({message:"Product updated."})})).catch((function(e){return null===g||void 0===g||g.error({message:"Could not update product."}),O.handleError(e)}))},children:Object(u.jsxs)("div",{className:"d-grid grid-md-3 gap-3",children:[Object(u.jsx)("div",{className:"span-md-2",children:Object(u.jsxs)(l.g.Section,{title:"Details",actions:Object(u.jsx)(l.i,{is_published:null===h||void 0===h||null===(t=h.page)||void 0===t?void 0:t.is_published,pill:!0}),children:[Object(u.jsx)("div",{className:"mb-1",children:Object(u.jsx)(y,{error:O.errors.name})}),f&&Object(u.jsx)("div",{className:"mb-1",children:Object(u.jsx)(w,{categories:f,error:null===O||void 0===O||null===(a=O.errors)||void 0===a?void 0:a.category})}),Object(u.jsxs)("div",{className:"mb-1",children:[Object(u.jsx)("div",{className:"mb-1",children:Object(u.jsx)(L,{error:null===O||void 0===O||null===(b=O.errors)||void 0===b?void 0:b.retail_price})}),Object(u.jsxs)("div",{className:"mb-1",children:[Object(u.jsx)("div",{className:"d-flex align-items-center mb-1",children:Object(u.jsx)(k,{error:null===O||void 0===O||null===(j=O.errors)||void 0===j?void 0:j.is_pre_sale})}),O.values.is_pre_sale&&Object(u.jsx)("div",{className:"mb-2",children:Object(u.jsx)(I,{error:null===O||void 0===O||null===(m=O.errors)||void 0===m?void 0:m.is_pre_sale_text})})]}),Object(u.jsx)("div",{className:"d-flex align-items-center mb-1",children:Object(u.jsx)(P,{error:null===O||void 0===O||null===(p=O.errors)||void 0===p?void 0:p.is_on_sale})}),O.values.is_on_sale&&Object(u.jsx)("div",{className:"mb-2",children:Object(u.jsx)(C,{error:null===O||void 0===O||null===(v=O.errors)||void 0===v?void 0:v.sale_price})})]}),Object(u.jsx)("div",{className:"my-3",children:Object(u.jsx)(i.b.Submit,{value:"Update product",className:"btn btn-primary-3"})})]})}),Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)(l.k,{slug:null===h||void 0===h?void 0:h.cover,data:h.cover_data,onCreate:function(e){n.a.patch(h.slug,{cover:e.slug}).then((function(e){null===_||void 0===_||_(Object(c.a)(Object(c.a)({},h),e)),null===g||void 0===g||g.success({message:"Product cover updated."})})).catch((function(e){null===g||void 0===g||g.error({message:"Could not upload cover image."})}))},onUpdate:function(e){return null===g||void 0===g||g.success({message:"Product cover updated."}),null===_||void 0===_?void 0:_(Object(c.a)(Object(c.a)({},h),{},{cover_data:e}))},onDelete:function(){return null===_||void 0===_?void 0:_(Object(c.a)(Object(c.a)({},h),{},{cover_data:null,cover:null}))},className:"mb-1"}),Object(u.jsx)(o.a,{image:null===h||void 0===h?void 0:h.cover_data})]})]})})}var y=function(e){var t=e.showLabel,a=void 0===t||t,r=e.label,l=void 0===r?"Name":r,n=Object(s.a)(e,b),o=n.placeholder,d=void 0===o?"Give a name to the item":o,m=Object(s.a)(n,j);return Object(u.jsxs)(u.Fragment,{children:[a&&Object(u.jsx)(i.b.Label,{value:l,className:"mb-1"}),Object(u.jsx)(i.b.TextInput,Object(c.a)(Object(c.a)({},m),{},{required:!0,name:"name",placeholder:d,maxLength:99}))]})},w=function(e){var t,a=e.showLabel,l=void 0===a||a,n=e.label,o=void 0===n?"Category":n,d=Object(s.a)(e,m),b=d.categories,j=Object(s.a)(d,p);return Object(u.jsxs)(u.Fragment,{children:[l&&Object(u.jsx)(i.b.Label,{value:o}),Object(u.jsx)(i.b.SelectInput,Object(c.a)(Object(c.a)({},j),{},{required:!0,name:"category",nullValue:{label:"Select category"},children:null===b||void 0===b||null===(t=b.items)||void 0===t?void 0:t.map((function(e){return Object(r.createElement)(i.b.SelectInput.Option,Object(c.a)(Object(c.a)({},e),{},{key:e.value}))}))}))]})},L=function(e){var t=e.showLabel,a=void 0===t||t,r=e.label,l=void 0===r?"Retail price":r,n=Object(s.a)(e,v);return Object(u.jsxs)(u.Fragment,{children:[a&&Object(u.jsx)(i.b.Label,{value:l,id:"retail_price_label"}),Object(u.jsx)(i.b.TextInput,Object(c.a)(Object(c.a)({},n),{},{required:!0,type:"number",name:"retail_price","aria-describedby":"retail_price_label",min:"0",step:"0.01"}))]})},k=function(e){e.showLabel;var t=e.label,a=void 0===t?"Pre-sale":t,r=Object(s.a)(e,O);return Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)(i.b.CheckboxInput,Object(c.a)(Object(c.a)({},r),{},{name:"is_pre_sale",className:"me-2"})),Object(u.jsx)(i.b.Label,{value:a})]})},I=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(i.b.Label,{value:"Pre sale text",id:"is_pre_sale_text_label",className:"miq-checkbox-label"}),Object(u.jsx)(i.b.TextAreaX,{name:"is_pre_sale_text","aria-describedby":"is_pre_sale_text_label"})]})},P=function(e){e.showLabel;var t=e.label,a=void 0===t?"On Sale":t,r=Object(s.a)(e,h);return Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)(i.b.CheckboxInput,Object(c.a)(Object(c.a)({},r),{},{name:"is_on_sale",className:"me-2"})),Object(u.jsx)(i.b.Label,{value:a})]})},C=function(e){var t=e.showLabel,a=void 0===t||t,r=e.label,l=void 0===r?"Sale price":r,n=Object(s.a)(e,x);return Object(u.jsxs)(u.Fragment,{children:[a&&Object(u.jsx)(i.b.Label,{value:l,id:"sale_price_label",className:"miq-checkbox-label"}),Object(u.jsx)(i.b.TextInput,Object(c.a)(Object(c.a)({},n),{},{required:!0,type:"number",name:"sale_price","aria-describedby":"sale_price_label",min:"0",step:"0.01"}))]})},E=function(e){var t=e.children,a=e.context,r=e.fields,l=void 0===r?[]:r,o=e.prodSlug,d=Object(s.a)(e,f),b=(d.onSuccess,d.onError,Object(s.a)(d,N));return Object(u.jsx)(i.b,Object(c.a)(Object(c.a)({},b),{},{context:a,onSubmit:d.onSubmit||function(e){if(a&&l){e.preventDefault();var t={};if(l.forEach((function(e){var c=a.values[e];null!=c&&(t[e]=c)})),o)return n.a.patch(o,t).then((function(e){var t;null===d||void 0===d||null===(t=d.onSuccess)||void 0===t||t.call(d,e)})).catch((function(e){var t,c;return d.onError?null===d||void 0===d||null===(t=d.onError)||void 0===t?void 0:t.call(d,e):null===a||void 0===a||null===(c=a.handleError)||void 0===c?void 0:c.call(a,e)}))}},children:t}))};E.NameInput=y,E.CategoryInput=w,E.RetailPriceInput=L,E.PresaleCheckboxInput=k,E.PresaleTextInput=I,E.OnSaleCheckboxInput=P,E.SalePriceInput=C,E.StageSelect=function(e){var t,a=e.showLabel,l=void 0===a||a,n=e.label,o=void 0===n?"Stage":n,d=Object(s.a)(e,_),b=d.stages,j=d.name,m=Object(s.a)(d,g);return Object(u.jsxs)(u.Fragment,{children:[l&&Object(u.jsx)(i.b.Label,{value:o}),Object(u.jsx)(i.b.SelectInput,Object(c.a)(Object(c.a)({},m),{},{required:!0,name:j||"stage",nullValue:{label:"Select stage"},children:null===b||void 0===b||null===(t=b.map)||void 0===t?void 0:t.call(b,(function(e){return Object(r.createElement)(i.b.SelectInput.Option,Object(c.a)(Object(c.a)({},e),{},{key:e.value}))}))}))]})}},365:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));var c=a(4),s=a(21),r=a(1),l=a(8),i=a(2),n=a(9),o=a(6),u=a(5),d=(a(3),a(349)),b=a(0),j=["order_slug"],m=function(e){var t=e.order_slug,a=Object(c.a)(e,j),s=Object(i.useState)(!1),u=Object(l.a)(s,2),m=u[0],p=u[1],v=Object(o.c)({supplier_name:"shein",url:"https://us.shein.com/Floral-Lace-Underwire-Garter-Lingerie-Set-p-1925944-cat-1862.html"});return Object(b.jsx)(n.g.Section,{title:(null===a||void 0===a?void 0:a.title)||"Ajouter un produit",className:"supplier-product-add-section mt-3",children:Object(b.jsxs)(o.b,{context:v,onSubmit:function(e){e.preventDefault(),p(!0);var c=v.values.url;switch(v.values.supplier_name){case"zara":return null;default:return c.includes("shein")?d.a.getSheinProductData(t,{url:c}).then((function(e){return p(!1),v.setValue("url",""),null===a||void 0===a?void 0:a.onSuccess(e)})).catch((function(e){return v.setErrors(Object(r.a)(Object(r.a)({},v.errors),{},{url:"Something went wrong."})),p(!1),null===a||void 0===a?void 0:a.onError(data)})):null}},className:"supplier-product-add-form",children:[m&&Object(b.jsx)("div",{className:"my-3",children:"Getting product data. Please wait ..."}),Object(b.jsxs)("div",{className:"d-flex flex-column flex-md-row",children:[Object(b.jsx)(o.b.TextInput,{required:!0,name:"url",type:"url",error:v.errors.url,placeholder:"Add product source url ...",className:"me-1",disabled:m}),Object(b.jsx)(o.b.Submit,{value:"Get data",className:"btn btn-primary-3",disabled:m})]})]})})},p=a(345),v=a(343),O=a(348),h=["item"],x={order_id:"",items_stage:"",currency:"",is_paid:!1,total_cost:""};function _(e){var t=e.match.params.sOrderSlug,a=Object(i.useState)(null),c=Object(l.a)(a,2),j=c[0],v=c[1],O=Object(i.useState)([]),h=Object(l.a)(O,2),_=h[0],f=h[1],N=(Object(i.useContext)(u.v),Object(o.c)(x)),S=N.setValues;if(Object(i.useEffect)((function(){d.a.detail(t).then((function(e){v(e),S({order_id:e.order_id||"",items_stage:e.items_stage||"",currency:e.currency||"",is_paid:e.is_paid||!1,total_cost:e.total_cost||""})})).catch((function(e){!e.response||e.response.status}))}),[t,S]),!j)return null;console.log(j.stages);var y=function(e,a){e.preventDefault();var c={};Array.isArray(a)?a.forEach((function(e){var t=N.values[e];null!=t&&(c[e]=t)})):c=Object(r.a)({},N.values),d.a.patch(t,c).then((function(e){})).catch((function(e){N.handleError(e)}))};return Object(b.jsx)(n.g,{back:null===e||void 0===e?void 0:e.back,title:"Modifier une commande",actions:Object(b.jsx)("div",{}),className:"supplier-order-update-view",children:Object(b.jsxs)("div",{className:"d-grid grid-md-3 gap-3",children:[Object(b.jsxs)("div",{className:"span-md-2",children:[Object(b.jsx)(m,{order_slug:t,onSuccess:function(e){return v(e)}}),Object(b.jsx)(n.g.Section,{className:"order-items mb-3",children:j.items.map((function(e){var t=_.includes(e.slug);return Object(b.jsxs)("div",{className:"",children:[Object(b.jsx)("div",{className:"",children:Object(b.jsx)("input",{type:"checkbox",checked:t,onChange:function(){f(t?_.filter((function(t){return t!==e.slug})):[].concat(Object(s.a)(_),[e.slug]))}})}),Object(b.jsx)(g,{item:e,categories:j.categories,onUpdate:function(e){v(Object(r.a)(Object(r.a)({},j),{},{items:j.items.map((function(t){return t.slug===e.slug?e:t}))}))}})]},e.slug)}))})]}),Object(b.jsx)("div",{className:"",children:Object(b.jsxs)("div",{className:"",style:{position:"sticky",top:0},children:[Object(b.jsx)(o.b,{context:N,onSubmit:y,className:"order-update-form",children:Object(b.jsxs)(n.g.Section,{title:"Order details",children:[Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsx)(o.b.Label,{value:"Order Id",className:"mb-1"}),Object(b.jsx)(o.b.TextInput,{required:!0,name:"order_id",error:N.errors.order_id,placeholder:"Order iD",maxLength:99})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(b.jsx)(o.b.CheckboxInput,{name:"is_paid",error:N.errors.is_paid,className:"me-2"}),Object(b.jsx)(o.b.Label,{value:"Paid"})]}),N.values.is_paid&&Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsx)(o.b.Label,{value:"Total cost",id:"total_cost_label"}),Object(b.jsx)(o.b.TextInput,{required:!0,type:"number",name:"retailtotal_cost_price",error:N.errors.total_cost,"aria-describedby":"total_cost_label",min:"0",step:"0.01"})]}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(o.b.Submit,{value:"Save",className:"btn btn-primary-3"})})]})}),Object(b.jsx)(o.b,{context:N,onSubmit:function(e){return y(e,["items_stage"])},className:"order-update-form",children:Object(b.jsxs)(n.g.Section,{title:"Stage",text:"This will update the stage of all products in this order.",children:[Object(b.jsx)(p.a.StageSelect,{name:"items_stage",stages:null===j||void 0===j?void 0:j.stages,error:N.errors.items_stage,showLabel:!1,className:"mb-1"}),Object(b.jsx)("div",{className:"",children:Object(b.jsx)(o.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})})]})})]})})}var g=function(e){var t,a,s=e.item,d=Object(c.a)(e,h),j=Object(i.useState)(d.isEdit||!1),m=Object(l.a)(j,2),x=m[0],_=m[1],g=Object(o.c)({name:s.name||"",category:s.category||"",retail_price:(null===s||void 0===s?void 0:s.retail_price)||0,supplier_item_cost:(null===s||void 0===s?void 0:s.supplier_item_cost)||0,is_pre_sale:s.is_pre_sale||!1,is_pre_sale_text:s.is_pre_sale_text||""});if(!(null===s||void 0===s?void 0:s.slug))return null;g.values;var f=g.errors;return Object(b.jsxs)("div",{className:"order-item mb-2 border-1 rounded ",children:[Object(b.jsxs)("div",{className:"d-flex p-1",children:[Object(b.jsx)("div",{className:"me-1",children:Object(b.jsx)(u.j,Object(r.a)(Object(r.a)({},s.cover_data),{},{className:"rounded"}))}),Object(b.jsxs)("div",{className:"flex-1 detail",children:[Object(b.jsxs)("div",{className:"fw-bold",title:s.name,children:[Object(b.jsx)("span",{className:"me-2",children:s.name}),(null===s||void 0===s||null===(t=s.page)||void 0===t?void 0:t.is_published)&&Object(b.jsx)(n.i,{is_published:null===s||void 0===s||null===(a=s.page)||void 0===a?void 0:a.is_published,pill:!0,short:!0})]}),Object(b.jsx)("div",{className:"",children:s.is_on_sale?Object(b.jsx)("span",{className:"text-danger",children:s.sale_price}):Object(b.jsx)("span",{className:"",children:s.retail_price})}),Object(b.jsxs)("div",{className:"mb-1 text-sm",children:[s.category_data&&Object(b.jsx)("span",{className:"",children:s.category_data.name}),s.is_pre_sale&&Object(b.jsx)("span",{className:"",children:"Pre sale"}),"/ ",s.add_to_cart_count]}),Object(b.jsxs)("div",{className:"actions d-flex justify-content-between align-items-center",children:[Object(b.jsx)("div",{children:Object(b.jsx)(u.b,{onClick:function(){return _(!x)},className:"quick-update-btn btn-secondary-3",children:"Quick update"})}),Object(b.jsx)("a",{href:O.a.productUpdate(s.slug),target:"_blank",className:"update-btn btn btn-primary-2",children:"Update \xbb"})]})]})]}),x&&Object(b.jsx)(p.a,{context:g,prodSlug:s.slug,fields:["name","category","retail_price","is_pre_sale","is_pre_sale_text","supplier_item_cost"],className:"order-item-form mb-2",onSuccess:d.onUpdate,children:Object(b.jsxs)("div",{className:"d-grid grid-md-5 gap-2",children:[Object(b.jsxs)("div",{className:"span-md-3 mb-2",children:[Object(b.jsx)(p.a.NameInput,{error:f.name,className:"mb-1"}),Object(b.jsx)(p.a.CategoryInput,{categories:null===d||void 0===d?void 0:d.categories,error:f.category,className:"mb-1"}),Object(b.jsx)(p.a.RetailPriceInput,{error:f.retail_price,className:"mb-1"}),Object(b.jsx)(o.b.Label,{value:"Supplier item cost (".concat(s.supplier_item_cost_currency,")")}),Object(b.jsx)(o.b.TextInput,{name:"supplier_item_cost",className:""})]}),Object(b.jsxs)("div",{className:"span-md-2",children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("div",{className:"mb-1",children:Object(b.jsx)(p.a.PresaleCheckboxInput,{error:f.is_pre_sale,className:"mb-1"})}),g.values.is_pre_sale&&Object(b.jsx)("div",{className:"mb-1",children:Object(b.jsx)(p.a.PresaleTextInput,{error:f.is_pre_sale_text})}),Object(b.jsx)(o.b.Submit,{value:"Update",className:"btn btn-primary-3 w-100"})]}),Object(b.jsx)(v.a,{product:s})]})]})})]})}}}]);
//# sourceMappingURL=6.2f7bc17d.chunk.js.map