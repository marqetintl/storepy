(this["webpackJsonp@store/clientjs"]=this["webpackJsonp@store/clientjs"]||[]).push([[0],{345:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return j})),r.d(t,"b",(function(){return p}));var n=r(21),c=r(4),a=r(2),l=r(342),s=r(346),i=r(0),u=["image"],o=["prodSlug","product","toast"],b=["product"],d=function(e){var t=e.image,r=Object(c.a)(e,u),n=(null===t||void 0===t?void 0:t.alt_text)||"",l=Object(s.i)({alt_text:n}),o=null===t||void 0===t?void 0:t.slug,b=l.setValues;return Object(a.useEffect)((function(){b({alt_text:n})}),[o,b,n]),t&&t.slug?Object(i.jsx)(s.b,{value:l,className:r.className,children:Object(i.jsx)(s.c,{required:!0,image:t,onSuccess:r.onSuccess,onError:r.onError,placeholder:"Add an alternative text ..."})}):null};function j(e){var t=e.prodSlug,r=e.product,n=e.toast;Object(c.a)(e,o);if(!t||!(null===r||void 0===r?void 0:r.page))return null;var a=r.page.is_published,u=e.form,b=e.onPublishSuccess,d=e.onUnpublishSuccess,j=e.onError;return Object(i.jsxs)(s.a,{id:e.id,onClick:function(){return a?l.a.unpublish(t).then((function(e){return null===d||void 0===d?void 0:d(e)})).catch((function(e){return null===n||void 0===n?void 0:n.error({message:SHOP_MSGS.default})})):l.a.publish(t).then((function(e){return null===b||void 0===b?void 0:b(e)})).catch((function(e){var t=e.response,r=void 0===t?{}:t;r.data||null===n||void 0===n||n.error({message:SHOP_MSGS.default});var c=r.data,a=c.retail_price,l=c.category,s=c.page;return a&&(null===n||void 0===n||n.error({message:SHOP_MSGS.product.publish_error_retail_price})),l&&(u&&u.handleError(e),null===n||void 0===n||n.error({message:SHOP_MSGS.product.publish_error_category})),s&&(null===n||void 0===n||n.error({message:SHOP_MSGS.product.publish_error_page})),null===j||void 0===j?void 0:j(e)}))},className:Object(s.h)(["staff-product-publish-button",a?"btn-danger":"btn-primary",e.className]),children:[a?"Unpublish":"Publish"," product"]})}var p=function(e){var t=e.product,r=Object(c.a)(e,b);return t&&t.slug?Object(i.jsx)(s.e,{multiple:!0,className:"btn-primary-3",onCreate:function(e){return e=e.filter((function(e){return e&&e.slug})),l.a.patch(t.slug,{images:[].concat(Object(n.a)(t.images),Object(n.a)(e.map((function(e){return e.slug}))))}).then((function(e){r.onCreateSuccess&&r.onCreateSuccess(e)})).catch((function(e){r.onCreateError&&r.onCreateError(e)}))}}):null}},346:function(e,t,r){"use strict";var n=r(9);r.d(t,"c",(function(){return n.h})),r.d(t,"g",(function(){return n.i}));var c=r(5);r.d(t,"a",(function(){return c.b})),r.d(t,"e",(function(){return c.l})),r.d(t,"d",(function(){return c.k})),r.d(t,"f",(function(){return c.q}));var a=r(3);r.d(t,"h",(function(){return a.j}));var l=r(6);r.d(t,"i",(function(){return l.c})),r.d(t,"b",(function(){return l.a}))},347:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(4),c=r(0),a=["product"],l=function(e){var t=e.product;Object(n.a)(e,a);return t?Object(c.jsx)("div",{className:"product-supplier-data",children:Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"",children:"Supplier"}),Object(c.jsx)("span",{className:"",children:t.supplier_name})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"",children:"Item id"}),Object(c.jsx)("span",{className:"",children:t.supplier_item_id})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"",children:"Category"}),Object(c.jsx)("span",{className:"",children:t.supplier_item_category})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("span",{className:"",children:"Item cost"}),Object(c.jsxs)("span",{className:"",children:[t.supplier_item_cost," (",t.supplier_item_cost_currency,")"]})]}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:t.supplier_item_url,className:"text-underline",target:"_blank",rel:"noopener noreferrer",children:"View supplier page"})})]})}):null}},348:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n=r(1),c=r(4),a=r(2),l=(r(9),r(6)),s=r(3),i=r(342),u=(r(345),r(344),r(0)),o=["showLabel","label"],b=["placeholder"],d=["label","text"],j=["placeholder"],p=["showLabel","label"],m=["categories"],v=["showLabel","label"],O=["showLabel","label"],h=["showLabel","label"],x=["showLabel","label"],f=["showLabel","label"],g=["stages","name"],_=["children","context","fields","prodSlug"],S=["onSuccess","onError"];s.n;var N=function(e){var t=e.showLabel,r=void 0!==t&&t,a=e.label,s=void 0===a?"Name":a,i=Object(c.a)(e,o),d=i.placeholder,j=void 0===d?"Give a name to the item":d,p=Object(c.a)(i,b);return Object(u.jsxs)(u.Fragment,{children:[r&&Object(u.jsx)(l.b.Label,{value:s,className:"mb-1"}),Object(u.jsx)(l.b.TextInput,Object(n.a)(Object(n.a)({},p),{},{required:!0,name:"name",placeholder:j,maxLength:99}))]})},y=function(e){var t,r=e.showLabel,s=void 0!==r&&r,i=e.label,o=void 0===i?"Category":i,b=Object(c.a)(e,p),d=b.categories,j=Object(c.a)(b,m);return Object(u.jsxs)(u.Fragment,{children:[s&&Object(u.jsx)(l.b.Label,{value:o}),Object(u.jsx)(l.b.SelectInput,Object(n.a)(Object(n.a)({},j),{},{required:!0,name:"category",nullValue:{label:"S\xe9lectionnez une cat\xe9gorie"},children:null===d||void 0===d||null===(t=d.items)||void 0===t?void 0:t.map((function(e){return Object(a.createElement)(l.b.SelectInput.Option,Object(n.a)(Object(n.a)({},e),{},{key:e.value}))}))}))]})},L=function(e){var t=e.showLabel,r=void 0!==t&&t,a=e.label,s=void 0===a?"Retail price":a,i=Object(c.a)(e,v);return Object(u.jsxs)(u.Fragment,{children:[r&&Object(u.jsx)(l.b.Label,{value:s,id:"retail_price_label"}),Object(u.jsx)(l.b.TextInput,Object(n.a)(Object(n.a)({},i),{},{required:!0,type:"number",name:"retail_price","aria-describedby":"retail_price_label",min:"0",step:"0.01"}))]})},w=function(e){e.showLabel;var t=e.label,r=void 0===t?"Pre-sale":t,a=Object(c.a)(e,O);return Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)(l.b.CheckboxInput,Object(n.a)(Object(n.a)({},a),{},{name:"is_pre_sale",className:"me-2"})),Object(u.jsx)(l.b.Label,{value:r})]})},I=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(l.b.Label,{value:"Pre sale text",id:"is_pre_sale_text_label",className:"miq-checkbox-label"}),Object(u.jsx)(l.b.TextAreaX,{name:"is_pre_sale_text","aria-describedby":"is_pre_sale_text_label"})]})},k=function(e){e.showLabel;var t=e.label,r=void 0===t?"On Sale":t,a=Object(c.a)(e,h);return Object(u.jsxs)("div",{className:"d-flex align-items-center",children:[Object(u.jsx)(l.b.CheckboxInput,Object(n.a)(Object(n.a)({},a),{},{name:"is_on_sale",className:"me-2"})),Object(u.jsx)(l.b.Label,{value:r})]})},C=function(e){var t=e.showLabel,r=void 0!==t&&t,a=e.label,s=void 0===a?"Sale price":a,i=Object(c.a)(e,x);return Object(u.jsxs)(u.Fragment,{children:[r&&Object(u.jsx)(l.b.Label,{value:s,id:"sale_price_label",className:"miq-checkbox-label"}),Object(u.jsx)(l.b.TextInput,Object(n.a)(Object(n.a)({},i),{},{required:!0,type:"number",name:"sale_price","aria-describedby":"sale_price_label",min:"0",step:"0.01"}))]})},E=function(e){var t=e.children,r=e.context,a=e.fields,s=void 0===a?[]:a,o=e.prodSlug,b=Object(c.a)(e,_),d=(b.onSuccess,b.onError,Object(c.a)(b,S));return Object(u.jsx)(l.b,Object(n.a)(Object(n.a)({},d),{},{context:r,onSubmit:b.onSubmit||function(e){if(r&&s){e.preventDefault();var t={};if(s.forEach((function(e){var n=r.values[e];null!=n&&(t[e]=n)})),o)return i.a.patch(o,t).then((function(e){var t;null===b||void 0===b||null===(t=b.onSuccess)||void 0===t||t.call(b,e)})).catch((function(e){return b.onError?b.onError(e):r.handleError(e)}))}},children:t}))};E.NameInput=N,E.DescField=function(e){var t=e.label,r=e.text,a=Object(c.a)(e,d),s=a.placeholder,i=void 0===s?"Give a description to the item":s,o=Object(c.a)(a,j);return Object(u.jsx)(l.b.Field,{label:t,text:r,children:Object(u.jsx)(l.b.TextAreaX,Object(n.a)(Object(n.a)({},o),{},{name:"description",placeholder:i}))})},E.CategoryInput=y,E.RetailPriceInput=L,E.PresaleCheckboxInput=w,E.PresaleTextInput=I,E.OnSaleCheckboxInput=k,E.SalePriceInput=C,E.StageSelect=function(e){var t,r=e.showLabel,s=void 0!==r&&r,i=e.label,o=void 0===i?"Stage":i,b=Object(c.a)(e,f),d=b.stages,j=b.name,p=Object(c.a)(b,g);return Object(u.jsxs)(u.Fragment,{children:[s&&Object(u.jsx)(l.b.Label,{value:o}),Object(u.jsx)(l.b.SelectInput,Object(n.a)(Object(n.a)({},p),{},{required:!0,name:j||"stage",nullValue:{label:"Select stage"},children:null===d||void 0===d||null===(t=d.map)||void 0===t?void 0:t.call(d,(function(e){return Object(a.createElement)(l.b.SelectInput.Option,Object(n.a)(Object(n.a)({},e),{},{key:e.value}))}))}))]})}},352:function(e,t,r){"use strict";r.d(t,"b",(function(){return j})),r.d(t,"a",(function(){return p}));var n=r(4),c=r(1),a=r(5),l=r(6),s=r(342),i=r(0),u=["instance","product"],o=["product"],b=function(e){return Object(i.jsx)(l.b.TextInput,Object(c.a)(Object(c.a)({placeholder:"Nom de l'attribut"},e),{},{required:!0,name:"name",maxLength:30,minLength:3}))},d=function(e){return Object(i.jsx)(l.b.TextInput,Object(c.a)(Object(c.a)({placeholder:"Valeur de l'attribut"},e),{},{required:!0,name:"value",maxLength:99,minLength:3}))},j=function(e){var t=e.instance,r=e.product,c=Object(n.a)(e,u),o=Object(l.c)({name:(null===t||void 0===t?void 0:t.name)||"",value:(null===t||void 0===t?void 0:t.value)||""});if(!t||!t.slug||!r||!r.slug)return null;return Object(i.jsx)(l.b,{context:o,onSubmit:function(e){return e.preventDefault(),s.a.patchAttribute(r.slug,t.slug,o.values).then((function(e){return null===c||void 0===c?void 0:c.onSuccess(e)})).catch((function(e){return o.handleError(e)}))},children:Object(i.jsxs)("div",{className:"d-flex flex-column flex-md-row",style:{alignItems:"end"},children:[Object(i.jsx)("div",{className:"me-md-1",children:Object(i.jsx)(b,{error:o.errors.name})}),Object(i.jsx)("div",{className:"w-100 me-md-1",children:Object(i.jsx)(d,{error:o.errors.value})}),Object(i.jsxs)("div",{className:"d-flex ms-md-1",children:[Object(i.jsx)(a.d,{Icon:a.h.Trash,render:function(e){return Object(i.jsx)("div",{className:"p-3 w-100 d-flex justify-content-center",children:Object(i.jsxs)("div",{className:"w-md-50 d-flex align-items-center justify-content-between",children:[Object(i.jsx)("div",{children:Object(i.jsx)(a.b,{onClick:function(){return s.a.deleteAttribute(r.slug,t.slug).then((function(t){return null===e||void 0===e||e.setOpen(!1),null===c||void 0===c?void 0:c.onSuccess(t)})).catch((function(){var e;null===c||void 0===c||null===(e=c.toast)||void 0===e||e.error({message:"Could not delete attribute."})}))},className:"btn-danger",children:"Supprimer"})}),Object(i.jsx)("div",{children:Object(i.jsx)(a.b,{onClick:function(){return null===e||void 0===e?void 0:e.setOpen(!1)},children:"Annuler"})})]})})},renderHeader:function(e){return Object(i.jsx)("div",{className:"p-3",children:Object(i.jsxs)("div",{className:"fw-bold",children:["Supprimer l'attribut \"",t.name,'"']})})},className:"btn-danger-3 me-1"}),Object(i.jsx)(l.b.Submit,{value:"Save",className:"btn btn-primary-2"})]})]})})};function p(e){var t=e.product,r=Object(n.a)(e,o),c={name:"",value:""},u=Object(l.c)(c);if(!t||!t.slug)return null;return Object(i.jsx)(l.b,{context:u,onSubmit:function(e){return e.preventDefault(),s.a.postAttribute(t.slug,u.values).then((function(e){return u.setValues(c),null===r||void 0===r?void 0:r.onSuccess(e)})).catch((function(e){return u.handleError(e)}))},children:Object(i.jsxs)("div",{className:"d-flex flex-column flex-md-row",style:{alignItems:"end"},children:[Object(i.jsxs)("div",{className:"me-md-1",children:[Object(i.jsx)(l.b.Label,{value:"Name"}),Object(i.jsx)(b,{error:u.errors.name})]}),Object(i.jsxs)("div",{className:"w-100 me-md-1",children:[Object(i.jsx)(l.b.Label,{value:"Value"}),Object(i.jsx)(d,{error:u.errors.value})]}),Object(i.jsx)("div",{className:"ms-md-1",children:Object(i.jsx)(a.e,{type:"submit",className:"btn-primary-3"})})]})})}},356:function(e,t,r){"use strict";r.r(t),r.d(t,"productFormDefaultValues",(function(){return p})),r.d(t,"default",(function(){return m}));var n=r(4),c=r(8),a=r(2),l=r(9),s=r(6),i=r(3),u=r(5),o=(r(347),r(342)),b=(r(345),r(352),r(348),r(344)),d=r(0),j=["tab"],p={name:"",description:"",category:"",retail_price:0,is_pre_sale:!1,is_pre_sale_text:"",sale_price:0,is_on_sale:!1,title:"",slug_public:""};function m(e){var t=e.match.params.prodSlug,r=Object(a.useState)({}),n=Object(c.a)(r,2),j=n[0],m=n[1],O=Object(a.useState)("info"),h=Object(c.a)(O,2),x=h[0],f=h[1],g=Object(s.c)(p),_=g.setValues;if(Object(a.useEffect)((function(){o.a.detail(t).then((function(e){var t;m(e),_({name:e.name||"",description:e.description||"",category:e.category||"",retail_price:(null===e||void 0===e?void 0:e.retail_price)||0,is_pre_sale:e.is_pre_sale||!1,is_pre_sale_text:e.is_pre_sale_text||"",is_on_sale:e.is_on_sale||!1,sale_price:(null===e||void 0===e?void 0:e.sale_price)||0,title:e.page.title||"",slug_public:(null===e||void 0===e||null===(t=e.page)||void 0===t?void 0:t.slug_public)||""})})).catch((function(e){!e.response||(console.log(e.response),e.response.status)}))}),[t,_]),!j)return null;var S=j.prev_slug,N=j.next_slug;return Object(d.jsx)(l.g,{back:null===e||void 0===e?void 0:e.back,actions:Object(d.jsxs)("div",{children:[S&&Object(d.jsx)("a",{href:b.b.productUpdate(S),className:"btn me-1",title:"Voir le produit pr\xe9c\xe9dent",children:"Previous"}),N&&Object(d.jsx)("a",{href:b.b.productUpdate(N),className:"btn",title:"Voir le produit suivant",children:"Next"})]}),className:"miq-container-1024 product-update-view",children:Object(d.jsxs)("div",{className:"my-2",children:[Object(d.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(d.jsxs)("div",{className:"d-flex align-items-center",children:[Object(d.jsx)(u.b,{onClick:function(){return f("info")},className:Object(i.j)(["me-1","info"===x&&"btn-primary-3"]),children:"Info"}),Object(d.jsx)(u.b,{onClick:function(){return f("inventory")},className:Object(i.j)(["me-1","inventory"===x&&"btn-primary-3"]),children:"Inventory"}),Object(d.jsx)(u.b,{onClick:function(){return f("imgs")},className:Object(i.j)(["me-1","imgs"===x&&"btn-primary-3"]),children:"Images"}),Object(d.jsx)(u.b,{onClick:function(){return f("setting")},className:Object(i.j)(["setting"===x&&"btn-primary-3"]),children:"Settings"})]})}),Object(d.jsx)(v,{tab:x,prodSlug:t,product:j,setProduct:m,form:g,onDelete:function(){var t;return null===e||void 0===e||null===(t=e.history)||void 0===t?void 0:t.push(e.back)}})]})})}var v=function(e){var t=e.tab,r=Object(n.a)(e,j),c=(r.prodSlug,r.product);r.setProduct,r.form,r.toast;if(!c.slug)return null;switch(t){case"imgs":return null;default:return Object(d.jsxs)("div",{className:"d-grid grid-md-3 gap-3",children:[Object(d.jsx)("div",{className:"span-md-2"}),Object(d.jsx)(l.g.Section,{title:"Status",text:c.page.is_published?"This product is published.":"This product is not published. It does not show in your store.",className:""})]})}}}}]);
//# sourceMappingURL=0.3ff2e497.chunk.js.map