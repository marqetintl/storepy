(this["webpackJsonp@store/client"]=this["webpackJsonp@store/client"]||[]).push([[4],{105:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return u}));var n=c(1),s=c(6),r=c(3),a=c(0),i=function(e){var t=e.context,c=void 0===t?Object(r.j)("section context"):t,n=e.form,i=void 0===n?Object(r.j)("form context"):n,o=e.data,u=void 0===o?Object(r.j)("section data"):o;return Object(a.jsx)(s.c,{Icon:s.e.ArrowUpCircle,label:"Save",className:"section-btn",title:"Save",onClick:function(t){var n=u.text!==i.values.text;if(console.log("Saving",n),!n)return c.setEdit(!c.isEdit);e.onSave&&e.onSave()}})},o=function(e){console.log(e);var t=e.context,c=void 0===t?Object(r.j)("section context"):t,i=e.data,o=void 0===i?Object(r.j)("section data"):i;return Object(a.jsx)(s.c,Object(n.a)(Object(n.a)({},e),{},{Icon:s.e.Trash,className:"section-btn btn-danger",title:"Delete",onClick:function(){return c.remove(o.slug)}}))},u=function(e){var t=e.context,c=void 0===t?Object(r.j)("section context"):t,o=c.isEdit;return o?Object(a.jsx)(i,Object(n.a)({},e)):Object(a.jsx)(s.c,{Icon:o?s.e.Eye:s.e.PencilSquare,className:"section-btn",title:o?"Preview Mode":"Edit Mode",onClick:function(){return c.setEdit(!o)}})}},106:function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c.d(t,"c",(function(){return a})),c.d(t,"b",(function(){return i}));var n=c(3),s=c(0),r=function(e){var t=e.children,c=e.id,r=e.className;return Object(s.jsx)("div",{id:c,className:Object(n.f)(["section-body",r]),children:t})},a=function(e){var t=e.children,c=e.Icon,r=e.id,a=e.className;return Object(s.jsxs)("div",{id:r,className:Object(n.f)(["section-header",a]),children:[c&&Object(s.jsx)("div",{className:"",children:Object(s.jsx)(c,{className:"icon"})}),t]})},i=function(e){var t=e.children,c=e.id,r=e.className;return Object(s.jsx)("div",{id:c,className:Object(n.f)(["section-footer",r]),children:t})}},107:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));c(18),c(1),c(4);var n=c(3),s=c(24),r={path:"pages/",list:function(e){return Object(n.h)(s.a,this.path,e)},get:function(e,t){return Object(n.h)(s.a,"".concat(this.path).concat(e,"/"),t)}}},111:function(e,t,c){},112:function(e,t,c){},113:function(e,t,c){},344:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return I}));var n=c(11),s=c(2),r=c(4),a=c(3),i=(c(111),c(1)),o=c(6),u=c(105),l=c(106),j=(c(112),c(0)),d=function(e){return Object(j.jsx)("div",{className:"",children:"TxtSectionEdit"})},b=function(e){return e.context.isEdit?Object(j.jsx)(d,Object(i.a)({},e)):Object(j.jsx)("div",{className:"",children:"Prev"})},O=Object(s.forwardRef)((function(e,t){return Object(j.jsxs)("div",{id:e.id,ref:t,className:Object(a.f)([e.className]),children:[Object(j.jsx)(l.c,{Icon:o.e.TextareaT}),Object(j.jsx)(l.a,{children:Object(j.jsx)(b,Object(i.a)({},e))}),Object(j.jsx)(l.b,{children:Object(j.jsxs)("div",{className:"actions",children:[Object(j.jsx)(u.a,Object(i.a)(Object(i.a)({},e),{},{label:"Delete"})),Object(j.jsx)(u.b,{context:e.context})]})})]})}));a.b&&(O.displayName="TextSection");var f=O,v=(c(113),Object(s.createContext)());function h(e){var t=e.data,r=void 0===t?Object(a.j)("section data props"):t,o=r.slug,u=r.type,l=Object(s.useRef)(),d=Object(s.useState)(e.isEdit||!1),b=Object(n.a)(d,2),O=b[0],h=b[1],x=Object(s.useMemo)((function(){return{isEdit:O,setEdit:h}}),[O]);if(!o)return null;var N=function(e){switch(e){case"MD":return Object(s.lazy)((function(){return Promise.all([c.e(2),c.e(6)]).then(c.bind(null,346))}));case"IMG":return Object(s.lazy)((function(){return c.e(5).then(c.bind(null,343))}));default:return f}}(u);return Object(j.jsx)(s.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading ..."}),children:Object(j.jsx)(v.Provider,{value:x,children:Object(j.jsx)(N,Object(i.a)(Object(i.a)({},e),{},{context:x,ref:l,className:Object(a.f)(["section",O&&"active"])}))})})}var x={path:"sections/",list:function(e,t){return console.log(t),Object(a.h)(e,this.path,t,"SET_SECTIONS")},get:function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PREPEND_SECTION";return actions.get("".concat(this.path).concat(e,"/"),t,c)},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PREPEND_SECTION";return actions.post("".concat(path),e,t)},patch:function(e,t,c){return actions.patch("".concat(path).concat(e,"/"),t,c,"UPDATE_SECTION")},delete:function(e){return actions.delete("".concat(path).concat(e,"/"),e,"REMOVE_SECTION")}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{results:[]},t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload,s=void 0===n?{}:n,r=s.results;switch(c){case"SET_SECTIONS":return Object(i.a)({},s);case"APPEND_SECTION":return r=addOrUpdateArrayObject(e.results,s,"slug",!0),Object(i.a)(Object(i.a)({},e),{},{results:r});case"PREPEND_SECTION":case"UPDATE_SECTION":return r=addOrUpdateArrayObject(e.results,s),Object(i.a)(Object(i.a)({},e),{},{results:r});case"REMOVE_SECTION":return r=e.results.filter((function(e){return e.slug!==s.slug})),Object(i.a)(Object(i.a)({},e),{},{results:r});default:return Object(i.a)({},e)}},E=["sourceSlug","children"],g=["sourceSlug","request"];function p(e){var t=e.sourceSlug,c=(void 0===t&&Object(a.j)("source slug"),e.children);Object(r.a)(e,E);return Object(j.jsx)("div",{className:"",children:c})}var S=function(e){var t=e.sourceSlug,c=void 0===t?Object(a.j)("source slug"):t,i=e.request,o=void 0===i?Object(a.j)("request"):i,u=(Object(r.a)(e,g),Object(s.useReducer)(N,{results:[]})),l=Object(n.a)(u,2),d=l[0],b=l[1];return Object(s.useEffect)((function(){c&&x.list(o,{source:c}).then((function(e){b({type:"SET_SECTIONS",payload:e})}))}),[c,o]),Object(j.jsx)("div",{className:"editor-panel",children:Object(j.jsxs)("div",{className:"editor-content",children:[Object(j.jsx)("div",{className:"editor-label"}),Object(j.jsx)("div",{className:"editor-sections",children:d.results.map((function(e){return Object(j.jsx)(h,{data:e},e.slug)}))}),Object(j.jsx)("div",{className:"editor-actions"})]})})},m=c(107),T=c(24);function I(e){var t=e.match.params.pageSlug,c=Object(s.useState)({}),r=Object(n.a)(c,2),a=r[0],i=r[1];return Object(s.useEffect)((function(){t&&m.a.get(t).then((function(e){return i(e)})).catch((function(e){}))}),[t]),a&&a.slug?Object(j.jsx)(p,{sourceSlug:a.slug,className:"",children:Object(j.jsxs)("div",{className:"",children:[a.slug,Object(j.jsx)(S,{sourceSlug:a.slug,request:T.a})]})}):null}}}]);
//# sourceMappingURL=4.514fa762.chunk.js.map