"use strict";(self.webpackChunk_storepy_clientjs=self.webpackChunk_storepy_clientjs||[]).push([[494],{8494:function(e,i,t){t.r(i),t.d(i,{default:function(){return v}});var s=t(6009),n=t(2411),r=t(2356),l=t(2379),o=t(9002),d=t(1408),c=t(2145),a=t(8136),u=function(){var e=(0,r.jB)("/shop/").res,i=new c.HM(e);if(!i.isSuccess)return null;var t=(0,r.ko)(i.items);return(0,a.jsx)(r.ZP.Section,{title:"Top Views",text:"This data is based on the last 100 hits.",className:"my-2",children:Object.entries(t).sort((function(e,i){return(null===e||void 0===e?void 0:e[1].length)>(null===i||void 0===i?void 0:i[1].length)?-1:1})).map((function(e){var i=(0,s.Z)(e,2),t=i[0],n=i[1].find((function(e){return e.session_data}))||{},l=n.session_data,o=l.name,d=l.img;return(0,a.jsx)(r.ZP.Section,{title:(0,a.jsxs)("div",{className:"text-sm",children:[o&&(0,a.jsx)("div",{className:"",children:null===l||void 0===l?void 0:l.name}),(0,a.jsx)("div",{className:"fw-normal text-muted",children:t})]}),actions:(0,a.jsx)("div",{children:d&&(0,a.jsx)("div",{style:{maxWidth:20},children:(0,a.jsx)(r.ZP.Img.Image,{src:d,className:"rounded"})})}),border:!0,className:"mb-1"},t)}))})};function v(){var e,i,t,c=n.useContext(o.h2),v=c.isLoaded,x=c.products,m=c.orders,j=c.cats,p=c.shopy_settings,g=(0,d.lr)();(0,s.Z)(g,1)[0].get("tab");return v?(0,a.jsxs)(r.ZP.View,{title:"Shop",back:"/staff/",actions:(0,a.jsx)(r.ZP.NavLink,{to:"settings/",children:(0,a.jsx)(l.PJ.XV,{})}),children:[(0,a.jsx)(r.ZP.Section,{children:(0,a.jsxs)("div",{className:"d-grid grid-2 grid-sm-3 grid-md-4 grid-lg-6",children:[(null===p||void 0===p||null===(e=p.config)||void 0===e?void 0:e.has_suppliers)&&(0,a.jsx)(h,{title:"Supplier Orders",tab:"./",link:{to:"orders/",text:"View all orders",perms:["store.view_supplierorder"]},children:(0,a.jsx)("h3",{children:(null===m||void 0===m?void 0:m.count)||0})}),(0,a.jsx)(h,{title:"Products",tab:"./?tab=products",link:{to:"products",text:"View all products",perms:["store.view_product"]},children:(0,a.jsx)("h3",{children:(null===x||void 0===x?void 0:x.count)||0})}),(0,a.jsx)(h,{tab:"./?tab=categories",title:"Categories",link:{to:"categories",text:"View all categories",perms:["store.view_category"]},children:(0,a.jsx)("h3",{children:(null===j||void 0===j?void 0:j.count)||0})})]})}),(0,a.jsx)(u,{}),(0,a.jsx)(r.ZP.Section,{title:"Top Categories",className:"my-2",children:null===j||void 0===j||null===(i=j.cat_count)||void 0===i||null===(t=i.filter((function(e){return e.category__name})))||void 0===t?void 0:t.map((function(e,i){var t=e.category__name,s=e.count;return(0,a.jsxs)("div",{children:[t,": ",s]},i)}))})]}):null}var h=function(e){var i=e.children,t=e.title,s=e.link,n=e.tab,l=void 0===n?"./":n,o=s.to;return(0,a.jsxs)("div",{className:"card-link mb-3",children:[(0,a.jsxs)(r.ZP.NavLink,{to:l,children:[t&&(0,a.jsx)("div",{className:"card-link-title",children:t}),i]}),(0,a.jsx)(r.ZP.Link,{to:o,requiredPerms:s.perms,children:(null===s||void 0===s?void 0:s.text)&&"".concat(s.text," \xbb")})]})}}}]);
//# sourceMappingURL=494.1ff3973d.chunk.js.map