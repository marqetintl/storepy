(this["webpackJsonp@store/client"]=this["webpackJsonp@store/client"]||[]).push([[13],{348:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var n=a(9),c=a(1),s=a(4),i=a(2),o=a(14),r=a(8),l=a(5),b=a(32),u=a(28),d=a(48),j=a(0),m=["setting"],x=["isUpdated"],g=["isUpdated"],O=function(e){var t=e.setting,a=void 0===t?{}:t,n=Object(s.a)(e,m),i=Object(r.c)({contact_email:a.contact_email||"",ga_tracking:a.ga_tracking||"",fb_pixel:a.fb_pixel||""}),o=n.toast,d=n.setSetting;return Object(j.jsxs)(r.b,{context:i,onSubmit:function(e){e.preventDefault();var t={};return Object.keys(i.values).forEach((function(e){t[e]=a[e]})),u.a.patch(a.slug,i.values,t).then((function(e){var t=e.isUpdated,a=Object(s.a)(e,x);t&&(d&&d(a),o&&o.success({message:"Site updated."}))})).catch((function(e){return i.handleError(e)}))},children:[Object(j.jsx)(b.a.Section,{title:"Logo",text:"",children:Object(j.jsx)(l.i,{slug:a&&a.logo_data?a.logo_data.slug:null,onCreate:function(e){return u.a.patch(a.slug,{logo:e.slug}).then((function(e){d(e),o.success({message:"Logo added."})})).catch((function(e){}))},onUpdate:function(e){d(Object(c.a)(Object(c.a)({},a),{},{logo_data:e})),o.success({message:"Logo updated."})},className:"site-logo-upload-button",children:Object(j.jsx)(l.f,Object(c.a)(Object(c.a)({},a.logo_data),{},{className:"site-logo"}))})}),Object(j.jsx)(b.a.Section,{title:"Contact",text:"What's the best way to contact you?",children:Object(j.jsx)(r.b.TextInput,{name:"contact_email",type:"email",error:i.errors.contact_email,placeholder:"Write your contact email ..."})}),Object(j.jsx)(b.a.Section,{title:"Social",text:"Display Your social media accounts."}),Object(j.jsxs)(b.a.Section,{title:"Analytics",text:"Set up third-party analytics.",children:[Object(j.jsx)(r.b.Field,{label:"Google Analytics Tracking Number",children:Object(j.jsx)(r.b.TextInput,{name:"ga_tracking",error:i.errors.ga_tracking})}),Object(j.jsx)(r.b.Field,{label:"Facebook Pixel",children:Object(j.jsx)(r.b.TextInput,{name:"fb_pixel",error:i.errors.fb_pixel})}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)(r.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})]})};function p(e){var t=Object(i.useContext)(l.p),a=Object(i.useContext)(o.a),c=Object(i.useState)({}),m=Object(n.a)(c,2),x=m[0],p=m[1],h=a.site,f=void 0===h?{}:h,S=Object(r.c)({name:f.name,domain:f.domain}),v=f.settings;if(Object(i.useEffect)((function(){u.a.detail(v).then((function(e){e.slug&&p(e)})).catch((function(e){}))}),[v]),!x.slug)return null;return Object(j.jsxs)(b.a,{title:"Site General Settings",children:[Object(j.jsx)(r.b,{context:S,onSubmit:function(e){e.preventDefault();var n=f.settings;if(n)return u.a.patchSite(n,{name:S.values.name,domain:S.values.domain},{name:f.name,domain:f.domain}).then((function(e){var n=e.isUpdated,c=Object(s.a)(e,g);n&&(a.updateSite(c.site),t.success({message:"Site updated."}))})).catch((function(e){return S.handleError(e)}))},children:Object(j.jsxs)(b.a.Section,{title:"Site Details",children:[Object(j.jsxs)("div",{className:"mb-1",children:[Object(j.jsx)(r.b.Label,{value:"Site name"}),Object(j.jsx)(r.b.TextInput,{required:!0,name:"name",error:S.errors.name,disabled:!Boolean(f.settings)})]}),Object(j.jsxs)("div",{className:"mb-1",children:[Object(j.jsx)(r.b.Label,{value:"Site domain"}),Object(j.jsx)(r.b.TextInput,{required:!0,name:"domain",error:S.errors.domain,disabled:!Boolean(f.settings)})]}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)(r.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})}),Object(j.jsx)(d.b,{ctx:a,setting:x,setSetting:p,toast:t}),Object(j.jsx)(O,{ctx:a,setting:x,setSetting:p,toast:t})]})}}}]);
//# sourceMappingURL=13.a797ebad.chunk.js.map