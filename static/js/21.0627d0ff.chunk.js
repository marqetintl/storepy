(this["webpackJsonp@store/clientjs"]=this["webpackJsonp@store/clientjs"]||[]).push([[21],{381:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return U}));var n=a(4),c=a(1),i=a(8),s=a(2),l=a(37),r=a(32),o=a(22),b=a(33),u=a(24),d=a(23),j=new(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(b.a)(a,[{key:"patchSite",value:function(e,t,a){return this.patchPath("".concat(this.path).concat(e,"/site/"),t,a)}}]),a}(a(3).f))("settings/"),m=a(0),O=function(e){return Object(m.jsx)(l.b.Field,{label:"Site name",text:"Give a name to your site. Keep it short and clean.",children:Object(m.jsx)(l.b.TextInput,Object(c.a)(Object(c.a)({maxLength:65,placeholder:"example"},e),{},{required:!0,name:"name",minLength:2}))})},h=function(e){return Object(m.jsx)(l.b.Field,{label:"Site domain",text:"Enter your domain name url. Include the http(s) part.",children:Object(m.jsx)(l.b.TextInput,Object(c.a)(Object(c.a)({maxLength:99,placeholder:"example.com"},e),{},{type:"url",required:!0,name:"domain",minLength:3}))})},x=a(51),p=["isUpdated"],g=["isUpdated"],v=["settingSlug","setting","setSetting","getHtml"],f=["isUpdated"],_=["isUpdated"],S=["isUpdated"],N=["settingSlug","form"],y=["isUpdated"],w=["children","settingSlug","setting","form","fields"],k=["isUpdated"];function U(e){var t=Object(s.useContext)(l.k),a=Object(s.useContext)(l.j),n=Object(s.useState)({}),o=Object(i.a)(n,2),b=o[0],u=o[1],d=a.site,O=void 0===d?{}:d,h=Object(l.n)(Object(c.a)({name:O.name,domain:O.domain},Y({}))),x=O.settings,p=null===O||void 0===O?void 0:O.name,g=null===O||void 0===O?void 0:O.domain,v=h.setValues;if(Object(s.useEffect)((function(){j.detail(x).then((function(e){e.slug&&(u(e),v(Object(c.a)({name:p||"",domain:g||""},Y(e))))})).catch((function(e){}))}),[x,v,p,g]),!b.slug)return null;var f=function(e){var t=Object(m.jsx)(L,Object(c.a)({},Object(c.a)(Object(c.a)(Object(c.a)({},b),e),{},{setting:b})));return Object(l.l)(t)},_={ctx:a,setting:b,setSetting:u,settingSlug:x,site:O,form:h,toast:t},S=b.is_live?"Your site is published.":"Your site is not published. No one but you can see your content.\nCustomize your landing.",N=b.logo;return Object(m.jsxs)(r.a,{title:"Site General Settings",back:null===e||void 0===e?void 0:e.back,className:"pb-4",children:[Object(m.jsxs)("div",{className:"d-grid grid-md-4 gap-2",children:[Object(m.jsx)(r.a.Section,{title:"Site Details",className:"span-md-3",children:Object(m.jsx)(E,Object(c.a)({},_))}),Object(m.jsxs)(r.a.Section,{title:"Site logo",className:"span-md-1",text:"Add a logo to your site",actions:Object(m.jsx)(l.d,{slug:N,onSuccess:function(){return u(Object(c.a)(Object(c.a)({},b),{},{logo:null,logo_data:null}))},onError:function(){return t.error({message:"Something went wrong."})},label:"",className:"btn-danger-3"}),children:[N&&Object(m.jsx)(l.c,Object(c.a)(Object(c.a)({},b.logo_data),{},{className:"site-logo",rounded:!0})),!N&&Object(m.jsx)(l.f,{onCreate:function(e){return j.patch(x,{logo:e.slug}).then((function(e){u(e),t.success({message:"Logo added."})})).catch((function(e){}))},onUpdate:function(e){u(Object(c.a)(Object(c.a)({},b),{},{logo_data:e})),t.success({message:"Logo updated."})},className:"site-logo-upload-button",children:Object(m.jsx)(l.c,Object(c.a)(Object(c.a)({},b.logo_data),{},{className:"site-logo"}))})]})]}),Object(m.jsx)(r.a.Section,{title:"Site Status",text:S,actions:Object(m.jsx)(F,Object(c.a)({},_)),children:!b.is_live&&Object(m.jsxs)("div",{className:"d-grid grid-md-2 gap-3",children:[Object(m.jsx)(T,Object(c.a)({},Object(c.a)(Object(c.a)({},_),{},{getHtml:f}))),Object(m.jsx)(I,Object(c.a)({},Object(c.a)(Object(c.a)({},_),{},{getHtml:f})))]})}),Object(m.jsx)(r.a.Section,{title:"Contact",text:"What's the best way to contact you?",children:Object(m.jsxs)(W,Object(c.a)(Object(c.a)({},_),{},{fields:C,children:[Object(m.jsx)(q,Object(c.a)({},_)),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(l.b.Submit,{value:"Save",className:"btn btn-primary-3"})})]}))}),Object(m.jsx)(r.a.Section,{title:"Whatsapp",text:"A whatsapp icon will be added to your site.",children:Object(m.jsxs)(W,Object(c.a)(Object(c.a)({},_),{},{fields:D,children:[Object(m.jsx)(A,Object(c.a)({},_)),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(l.b.Submit,{value:"Save",className:"btn btn-primary-3"})})]}))}),Object(m.jsx)(r.a.Section,{title:"Analytics",text:"Set up third-party analytics.",children:Object(m.jsxs)(W,Object(c.a)(Object(c.a)({},_),{},{fields:P,children:[Object(m.jsx)(H,Object(c.a)({},_)),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(l.b.Submit,{value:"Save",className:"btn btn-primary-3"})})]}))}),Object(m.jsx)(r.a.Section,{title:"Social",text:"Display Your social media accounts. Comin Soon ..."})]})}var F=function(e){var t=e.settingSlug,a=e.setting,c=e.setSetting,i=e.toast;if(!a||!t)return null;var s=a.is_live,r=void 0!==s&&s;return Object(m.jsx)(l.a,{onClick:function(){return j.patch(t,{is_live:!r}).then((function(e){var t=e.isUpdated,a=Object(n.a)(e,p);t&&(null===c||void 0===c||c(a),null===i||void 0===i||i.success({message:r?"Site published.":"No one but you can see the content."}))})).catch((function(e){}))},className:r?"btn-danger-3":"btn-primary",children:r?"Unpublish site":"Publish site"})},T=function(e){var t=e.settingSlug,a=e.setting,i=e.setSetting,s=e.getHtml,r=Object(l.n)({ct_title:a.ct_title||"",ct_text:a.ct_text||""});return Object(m.jsxs)(l.b,{context:r,onSubmit:function(e){e.preventDefault();var a=s(r.values);return j.patch(t,Object(c.a)(Object(c.a)({},r.values),{},{ct_html:a})).then((function(e){var t,a,c,s=e.isUpdated,l=Object(n.a)(e,g);s&&(i(l),null===(t=props)||void 0===t||null===(a=t.toast)||void 0===a||null===(c=a.success)||void 0===c||c.call(a,{message:"Template updated."}))})).catch((function(e){return r.handleError(e)}))},children:[Object(m.jsx)(l.b.Field,{label:"Title",children:Object(m.jsx)(l.b.TextInput,{name:"ct_title",placeholder:"Write title ...",error:r.errors.ct_title,maxLength:50})}),Object(m.jsx)(l.b.Field,{label:"Text",className:"mb-2",children:Object(m.jsx)(l.b.TextAreaX,{name:"ct_text",placeholder:"Write text ...",error:r.errors.ct_text,maxLength:99})}),Object(m.jsx)("div",{children:Object(m.jsx)(l.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})},I=function(e){var t=e.settingSlug,a=e.setting,i=e.setSetting,s=e.getHtml;Object(n.a)(e,v);return Object(m.jsx)(x.b,{slug:null===a||void 0===a?void 0:a.ct_image,data:null===a||void 0===a?void 0:a.ct_image_data,onCreate:function(e){var a=e.slug,c=s({ct_image_data:e,ct_image:a});return j.patch(t,{ct_image:a,ct_html:c}).then((function(e){var t,a,c=e.isUpdated,s=Object(n.a)(e,f);c&&(i(s),null===(t=toast)||void 0===t||null===(a=t.success)||void 0===a||a.call(t,{message:"Image added."}))})).catch((function(e){}))},onUpdate:function(e){e.isUpdated;var a=Object(n.a)(e,_),c=s({ct_image_data:a});return j.patch(t,{ct_html:c}).then((function(e){var t,a,c=e.isUpdated,s=Object(n.a)(e,S);c&&(i(s),null===(t=toast)||void 0===t||null===(a=t.success)||void 0===a||a.call(t,{message:"Image updated."}))})).catch((function(e){}))},onDelete:function(){Object(c.a)(Object(c.a)({},a),{},{ct_image_data:null,ct_image:null});return j.patch(t,{ct_html:s({ct_image_data:null,ct_image:null})}).then((function(e){i(e)})).catch((function(e){}))},className:"mb-1"})},L=function(e){var t=e.ct_title,a=e.ct_text,n=e.ct_image_data,i=t||a,s=e.setting||{},r=s.logo_data,o=s.logo;return Object(m.jsxs)("div",{className:"close-template",children:[n&&Object(m.jsx)(l.i,Object(c.a)(Object(c.a)({},n),{},{className:"close-template-bg"})),i&&Object(m.jsxs)("div",{className:"close-template-inner",children:[Object(m.jsx)("div",{className:Object(l.m)(["close-template-logo",!o&&"loading"]),children:r?Object(m.jsx)(l.e,Object(c.a)({},r)):Object(m.jsx)(l.g,{className:"small icon"})}),Object(m.jsxs)("div",{className:"text-center p-3",children:[t&&Object(m.jsx)("h1",{className:"close-template-title mb-1",children:t}),a&&Object(m.jsx)("h3",{className:"close-template-text",children:a})]})]})]})},E=function(e){var t=e.settingSlug,a=e.form,c=Object(n.a)(e,N);if(!a||!t)return null;var i=c.ctx,s=c.site,r=c.toast;return Object(m.jsxs)(l.b,{context:a,onSubmit:function(e){return e.preventDefault(),j.patchSite(t,{name:a.values.name,domain:a.values.domain},{name:s.name,domain:s.domain}).then((function(e){var t=e.isUpdated,a=Object(n.a)(e,y);t&&(i.updateSite(a.site),r.success({message:"Site updated."}))})).catch((function(e){return a.handleError(e)}))},children:[Object(m.jsx)(O,{error:a.errors.name,disabled:!Boolean(s.settings),className:"w-100 w-md-50"}),Object(m.jsx)(h,{error:a.errors.domain,disabled:!Boolean(s.settings)}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)(l.b.Submit,{value:"Save",className:"btn btn-md btn-primary-3 min-w-25"})})]})},W=function(e){var t=e.children,a=e.settingSlug,c=e.setting,i=e.form,s=e.fields,r=void 0===s?G:s,o=Object(n.a)(e,w);if(!a||!i||!Array.isArray(r))return null;return Object(m.jsx)(l.b,{context:i,onSubmit:function(e){e.preventDefault();var t={},s={};return r.forEach((function(e){s[e]=i.values[e],t[e]=c[e]})),j.patch(a,s,t).then((function(e){var t,a,c,i,s=e.isUpdated,l=Object(n.a)(e,k);s&&(null===(t=setSetting)||void 0===t||t(l),null===(a=toast)||void 0===a||null===(c=a.success)||void 0===c||c.call(a,{message:"Site updated."}),null===o||void 0===o||null===(i=o.onSuccess)||void 0===i||i.call(o,l))})).catch((function(e){var t;i.handleError(e),null===o||void 0===o||null===(t=o.onError)||void 0===t||t.call(o,e)}))},children:t})},C=["contact_number","contact_number_title","contact_number_display","contact_email"],q=function(e){var t=e.form;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.b.Field,{label:"Phone number",text:"Write your (business) contact number without country extension.",children:Object(m.jsx)(l.h,{required:e.required,name:"contact_number",error:t.errors.contact_number,className:"w-100 w-md-50"})}),Object(m.jsx)(l.b.Field,{label:"Phone number display",text:"Write a call to action for your contact number.",children:Object(m.jsx)(l.b.TextInput,{required:e.required,name:"contact_number_display",error:t.errors.contact_number_display,placeholder:"Call us now",maxLength:99,className:"w-100 w-md-50"})}),Object(m.jsx)(l.b.Field,{label:"Phone number link text",text:"Describe your phone number link (SEO).",children:Object(m.jsx)(l.b.TextInput,{name:"contact_number_title",error:t.errors.contact_number_title,className:"w-100 w-md-50",maxLength:99})}),Object(m.jsx)(l.b.Field,{label:"Email",text:"Write your (business) contact email.",children:Object(m.jsx)(l.b.TextInput,{name:"contact_email",type:"email",error:t.errors.contact_email,className:"w-100 w-md-50",maxLength:99})})]})},D=["whatsapp_link","whatsapp_link_title"],A=function(e){var t=e.form,a=e.required;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.b.Field,{label:"Whatsapp link",text:"Write your whatsapp link.",children:Object(m.jsx)(l.b.TextInput,{required:a,name:"whatsapp_link",type:"url",error:t.errors.whatsapp_link,maxLength:200,className:"w-100 w-md-50"})}),Object(m.jsx)(l.b.Field,{label:"Whatsapp link text",text:"Describe your whatsapp link.",children:Object(m.jsx)(l.b.TextInput,{name:"whatsapp_link_title",error:t.errors.whatsapp_link_title,className:"w-100 w-md-50",maxLength:99})})]})},P=["ga_tracking","fb_pixel"],H=function(e){var t=e.form;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.b.Field,{label:"Google Analytics Tracking Number",children:Object(m.jsx)(l.b.TextInput,{name:"ga_tracking",error:t.errors.ga_tracking,className:"w-100 w-md-50",placeholder:"G-"})}),Object(m.jsx)(l.b.Field,{label:"Facebook Pixel",children:Object(m.jsx)(l.b.TextInput,{name:"fb_pixel",error:t.errors.fb_pixel,className:"w-100 w-md-50"})})]})},G=[].concat(C,D,P),Y=function(e){var t={};return G.forEach((function(a){t[a]=e[a]||""})),t}}}]);
//# sourceMappingURL=21.0627d0ff.chunk.js.map