(this["webpackJsonp@store/clientjs"]=this["webpackJsonp@store/clientjs"]||[]).push([[5],{341:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var c=a(17),s=a(29),r=a(23),l=a(21),n=new(function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"publish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{})}},{key:"unpublish",value:function(e){return this.patchPath("".concat(this.path).concat(e,"/publish/"),{unpublish:!0})}},{key:"postAttribute",value:function(e,t){return this.postPath("".concat(this.path).concat(e,"/attribute/new/"),t)}},{key:"patchAttribute",value:function(e,t,a,c){return this.patchPath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"),a,c)}},{key:"deleteAttribute",value:function(e,t){return this.deletePath("".concat(this.path).concat(e,"/attribute/").concat(t,"/"))}},{key:"patchPage",value:function(e,t,a){return this.patchPath("".concat(this.path).concat(e,"/page/"),t,a)}},{key:"swapCover",value:function(e,t){return this.patchPath("".concat(this.path).concat(e,"/swap-cover/"),{slug:t})}}]),a}(a(3).f))("products/")},342:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return j})),a.d(t,"a",(function(){return m}));a(8),a(4);var c=a(1),s=(a(28),a(2)),r=a(13),l=a(5),n=(a(3),a(51)),i=a.n(n),u=a(0),o=function(e){var t=e.product;if(!t||!t.retail_price)return null;var a=t.retail_price,c=t.sale_price;return t.is_on_sale&&null!=c?Object(u.jsxs)("div",{className:"product-price-display d-flex align-items-center",children:[Object(u.jsx)("div",{className:"text-danger fw-bold me-2",children:c.amountWithSymbol}),Object(u.jsx)("div",{className:"text-line-through",children:a.amountWithSymbol})]}):Object(u.jsx)("div",{className:"product-price-display d-flex align-items-center",children:Object(u.jsx)("div",{className:"fw-bold",children:a.amountWithSymbol})})},d=function(e){var t=(e.product||{}).attributes,a=void 0===t?[]:t;return a?Object(u.jsx)("ul",{className:"product-attr-list",children:null===a||void 0===a?void 0:a.map((function(e){return Object(u.jsxs)("li",{className:"attr",children:[Object(u.jsxs)("span",{className:"attr-label",children:[e.name," : "]}),Object(u.jsx)("span",{className:"attr-value",children:e.value})]},e.name)}))}):null},b=function(e){var t,a=Object(s.useContext)(r.a);return a.isLoaded&&a.categories?Object(u.jsx)("div",{className:"category-links pb-2",children:null===(t=a.categories)||void 0===t?void 0:t.map((function(t){var a,s;return Object(u.jsx)("div",{className:"item w-25 w-md-15",children:Object(u.jsxs)("a",{href:t.url,className:"",title:t.name,children:[e.showCover&&(null===t||void 0===t?void 0:t.cover)&&Object(u.jsx)(l.r,Object(c.a)(Object(c.a)({},t.cover),{},{src_mobile:(null===t||void 0===t||null===(a=t.cover)||void 0===a?void 0:a.thumb_sq)||(null===t||void 0===t||null===(s=t.cover)||void 0===s?void 0:s.src_mobile)})),Object(u.jsx)("div",{className:"info",children:t.name_truncated})]})},t.slug)}))}):null};function j(e){var t=e.location.search,a=Object(s.useRef)(i()((function(t){var a;return null===e||void 0===e||null===(a=e.history)||void 0===a?void 0:a.push(t)}),300)),c=new URLSearchParams(t);return Object(u.jsx)("form",{action:"/shop/",className:"product-search-form",children:Object(u.jsx)(l.s,{required:!0,initialValue:c.get("q"),onChange:function(e){var t=e.e,s=t.target.value;if(!s||s.length<3?c.delete("q"):c.set("q",t.target.value),a.current){var r=new URL(window.location.href);a.current("".concat(r.pathname,"?").concat(c))}},className:"search-input",placeholder:"Cherchez un produit ...",minLength:3,maxLength:99})})}var m=function(e){var t=Object(s.useContext)(r.a),a=t.isLoaded,c=t.breadcrumbs;return a&&c?Object(u.jsx)("section",{className:"miq-breadcrumbs",role:"navigation","aria-label":"breadcrumbs",children:c.map((function(e){return Object(u.jsx)("a",{href:e.path,className:"item",title:e.title,"aria-label":e.title,children:e.label},e.label)}))}):null}},344:function(e,t,a){"use strict";a.d(t,"b",(function(){return j})),a.d(t,"a",(function(){return m}));var c=a(22),s=a(4),r=a(2),l=a(6),n=a(9),i=a(5),u=a(341),o=a(0),d=["product"],b=["image"],j=function(e){var t=e.product,a=Object(s.a)(e,d);return t&&t.slug?Object(o.jsx)(i.k,{multiple:!0,className:"btn-primary-3",onCreate:function(e){return e=e.filter((function(e){return e&&e.slug})),u.a.patch(t.slug,{images:[].concat(Object(c.a)(t.images),Object(c.a)(e.map((function(e){return e.slug}))))}).then((function(e){a.onCreateSuccess&&a.onCreateSuccess(e)})).catch((function(e){a.onCreateError&&a.onCreateError(e)}))}}):null},m=function(e){var t=e.image,a=Object(s.a)(e,b),c=(null===t||void 0===t?void 0:t.alt_text)||"",i=Object(l.c)({alt_text:c}),u=null===t||void 0===t?void 0:t.slug,d=i.setValues;return Object(r.useEffect)((function(){d({alt_text:c})}),[u,d,c]),t&&t.slug?Object(o.jsx)(l.a,{value:i,className:a.className,children:Object(o.jsx)(n.h,{required:!0,image:t,onSuccess:a.onSuccess,onError:a.onError,placeholder:"Add an alternative text ..."})}):null}},348:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a(4),s=a(0),r=["product"],l=function(e){var t=e.product;Object(c.a)(e,r);return t?Object(s.jsx)("div",{className:"product-supplier-data",children:Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Supplier"}),Object(s.jsx)("span",{className:"",children:t.supplier_name})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Item id"}),Object(s.jsx)("span",{className:"",children:t.supplier_item_id})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Category"}),Object(s.jsx)("span",{className:"",children:t.supplier_item_category})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("span",{className:"",children:"Item cost"}),Object(s.jsxs)("span",{className:"",children:[t.supplier_item_cost," (",t.supplier_item_cost_currency,")"]})]}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:t.supplier_item_url,className:"text-underline",target:"_blank",rel:"noopener noreferrer",children:"View supplier page"})})]})}):null}},349:function(e,t,a){"use strict";a.d(t,"b",(function(){return S})),a.d(t,"a",(function(){return q}));var c=a(1),s=a(4),r=a(2),l=a(9),n=a(6),i=a(341),u=a(344),o=a(343),d=a(0),b=["form","product"],j=["showLabel","label"],m=["placeholder"],p=["showLabel","label"],v=["categories"],O=["showLabel","label"],h=["showLabel","label"],x=["showLabel","label"],_=["showLabel","label"],f=["showLabel","label"],g=["stages","name"],N=["children","context","fields","prodSlug"],y=["onSuccess","onError"];function S(e){var t,a,j,m,p,v,O,h=e.form,x=e.product,_=Object(s.a)(e,b),f=_.setProduct,g=_.toast,N=_.categories,y=null===x||void 0===x?void 0:x.slug;Object(r.useEffect)((function(){}),[y]);return Object(d.jsx)(q,{context:h,onSubmit:function(e){e.preventDefault();var t={name:h.values.name,retail_price:h.values.retail_price,is_on_sale:h.values.is_on_sale,is_pre_sale:h.values.is_pre_sale};return h.values.category&&(t.category=h.values.category),h.values.is_on_sale&&(t.sale_price=h.values.sale_price),h.values.is_pre_sale&&(t.is_pre_sale_text=h.values.is_pre_sale_text),i.a.patch(x.slug,t).then((function(e){null===f||void 0===f||f(Object(c.a)(Object(c.a)({},x),e)),null===g||void 0===g||g.success({message:o.a.product.update_success})})).catch((function(e){return null===g||void 0===g||g.error({message:o.a.product.update_error}),h.handleError(e)}))},className:"quick-product-update-form",children:Object(d.jsxs)("div",{className:"d-grid grid-md-3 gap-3",children:[Object(d.jsx)("div",{className:"span-md-2",children:Object(d.jsxs)(l.g.Section,{title:"Details",actions:Object(d.jsx)(l.i,{is_published:null===x||void 0===x||null===(t=x.page)||void 0===t?void 0:t.is_published,pill:!0}),children:[Object(d.jsx)("div",{className:"mb-1",children:Object(d.jsx)(w,{error:h.errors.name})}),N&&Object(d.jsx)("div",{className:"mb-1",children:Object(d.jsx)(L,{categories:N,error:null===h||void 0===h||null===(a=h.errors)||void 0===a?void 0:a.category})}),Object(d.jsxs)("div",{className:"mb-1",children:[Object(d.jsx)("div",{className:"mb-1",children:Object(d.jsx)(k,{error:null===h||void 0===h||null===(j=h.errors)||void 0===j?void 0:j.retail_price})}),Object(d.jsxs)("div",{className:"mb-1",children:[Object(d.jsx)("div",{className:"d-flex align-items-center mb-1",children:Object(d.jsx)(I,{error:null===h||void 0===h||null===(m=h.errors)||void 0===m?void 0:m.is_pre_sale})}),h.values.is_pre_sale&&Object(d.jsx)("div",{className:"mb-2",children:Object(d.jsx)(P,{error:null===h||void 0===h||null===(p=h.errors)||void 0===p?void 0:p.is_pre_sale_text})})]}),Object(d.jsx)("div",{className:"d-flex align-items-center mb-1",children:Object(d.jsx)(C,{error:null===h||void 0===h||null===(v=h.errors)||void 0===v?void 0:v.is_on_sale})}),h.values.is_on_sale&&Object(d.jsx)("div",{className:"mb-2",children:Object(d.jsx)(E,{error:null===h||void 0===h||null===(O=h.errors)||void 0===O?void 0:O.sale_price})})]}),Object(d.jsx)("div",{className:"my-3",children:Object(d.jsx)(n.b.Submit,{value:"Update product",className:"btn btn-primary-3"})})]})}),Object(d.jsxs)("div",{className:"",children:[Object(d.jsx)(l.k,{slug:null===x||void 0===x?void 0:x.cover,data:x.cover_data,onCreate:function(e){i.a.patch(x.slug,{cover:e.slug}).then((function(e){null===f||void 0===f||f(Object(c.a)(Object(c.a)({},x),e)),null===g||void 0===g||g.success({message:o.a.product.cover_create_success})})).catch((function(e){null===g||void 0===g||g.error({message:o.a.product.cover_update_error})}))},onUpdate:function(e){return null===g||void 0===g||g.success({message:o.a.product.cover_update_success}),null===f||void 0===f?void 0:f(Object(c.a)(Object(c.a)({},x),{},{cover_data:e}))},onDelete:function(){return null===g||void 0===g||g.success({message:o.a.product.cover_delete_success}),null===f||void 0===f?void 0:f(Object(c.a)(Object(c.a)({},x),{},{cover_data:null,cover:null}))},className:"mb-1"}),Object(d.jsx)(u.a,{image:null===x||void 0===x?void 0:x.cover_data})]})]})})}var w=function(e){var t=e.showLabel,a=void 0===t||t,r=e.label,l=void 0===r?"Name":r,i=Object(s.a)(e,j),u=i.placeholder,o=void 0===u?"Give a name to the item":u,b=Object(s.a)(i,m);return Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsx)(n.b.Label,{value:l,className:"mb-1"}),Object(d.jsx)(n.b.TextInput,Object(c.a)(Object(c.a)({},b),{},{required:!0,name:"name",placeholder:o,maxLength:99}))]})},L=function(e){var t,a=e.showLabel,l=void 0===a||a,i=e.label,u=void 0===i?"Category":i,o=Object(s.a)(e,p),b=o.categories,j=Object(s.a)(o,v);return Object(d.jsxs)(d.Fragment,{children:[l&&Object(d.jsx)(n.b.Label,{value:u}),Object(d.jsx)(n.b.SelectInput,Object(c.a)(Object(c.a)({},j),{},{required:!0,name:"category",nullValue:{label:"Select category"},children:null===b||void 0===b||null===(t=b.items)||void 0===t?void 0:t.map((function(e){return Object(r.createElement)(n.b.SelectInput.Option,Object(c.a)(Object(c.a)({},e),{},{key:e.value}))}))}))]})},k=function(e){var t=e.showLabel,a=void 0===t||t,r=e.label,l=void 0===r?"Retail price":r,i=Object(s.a)(e,O);return Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsx)(n.b.Label,{value:l,id:"retail_price_label"}),Object(d.jsx)(n.b.TextInput,Object(c.a)(Object(c.a)({},i),{},{required:!0,type:"number",name:"retail_price","aria-describedby":"retail_price_label",min:"0",step:"0.01"}))]})},I=function(e){e.showLabel;var t=e.label,a=void 0===t?"Pre-sale":t,r=Object(s.a)(e,h);return Object(d.jsxs)("div",{className:"d-flex",children:[Object(d.jsx)(n.b.CheckboxInput,Object(c.a)(Object(c.a)({},r),{},{name:"is_pre_sale",className:"me-2"})),Object(d.jsx)(n.b.Label,{value:a})]})},P=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(n.b.Label,{value:"Pre sale text",id:"is_pre_sale_text_label",className:"miq-checkbox-label"}),Object(d.jsx)(n.b.TextAreaX,{name:"is_pre_sale_text","aria-describedby":"is_pre_sale_text_label"})]})},C=function(e){e.showLabel;var t=e.label,a=void 0===t?"On Sale":t,r=Object(s.a)(e,x);return Object(d.jsxs)("div",{className:"d-flex",children:[Object(d.jsx)(n.b.CheckboxInput,Object(c.a)(Object(c.a)({},r),{},{name:"is_on_sale",className:"me-2"})),Object(d.jsx)(n.b.Label,{value:a})]})},E=function(e){var t=e.showLabel,a=void 0===t||t,r=e.label,l=void 0===r?"Sale price":r,i=Object(s.a)(e,_);return Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsx)(n.b.Label,{value:l,id:"sale_price_label",className:"miq-checkbox-label"}),Object(d.jsx)(n.b.TextInput,Object(c.a)(Object(c.a)({},i),{},{required:!0,type:"number",name:"sale_price","aria-describedby":"sale_price_label",min:"0",step:"0.01"}))]})},q=function(e){var t=e.children,a=e.context,r=e.fields,l=void 0===r?[]:r,u=e.prodSlug,o=Object(s.a)(e,N),b=(o.onSuccess,o.onError,Object(s.a)(o,y));return Object(d.jsx)(n.b,Object(c.a)(Object(c.a)({},b),{},{context:a,onSubmit:o.onSubmit||function(e){if(a&&l){e.preventDefault();var t={};if(l.forEach((function(e){var c=a.values[e];null!=c&&(t[e]=c)})),u)return i.a.patch(u,t).then((function(e){var t;null===o||void 0===o||null===(t=o.onSuccess)||void 0===t||t.call(o,e)})).catch((function(e){return o.onError?o.onError(e):(console.log("ehey"),a.handleError(e))}))}},children:t}))};q.NameInput=w,q.CategoryInput=L,q.RetailPriceInput=k,q.PresaleCheckboxInput=I,q.PresaleTextInput=P,q.OnSaleCheckboxInput=C,q.SalePriceInput=E,q.StageSelect=function(e){var t,a=e.showLabel,l=void 0===a||a,i=e.label,u=void 0===i?"Stage":i,o=Object(s.a)(e,f),b=o.stages,j=o.name,m=Object(s.a)(o,g);return Object(d.jsxs)(d.Fragment,{children:[l&&Object(d.jsx)(n.b.Label,{value:u}),Object(d.jsx)(n.b.SelectInput,Object(c.a)(Object(c.a)({},m),{},{required:!0,name:j||"stage",nullValue:{label:"Select stage"},children:null===b||void 0===b||null===(t=b.map)||void 0===t?void 0:t.call(b,(function(e){return Object(r.createElement)(n.b.SelectInput.Option,Object(c.a)(Object(c.a)({},e),{},{key:e.value}))}))}))]})}},365:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var c=a(22),s=a(4),r=a(1),l=a(8),n=a(2),i=a(9),u=a(6),o=a(5),d=a(3),b=a(347),j=a(0),m=["order_slug"],p=function(e){var t=e.order_slug,a=Object(s.a)(e,m),c=Object(n.useState)(!1),o=Object(l.a)(c,2),d=o[0],p=o[1],v=Object(u.c)({supplier_name:"shein",url:""});return Object(j.jsx)(i.g.Section,{title:(null===a||void 0===a?void 0:a.title)||"Ajouter un produit",className:"supplier-product-add-section mt-3",children:Object(j.jsxs)(u.b,{context:v,onSubmit:function(e){e.preventDefault(),p(!0);var c=v.values.url;switch(v.values.supplier_name){case"zara":return null;default:return c.includes("shein")?b.a.getSheinProductData(t,{url:c}).then((function(e){return p(!1),v.setValue("url",""),null===a||void 0===a?void 0:a.onSuccess(e)})).catch((function(e){return v.setErrors(Object(r.a)(Object(r.a)({},v.errors),{},{url:"Something went wrong."})),p(!1),null===a||void 0===a?void 0:a.onError(data)})):null}},className:"supplier-product-add-form",children:[d&&Object(j.jsx)("div",{className:"my-3",children:"Getting product data. Please wait ..."}),Object(j.jsxs)("div",{className:"d-flex flex-column flex-md-row",children:[Object(j.jsx)(u.b.TextInput,{required:!0,name:"url",type:"url",error:v.errors.url,placeholder:"Add product source url ...",className:"me-1",disabled:d}),Object(j.jsx)(u.b.Submit,{value:"Get data",className:"btn btn-primary-3",disabled:d})]})]})})},v=a(349),O=a(348),h=a(343),x=a(341),_=a(342),f=["order","products","setProducts"],g=["item"],N=["isEdit","product"],y={order_id:"",items_stage:"",currency:"",is_paid:!1,total_cost:""};function S(e){var t=e.match.params.sOrderSlug,a=Object(n.useState)({}),c=Object(l.a)(a,2),s=c[0],m=c[1],O=Object(n.useState)({}),_=Object(l.a)(O,2),f=_[0],g=_[1],N=Object(n.useContext)(o.v),S=Object(u.c)(y),L=S.setValues;if(Object(n.useEffect)((function(){if(t)return b.a.detail(t).then((function(e){m(e),L({order_id:e.order_id||"",items_stage:e.items_stage||"",currency:e.currency||"",is_paid:e.is_paid||!1,total_cost:e.total_cost||""})})).catch((function(e){!e.response||e.response.status}))}),[t,L]),Object(n.useEffect)((function(){if(t)return x.a.list({supplier_order_slug:t}).then((function(e){g(e)})).catch((function(e){}))}),[t]),!s)return null;var k=function(e,a){e.preventDefault();var c={};Array.isArray(a)?a.forEach((function(e){var t=S.values[e];null!=t&&(c[e]=t)})):c=Object(r.a)({},S.values),b.a.patch(t,c).then((function(){N.success({message:h.a.order.update_success})})).catch((function(e){N.error({message:h.a.order.update_error}),S.handleError(e)}))};return Object(j.jsx)(i.g,{back:h.b.orderList(),title:"Modifier une commande",actions:Object(j.jsx)("div",{}),className:"supplier-order-update-view",children:Object(j.jsxs)("div",{className:"d-grid grid-md-3 gap-3",children:[Object(j.jsxs)("div",{className:"span-md-2",children:[Object(j.jsx)(p,{order_slug:t,onSuccess:function(e){return N.success({message:h.a.product.create_success}),g(Object(r.a)(Object(r.a)({},f),{},{count:f.count+1,results:Object(d.h)(f.results,e)}))}}),Object(j.jsx)(w,Object(r.a)(Object(r.a)({},e),{},{order:s,products:f,setProducts:g,orderSlug:s.slug}))]}),Object(j.jsx)("div",{className:"",children:Object(j.jsxs)("div",{className:"",style:{position:"sticky",top:0},children:[Object(j.jsx)(u.b,{context:S,onSubmit:k,className:"order-update-form",children:Object(j.jsxs)(i.g.Section,{title:"Order details",children:[Object(j.jsx)("ul",{className:"mb-3",children:Object(j.jsxs)("li",{className:"",children:["Product: ",f.count]})}),Object(j.jsxs)("div",{className:"mb-1",children:[Object(j.jsx)(u.b.Label,{value:"Order Id",className:"mb-1"}),Object(j.jsx)(u.b.TextInput,{required:!0,name:"order_id",error:S.errors.order_id,placeholder:"Order iD",maxLength:99})]}),Object(j.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(j.jsx)(u.b.CheckboxInput,{name:"is_paid",error:S.errors.is_paid,className:"me-2"}),Object(j.jsx)(u.b.Label,{value:"Paid"})]}),S.values.is_paid&&Object(j.jsxs)("div",{className:"mb-1",children:[Object(j.jsx)(u.b.Label,{value:"Total cost",id:"total_cost_label"}),Object(j.jsx)(u.b.TextInput,{required:!0,type:"number",name:"retailtotal_cost_price",error:S.errors.total_cost,"aria-describedby":"total_cost_label",min:"0",step:"0.01"})]}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)(u.b.Submit,{value:"Save",className:"btn btn-primary-3"})})]})}),Object(j.jsx)(u.b,{context:S,onSubmit:function(e){return k(e,["items_stage"])},className:"order-update-form",children:Object(j.jsxs)(i.g.Section,{title:"Stage",text:"This will update the stage of all products in this order.",children:[Object(j.jsx)(v.a.StageSelect,{name:"items_stage",stages:null===s||void 0===s?void 0:s.stages,error:S.errors.items_stage,showLabel:!1,className:"mb-1"}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)(u.b.Submit,{value:"Save",className:"btn btn-primary-2"})})]})})]})})]})})}var w=function(e){var t,a=e.order,u=e.products,d=e.setProducts,b=Object(s.a)(e,f),m=Object(n.useState)([]),p=Object(l.a)(m,2),v=p[0],O=p[1],_=b.toast;return Object(j.jsxs)(i.g.Section,{className:"order-items mb-3",children:[null===u||void 0===u||null===(t=u.results)||void 0===t?void 0:t.map((function(e){var t=v.includes(e.slug);return Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("div",{className:"",children:Object(j.jsx)("input",{type:"checkbox",checked:t,onChange:function(){O(t?v.filter((function(t){return t!==e.slug})):[].concat(Object(c.a)(v),[e.slug]))}})}),Object(j.jsx)(L,{item:e,toast:_,categories:a.categories,onUpdate:function(e){d(Object(r.a)(Object(r.a)({},u),{},{results:u.results.map((function(t){return t.slug===e.slug?e:t}))}))}})]},e.slug)})),Object(j.jsx)(o.q,{count:u.count,next:u.next,previous:u.previous,onPreviousClick:function(){x.a.get(u.previous).then((function(e){d(e)})).catch((function(e){null===_||void 0===_||_.error({message:h.a.default})}))},onNextClick:function(){x.a.get(u.next).then((function(e){d(e)})).catch((function(e){null===_||void 0===_||_.error({message:h.a.default})}))}})]})},L=function(e){var t,a,c=e.item,u=Object(s.a)(e,g),d=Object(n.useState)(u.isEdit||!1),b=Object(l.a)(d,2),m=b[0],p=b[1];return(null===c||void 0===c?void 0:c.slug)?Object(j.jsxs)("div",{className:"order-item mb-2 border-1 rounded ",children:[Object(j.jsxs)("div",{className:"d-flex p-1",children:[Object(j.jsx)("div",{className:"me-1",children:Object(j.jsx)(o.j,Object(r.a)(Object(r.a)({},c.cover_data),{},{className:"rounded"}))}),Object(j.jsxs)("div",{className:"flex-1 detail",children:[Object(j.jsxs)("div",{className:"fw-bold",title:c.name,children:[Object(j.jsx)("span",{className:"me-2",children:c.name}),(null===c||void 0===c||null===(t=c.page)||void 0===t?void 0:t.is_published)&&Object(j.jsx)(i.i,{is_published:null===c||void 0===c||null===(a=c.page)||void 0===a?void 0:a.is_published,pill:!0,short:!0})]}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)(_.d,{product:Object(r.a)(Object(r.a)({},c),{},{retail_price:c.retail_price_data,sale_price:c.sale_price_data})})}),Object(j.jsxs)("div",{className:"mb-1 text-sm",children:[c.category_data&&Object(j.jsxs)("span",{className:"me-1",children:[c.category_data.name," /"]}),c.is_pre_sale&&Object(j.jsx)("span",{className:"me-1",children:"Pre sale /"}),Object(j.jsxs)("span",{className:"me-1",children:["atc: ",c.add_to_cart_count]})]}),Object(j.jsxs)("div",{className:"actions d-flex justify-content-between align-items-center",children:[Object(j.jsx)("a",{href:h.b.productUpdate(c.slug),target:"_blank",className:"update-btn btn btn-primary-2",children:"Update"}),Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{onClick:function(){return p(!m)},className:"quick-update-btn btn-secondary-3",children:"Quick update"})})]})]})]}),m&&Object(j.jsx)(k,Object(r.a)(Object(r.a)({},u),{},{isEdit:m,product:c}))]}):null},k=function(e){var t=e.isEdit,a=e.product,c=Object(s.a)(e,N),r=Object(u.c)({name:a.name||"",category:a.category||"",retail_price:(null===a||void 0===a?void 0:a.retail_price)||0,supplier_item_cost:(null===a||void 0===a?void 0:a.supplier_item_cost)||0,is_pre_sale:a.is_pre_sale||!1,is_pre_sale_text:a.is_pre_sale_text||""});if(!t)return null;var l=r.errors;return Object(j.jsx)(v.a,{context:r,prodSlug:a.slug,fields:["name","category","retail_price","is_pre_sale","is_pre_sale_text","supplier_item_cost"],className:"order-item-form mb-2",onSuccess:function(e){var t,a;return null===c||void 0===c||null===(t=c.toast)||void 0===t||null===(a=t.success)||void 0===a||a.call(t,{message:h.a.product.update_success}),null===c||void 0===c?void 0:c.onUpdate(e)},onError:function(e){return r.handleError(e)},children:Object(j.jsxs)("div",{className:"d-grid grid-md-5 gap-2",children:[Object(j.jsxs)("div",{className:"span-md-3 mb-2",children:[Object(j.jsx)(v.a.NameInput,{error:l.name,className:"mb-1"}),Object(j.jsx)(v.a.CategoryInput,{categories:null===c||void 0===c?void 0:c.categories,className:"mb-1"}),Object(j.jsx)(v.a.RetailPriceInput,{error:l.retail_price,className:"mb-1"}),Object(j.jsx)(u.b.Label,{value:"Supplier item cost (".concat(a.supplier_item_cost_currency,")")}),Object(j.jsx)(u.b.TextInput,{name:"supplier_item_cost",className:""})]}),Object(j.jsxs)("div",{className:"span-md-2",children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("div",{className:"mb-1",children:Object(j.jsx)(v.a.PresaleCheckboxInput,{error:l.is_pre_sale,className:"mb-1"})}),r.values.is_pre_sale&&Object(j.jsx)("div",{className:"mb-1",children:Object(j.jsx)(v.a.PresaleTextInput,{error:l.is_pre_sale_text})}),Object(j.jsx)(u.b.Submit,{value:"Update",className:"btn btn-primary-3 w-100"})]}),Object(j.jsx)(O.a,{product:a})]})]})})}}}]);
//# sourceMappingURL=5.4427248a.chunk.js.map